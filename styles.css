/* ===== LinguaFlow Player Styles ===== */

/* 视图容器 */
.linguaflow-view {
	height: 100%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding: 0;
	background: var(--background-primary);
}

/* 播放器容器 */
.linguaflow-player-container,
.linguaflow-container {
	display: flex;
	flex-direction: column;
	height: 100%;
	background: var(--background-primary);
	overflow: hidden;
}

/* 主内容区 */
.linguaflow-main-content {
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* 播放器和控制栏容器 */
.linguaflow-player-wrapper-section {
	display: flex;
	flex-direction: column;
	flex-shrink: 0;
}

/* 右侧布局 - 播放器在左，字幕在右 */
.linguaflow-container.linguaflow-layout-right .linguaflow-main-content {
	flex-direction: row;
}

/* 右侧布局：播放器和控制栏容器在左侧 */
.linguaflow-container.linguaflow-layout-right .linguaflow-player-wrapper-section {
	flex: 1;
	height: 100%;
}

/* 右侧布局：播放器区域 */
.linguaflow-container.linguaflow-layout-right .linguaflow-player-section {
	flex: 1;
	height: auto !important;
	min-height: auto !important;
}

.linguaflow-container.linguaflow-layout-right .linguaflow-resizer {
	width: 12px; /* 增加可点击区域 */
	height: 100%;
	cursor: ew-resize;
	padding: 0;
	margin: 0;
	z-index: 20; /* 提高层级，确保可点击 */
	position: relative;
	flex-shrink: 0;
	background: transparent;
}

/* 右侧布局：垂直分隔条的视觉指示器 */
.linguaflow-container.linguaflow-layout-right .linguaflow-resizer::before {
	top: 0;
	left: 50%;
	transform: translateX(-50%);
	width: 2px;
	height: 100%;
}

.linguaflow-container.linguaflow-layout-right .linguaflow-resizer:hover::before,
.linguaflow-container.linguaflow-layout-right .linguaflow-resizer.resizing::before {
	width: 3px;
}

.linguaflow-container.linguaflow-layout-right .linguaflow-resizer-line {
	width: 4px;
	height: 48px;
	flex-direction: column;
	gap: 4px;
}

.linguaflow-container.linguaflow-layout-right .linguaflow-resizer-line::before,
.linguaflow-container.linguaflow-layout-right .linguaflow-resizer-line::after {
	width: 1px;
	height: 12px;
}

.linguaflow-container.linguaflow-layout-right .linguaflow-subtitle-section {
	/* width由JS动态设置，这里不固定 */
	min-width: 50px; /* 极度放宽限制 */
	/* max-width: 1000px;  <-- 移除限制 */
	/* 强制设置 flex 属性，防止被 flex: 1 覆盖 */
	flex: 0 0 auto !important;
	width: auto; /* 让内联样式生效 */
	height: auto;
	overflow-y: auto;
	overflow-x: hidden; /* 防止横向滚动 */
}

/* 播放器区域 */
.linguaflow-player-section {
	flex-shrink: 0;
	display: flex;
	flex-direction: column;
	padding: 0;
	overflow: hidden;
	background: #000000; /* 黑色背景，与控制栏融为一体 */
}

/* 拖拽分隔条 - 模仿 Obsidian 原生样式 */
.linguaflow-resizer {
	height: 4px;
	background: transparent;
	cursor: ns-resize;
	position: relative;
	flex-shrink: 0;
	z-index: 10;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 6px 0;
	margin: -6px 0;
}

.linguaflow-resizer::before {
	content: '';
	position: absolute;
	left: 0;
	right: 0;
	height: 1px;
	background: var(--background-modifier-border);
	transition: background-color 0.15s;
}

.linguaflow-resizer:hover::before,
.linguaflow-resizer.resizing::before {
	background: var(--interactive-accent);
	height: 2px;
}

.linguaflow-resizer-line {
	position: relative;
	width: 48px;
	height: 4px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 2px;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 2px;
	opacity: 0;
	transition: opacity 0.15s, background-color 0.15s;
}

.linguaflow-resizer-line::before,
.linguaflow-resizer-line::after {
	content: '';
	width: 12px;
	height: 1px;
	background: var(--text-faint);
	border-radius: 1px;
}

.linguaflow-resizer:hover .linguaflow-resizer-line,
.linguaflow-resizer.resizing .linguaflow-resizer-line {
	opacity: 1;
	background: var(--background-primary);
}

.linguaflow-resizer:hover .linguaflow-resizer-line::before,
.linguaflow-resizer:hover .linguaflow-resizer-line::after,
.linguaflow-resizer.resizing .linguaflow-resizer-line::before,
.linguaflow-resizer.resizing .linguaflow-resizer-line::after {
	background: var(--interactive-accent);
}

/* 字幕列表区域 */
.linguaflow-subtitle-section {
	flex: 1;
	min-height: 50px; /* 极度放宽限制 */
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

.linguaflow-simple-player {
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: column;
}

.linguaflow-player-wrapper {
	position: relative;
	width: 100%;
	height: 100%;
	background: #000;
	border-radius: 8px;
	overflow: hidden;
	display: flex;
	align-items: center;
	justify-content: center;
}

.linguaflow-player-wrapper > div {
	width: 100%;
	height: 100%;
}

/* 自定义控制栏 */
.linguaflow-controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 6px;
	font-size: 14px;
}

.linguaflow-controls-left,
.linguaflow-controls-center,
.linguaflow-controls-right {
	display: flex;
	align-items: center;
	gap: 8px;
}

.linguaflow-btn {
	padding: 6px 12px;
	background: var(--interactive-normal);
	color: var(--text-normal);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 18px;
	transition: background 0.2s;
}

.linguaflow-btn:hover {
	background: var(--interactive-hover);
}

.linguaflow-time {
	color: var(--text-muted);
	font-family: monospace;
	font-size: 13px;
}

/* 播放速度控制 */
.linguaflow-rate-control {
	display: flex;
	align-items: center;
	gap: 6px;
}

.linguaflow-rate-control label {
	color: var(--text-muted);
	font-size: 12px;
}

.linguaflow-rate-btn {
	padding: 4px 8px;
	background: var(--background-modifier-border);
	color: var(--text-normal);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	font-size: 11px;
	transition: all 0.2s;
}

.linguaflow-rate-btn:hover {
	background: var(--interactive-hover);
	border-color: var(--interactive-accent);
}

.linguaflow-rate-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* 音量控制 */
.linguaflow-volume-control {
	display: flex;
	align-items: center;
	gap: 6px;
}

.linguaflow-volume-control input[type="range"] {
	width: 80px;
	height: 4px;
	background: var(--background-modifier-border);
	border-radius: 2px;
	outline: none;
}

.linguaflow-volume-control input[type="range"]::-webkit-slider-thumb {
	appearance: none;
	width: 12px;
	height: 12px;
	background: var(--interactive-accent);
	border-radius: 50%;
	cursor: pointer;
}

.linguaflow-volume-control span {
	color: var(--text-muted);
	font-size: 11px;
	min-width: 35px;
}

/* 应用容器 */
.linguaflow-container {
	height: 100%;
	display: flex;
	flex-direction: column;
	overflow: auto;
}

.linguaflow-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	flex-shrink: 0;
	min-height: 40px;
}

.linguaflow-header h2 {
	margin: 0;
	font-size: 14px;
	font-weight: 500;
	color: var(--text-normal);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	flex: 1;
	padding-right: 8px;
}

.linguaflow-badge {
	padding: 2px 6px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: 3px;
	font-size: 10px;
	font-weight: 500;
	white-space: nowrap;
	flex-shrink: 0;
}

/* 空状态 */
.linguaflow-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	padding: 40px;
	text-align: center;
	color: var(--text-muted);
}

.linguaflow-empty-icon {
	font-size: 64px;
	margin-bottom: 16px;
	opacity: 0.5;
}

.linguaflow-empty h2 {
	margin: 0 0 8px 0;
	color: var(--text-normal);
}

.linguaflow-empty p {
	margin: 0 0 24px 0;
}

.linguaflow-examples {
	text-align: left;
	max-width: 600px;
}

.linguaflow-examples h3 {
	margin: 0 0 12px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-examples ul {
	list-style: none;
	padding: 0;
	margin: 0;
}

.linguaflow-examples li {
	margin: 8px 0;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 4px;
}

.linguaflow-examples code {
	font-family: monospace;
	font-size: 12px;
	color: var(--text-accent);
}

/* 错误状态 */
.linguaflow-error,
.linguaflow-error-boundary {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	padding: 40px;
	text-align: center;
	color: var(--text-error);
}

.linguaflow-error-icon {
	font-size: 64px;
	margin-bottom: 16px;
}

.linguaflow-error h2,
.linguaflow-error-boundary h2 {
	margin: 0 0 8px 0;
	color: var(--text-error);
}

.linguaflow-error p,
.linguaflow-error-boundary p {
	margin: 0 0 24px 0;
	color: var(--text-muted);
}

.linguaflow-error-boundary pre {
	max-width: 600px;
	max-height: 200px;
	overflow: auto;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 4px;
	text-align: left;
	font-size: 11px;
	margin: 0 0 16px 0;
}

.linguaflow-retry-btn {
	padding: 8px 16px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	transition: background 0.2s;
}

.linguaflow-retry-btn:hover {
	background: var(--interactive-accent-hover);
}

/* 加载状态 */
.linguaflow-loading {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 40px;
	gap: 16px;
	color: var(--text-muted);
}

.linguaflow-spinner {
	width: 40px;
	height: 40px;
	border: 4px solid var(--background-modifier-border);
	border-top-color: var(--interactive-accent);
	border-radius: 50%;
	animation: linguaflow-spin 1s linear infinite;
}

@keyframes linguaflow-spin {
	to { transform: rotate(360deg); }
}

/* ===== 字幕系统样式 ===== */

/* 字幕容器 */
.linguaflow-subtitle-container {
	position: relative;
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: column;
}

/* 视频上的字幕覆盖层 */
.linguaflow-subtitle-overlay {
	position: absolute;
	left: 0;
	right: 0;
	padding: 8px 16px;
	text-align: center;
	z-index: 10;
	pointer-events: none;
	text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.linguaflow-subtitle-top {
	top: 20px;
}

.linguaflow-subtitle-center {
	top: 50%;
	transform: translateY(-50%);
}

.linguaflow-subtitle-bottom {
	bottom: 20px;
}

.linguaflow-subtitle-content {
	display: inline-block;
	padding: 6px 12px;
	border-radius: 4px;
	max-width: 90%;
	line-height: 1.5;
}

.linguaflow-subtitle-text,
.linguaflow-subtitle-en {
	font-weight: 600;
	font-size: 1em;
}

.linguaflow-subtitle-zh {
	font-size: 0.9em;
	margin-top: 4px;
	opacity: 0.9;
}

/* 字幕列表 */
.linguaflow-subtitle-list {
	height: 100%;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

.linguaflow-subtitle-list-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 12px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	flex-shrink: 0;
}

.linguaflow-subtitle-list-header h3 {
	margin: 0;
	font-size: 16px;
	color: var(--text-normal);
}

.linguaflow-subtitle-count {
	font-size: 12px;
	color: var(--text-muted);
	padding: 4px 8px;
	background: var(--background-primary);
	border-radius: 4px;
}

.linguaflow-subtitle-items {
	display: flex;
	flex-direction: column;
	gap: 8px;
	flex: 1;
	overflow-y: auto;
}

/* 字幕项 */
.linguaflow-subtitle-item {
	padding: 12px;
	padding-left: 14px; /* 固定左侧内边距，避免状态切换时抖动 */
	border: 2px solid transparent; /* 使用透明边框，保持布局稳定 */
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s ease-out; /* 统一的平滑过渡 */
	line-height: 1.6;
	opacity: 0.5; /* 非活动字幕淡化 */
	background: var(--background-primary);
}

.linguaflow-subtitle-item:hover {
	background: var(--background-primary-alt);
	box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

/* 激活状态 - 微妙强调设计 */
.linguaflow-subtitle-list .linguaflow-subtitle-item.active {
	background: rgba(var(--interactive-accent-rgb, 139, 92, 246), 0.02) !important;
	box-shadow: inset 2px 0 0 0 var(--interactive-accent), 0 1px 3px rgba(0, 0, 0, 0.05) !important;
	opacity: 1 !important; /* 活动字幕完全不透明 */
	transform: translateX(0); /* 确保过渡的起始状态 */
	transition: all 0.2s ease-out; /* 平滑过渡 */
}

/* 下一句字幕稍微突出 */
.linguaflow-subtitle-list .linguaflow-subtitle-item.active + .linguaflow-subtitle-item {
	opacity: 0.7;
}

.linguaflow-subtitle-item.looping {
	background: rgba(40, 167, 69, 0.05) !important;
	box-shadow: inset 3px 0 0 0 #28a745, 0 2px 8px rgba(40, 167, 69, 0.15) !important;
}

/* 字幕导出按钮 - 正式版 */
.linguaflow-export-btn {
	position: absolute;
	right: 4px;
	top: 4px;
	background: transparent;
	border: none;
	color: var(--text-muted);
	cursor: pointer;
	font-size: 12px;
	padding: 4px;
	border-radius: 4px;
	opacity: 0; /* 默认隐藏 */
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	height: 24px;
	width: 24px;
	z-index: 10;
}

.linguaflow-subtitle-item:hover .linguaflow-export-btn {
	opacity: 0.6; /* 悬停字幕项时显示 */
}

.linguaflow-export-btn:hover {
	opacity: 1 !important;
	background-color: var(--background-modifier-hover);
	color: var(--interactive-accent);
	transform: scale(1.1);
}

.linguaflow-subtitle-item-header {
	/* 移除之前的 flex 布局对按钮的影响 */
	display: flex;
	align-items: center;
	margin-bottom: 4px;
	font-size: 12px;
	color: var(--text-muted);
}

.linguaflow-play-segment-btn {
	background: none;
	border: none;
	cursor: pointer;
	padding: 2px 6px;
	border-radius: 4px;
	font-size: 14px;
	opacity: 0.6;
	transition: opacity 0.2s, background-color 0.2s;
}

.linguaflow-play-segment-btn:hover {
	opacity: 1;
	background-color: var(--background-modifier-hover);
}

.linguaflow-subtitle-index {
	font-family: var(--font-monospace);
	opacity: 0.7;
	color: var(--text-muted);
	background: var(--background-modifier-border);
	padding: 2px 6px;
	border-radius: 3px;
}

.linguaflow-subtitle-time {
	font-size: 11px;
	color: var(--text-muted);
	font-family: monospace;
	flex: 1;
}

.linguaflow-item-controls {
	display: flex;
	gap: 4px;
	align-items: center;
}

.linguaflow-loop-badge {
	font-size: 11px;
	font-weight: 600;
	color: #28a745;
	background: rgba(40, 167, 69, 0.1);
	padding: 2px 6px;
	border-radius: 3px;
	margin-left: auto;
}

/* 当选中指示器存在时，循环标记紧随其后，不需要 auto margin */
.linguaflow-selected-indicator + .linguaflow-loop-badge {
	margin-left: 6px;
}

.linguaflow-play-segment-btn.active-loop {
	opacity: 1;
	background-color: rgba(40, 167, 69, 0.2);
	color: #28a745;
}

.linguaflow-record-segment-btn {
	opacity: 0.6;
}

.linguaflow-record-segment-btn:hover {
	opacity: 1;
	color: #dc3545;
	background-color: rgba(220, 53, 69, 0.1);
}

.linguaflow-record-segment-btn.active-record {
	opacity: 1;
	background-color: #dc3545;
	color: white;
	animation: pulse-record 1.5s infinite;
}

.linguaflow-subtitle-item.recording {
	border: 2px solid #dc3545 !important;
	background: rgba(220, 53, 69, 0.05);
	animation: pulse-recording-border 1.5s ease-in-out infinite;
}

@keyframes pulse-recording-border {
	0%, 100% {
		box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4);
	}
	50% {
		box-shadow: 0 0 0 6px rgba(220, 53, 69, 0);
	}
}

@keyframes pulse-record {
	0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
	70% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(220, 53, 69, 0); }
	100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
}

.linguaflow-subtitle-item-text {
	line-height: 1.6;
	display: flex;
	flex-direction: column;
}

.linguaflow-clickable-word {
	cursor: pointer;
	color: var(--text-normal);
	display: inline; /* 强制内联显示 */
	/* 仅过渡颜色和背景，不改变布局 */
	transition: color 0.15s ease, background-color 0.15s ease;
	/* 性能优化：告诉浏览器只会改变这些属性 */
	will-change: color, background-color;
	/* 移除所有可能影响布局的属性 */
}

.linguaflow-clickable-word:hover {
	background: var(--background-modifier-hover);
	color: var(--text-accent);
}

/* 移除 active 状态的 transform，避免点击抖动 */

/* 单词高亮 - 播放时的卡拉OK效果（零布局影响） */
.linguaflow-word-highlight {
	/* 仅改变颜色和背景，绝不影响布局 */
	background: var(--background-modifier-hover) !important;
	color: var(--interactive-accent) !important;
	/* 保证和普通状态完全相同的布局属性 */
	display: inline !important;
	padding: 0 !important;
	margin: 0 !important;
	border: none !important;
	font-weight: inherit !important;
	font-size: inherit !important;
	line-height: inherit !important;
	text-decoration: none !important;
	box-shadow: none !important;
	transform: none !important;
	/* 性能优化：使用 GPU 加速，但不改变视觉 */
	backface-visibility: hidden;
}

/* 移除动画，避免抖动 */

.linguaflow-subtitle-item-main,
.linguaflow-subtitle-item-en {
	color: var(--text-normal);
	font-size: 14px;
	margin-bottom: 4px;
	transition: background-color 0.2s ease, color 0.2s ease;
}

.linguaflow-subtitle-item-en {
	font-weight: 500;
}

.linguaflow-subtitle-item-zh {
	color: var(--text-muted);
	font-size: 13px;
	white-space: pre-wrap; /* 允许换行 */
}

/* 整行高亮样式（禁用逐字高亮时使用） */
.linguaflow-line-highlight {
	background: var(--background-modifier-hover) !important;
	color: var(--interactive-accent) !important;
	padding: 2px 4px;
	border-radius: 4px;
	transition: all 0.2s ease;
}

/* 确保高亮能覆盖可点击单词的颜色 */
.linguaflow-line-highlight .linguaflow-clickable-word {
	color: var(--interactive-accent) !important;
}

/* 标点符号跟随父元素颜色 */
.linguaflow-line-highlight .linguaflow-punctuation,
.linguaflow-word-highlight .linguaflow-punctuation {
	color: inherit !important;
	opacity: 1;
}

.linguaflow-exit-loop-btn {
	padding: 4px 12px;
	background: #28a745;
	color: white;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	font-weight: 600;
	transition: all 0.2s;
	animation: pulse-loop 2s infinite;
}

.linguaflow-exit-loop-btn:hover {
	background: #218838;
	transform: scale(1.05);
}

@keyframes pulse-loop {
	0%, 100% {
		box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
	}
	50% {
		box-shadow: 0 0 0 6px rgba(40, 167, 69, 0);
	}
}

/* 字幕提示 */
.linguaflow-subtitle-hint {
	margin-top: 12px;
	padding: 10px;
	background: var(--background-primary);
	border-radius: 4px;
	font-size: 12px;
	color: var(--text-muted);
	text-align: center;
	border-left: 3px solid var(--interactive-accent);
}

/* 滚动条优化 */
.linguaflow-subtitle-list::-webkit-scrollbar {
	width: 8px;
}

.linguaflow-subtitle-list::-webkit-scrollbar-track {
	background: var(--background-modifier-border);
	border-radius: 4px;
}

.linguaflow-subtitle-list::-webkit-scrollbar-thumb {
	background: var(--text-muted);
	border-radius: 4px;
}

.linguaflow-subtitle-list::-webkit-scrollbar-thumb:hover {
	background: var(--text-normal);
}

/* ===== 字幕控制栏样式 ===== */

.linguaflow-subtitle-controls {
	padding: 10px 16px;
	background: #000000; /* 黑色背景，与播放器区域一致 */
	border-top: none; /* 移除边框，无分界线 */
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	transition: all 0.3s ease;
	flex-shrink: 0;
	overflow-x: auto;
	overflow-y: hidden;
}

/* 隐藏滚动条但保持滚动功能 */
.linguaflow-subtitle-controls::-webkit-scrollbar {
	display: none;
}

.linguaflow-subtitle-controls {
	-ms-overflow-style: none;
	scrollbar-width: none;
}


/* ==========================================================================
   LangPlayer v1.6.0 UI 现代化重构 (2024)
   ========================================================================== */

/* 1. 字幕覆盖层玻璃拟态 (Glassmorphism) */
.linguaflow-subtitle-overlay {
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
	background: rgba(0, 0, 0, 0.4); /* 半透明黑底 */
	border-radius: 8px;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	border: 1px solid rgba(255, 255, 255, 0.1);
	transition: all 0.3s ease;
}

/* 2. 新版控制栏布局 */
.linguaflow-subtitle-controls {
	display: flex;
	flex-wrap: wrap; /* 允许换行，适应不同窗口宽度 */
	justify-content: center; /* 居中排列 */
	align-items: center;
	gap: 16px; /* 组间距缩小，更紧凑 */
	padding: 8px 12px;
	background: #111111;
	border-top: 1px solid #222;
	width: 100%; /* 确保占满容器 */
}

/* 分组容器 */
.linguaflow-controls-group {
	display: flex;
	align-items: center;
	gap: 4px;
	position: relative;
	flex-shrink: 0; /* 防止分组内部被压缩 */
}

/* 移除分组之间的垂直分隔线 */
.linguaflow-controls-group:not(:last-child)::after {
	content: none;
	display: none;
}

/* 移除旧的 margin 规则 */
.linguaflow-control-btn-loop,
.linguaflow-control-btn-record,
.linguaflow-control-btn-speed {
	margin-left: 0 !important;
}

/* 3. 按钮样式优化 */
.linguaflow-control-btn {
	background: transparent;
	border: 1px solid rgba(255, 255, 255, 0.2);
	color: rgba(255, 255, 255, 0.8);
	border-radius: 5px; /* 稍微减小圆角 */
	width: 28px;  /* 缩小到 28px */
	height: 28px;
	min-width: 28px;
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.linguaflow-control-btn:hover {
	background: rgba(255, 255, 255, 0.1);
	border-color: rgba(255, 255, 255, 0.5);
	color: #fff;
	transform: translateY(-1px);
}

.linguaflow-control-btn:active {
	transform: translateY(0);
}

/* 播放按钮特殊处理 - 更大更醒目 */
.linguaflow-control-btn-playpause {
	width: 34px; /* 缩小播放按钮 */
	height: 34px;
	border-color: var(--interactive-accent);
	color: var(--interactive-accent);
	background: rgba(var(--interactive-accent-rgb), 0.1);
}

.linguaflow-control-btn-playpause:hover {
	background: var(--interactive-accent);
	color: #fff;
	box-shadow: 0 0 15px rgba(var(--interactive-accent-rgb), 0.4);
}

/* 激活状态统一 */
.linguaflow-control-btn.active {
	background: var(--interactive-accent);
	border-color: var(--interactive-accent);
	color: #fff;
}

/* 角标优化 */
.linguaflow-control-badge {
	position: absolute;
	bottom: -4px;
	right: -4px;
	font-size: 9px;
	padding: 1px 3px;
	background: #333;
	border: 1px solid #555;
	border-radius: 3px;
	color: #ccc;
	line-height: 1;
}

/* 4. 滚动条美化 (针对 Chrome/Webkit) */
::-webkit-scrollbar {
	width: 6px;
	height: 6px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.2);
	border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.4);
}


/* 音频波形可视化背景层 */
.linguaflow-waveform-background {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	min-height: 60px; /* 确保有最小高度 */
	display: flex;
	align-items: center;
	justify-content: center;
	pointer-events: none; /* 不阻挡按钮点击 */
	z-index: 0; /* 在按钮层下方 */
	overflow: hidden;
	opacity: 1; /* 完全不透明，让波形更明显 */
}

/* 音频波形画布 */
.linguaflow-audio-waveform {
	display: block;
	width: 100%;
	height: 100%;
	min-height: 60px; /* 确保有最小高度 */
	object-fit: cover; /* 覆盖整个容器 */
}

/* 空状态 */
.linguaflow-controls-empty {
	width: 100%;
	text-align: center;
	padding: 24px;
	opacity: 0.6;
}

.linguaflow-controls-hint {
	color: var(--text-muted);
	font-size: 13px;
	font-weight: 400;
	letter-spacing: 0.5px;
}

/* 控制按钮组 - 紧凑布局 */
.linguaflow-controls-buttons {
	display: flex;
	flex-wrap: nowrap; /* 不换行，保持单行 */
	gap: 6px;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
}

/* ===== 按钮分组间隔 ===== */

/* 第2组：复读控制 (循环, AB) */
.linguaflow-control-btn-loop {
	margin-left: 12px;
}

/* 第3组：跟读录音 (录音, 影子) */
.linguaflow-control-btn-record {
	margin-left: 12px;
}

/* 第4组：播放设置 (速度, 字幕) */
.linguaflow-control-btn-speed {
	margin-left: 12px;
}

/* ==================== 极致按钮系统 ==================== */

/* 基础按钮 - 统一正方形图标按钮 */
.linguaflow-control-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	
	/* 统一正方形尺寸 */
	width: 40px;
	height: 40px;
	min-width: 40px;
	max-width: 40px;
	padding: 0;
	
	/* 极简外观 - 透明背景，只有线条 */
	background: transparent; /* 完全透明 */
	border: 1px solid rgba(255, 255, 255, 0.4); /* 更明显的白色边框线条 */
	border-radius: 8px;
	
	/* 图标颜色 */
	color: rgba(255, 255, 255, 0.9); /* 白色图标 */
	
	/* 交互 */
	cursor: pointer;
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	user-select: none;
	flex-shrink: 0;
	
	/* 无默认阴影 */
	box-shadow: none;
}

/* 图标样式 */
.linguaflow-control-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
}

.linguaflow-control-icon svg {
	width: 16px; /* 缩小图标 */
	height: 16px;
	transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 禁用状态 */
.linguaflow-control-btn:disabled {
	opacity: 0.3;
	cursor: not-allowed;
	background: rgba(var(--mono-rgb-100), 0.01);
}

.linguaflow-control-btn:disabled:hover {
	background: rgba(var(--mono-rgb-100), 0.01);
	border-color: rgba(var(--mono-rgb-100), 0.06);
	box-shadow: none;
	transform: none;
}

/* 悬停状态 - 突出线条边框 */
.linguaflow-control-btn:hover {
	background: transparent; /* 保持透明 */
	border-color: rgba(255, 255, 255, 0.8); /* 增强边框线条 */
	color: rgba(255, 255, 255, 1); /* 纯白色图标 */
	box-shadow: 0 0 8px rgba(255, 255, 255, 0.2); /* 轻微发光效果 */
	transform: scale(1.05);
}

/* 点击状态 */
.linguaflow-control-btn:active {
	transform: scale(0.95);
	background: transparent; /* 保持透明 */
	border-color: rgba(255, 255, 255, 0.6);
	box-shadow: none;
}

/* 激活状态 - 品牌色点缀 */
.linguaflow-control-btn.active {
	background: rgba(var(--interactive-accent-rgb), 0.12);
	border-color: rgba(var(--interactive-accent-rgb), 0.35);
	color: var(--interactive-accent);
}

.linguaflow-control-btn.active:hover {
	background: rgba(var(--interactive-accent-rgb), 0.18);
	box-shadow: 0 2px 10px rgba(var(--interactive-accent-rgb), 0.2);
	transform: scale(1.05);
}

/* 图标优化 - 已在上面定义，这里重写以统一 */
.linguaflow-control-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	opacity: 0.9;
}

.linguaflow-control-btn:hover .linguaflow-control-icon {
	opacity: 1;
}

.linguaflow-control-btn:hover .linguaflow-control-icon svg {
	transform: scale(1.1);
}

/* ==========================================================================
   移动端/触屏设备适配
   ========================================================================== */
@media (pointer: coarse), (max-width: 768px) {
	/* 1. 增大触摸目标尺寸，并统一播放按钮大小 */
	.linguaflow-control-btn,
	.linguaflow-control-btn-playpause {
		width: 38px !important;
		height: 38px !important;
		min-width: 38px !important;
	}
	
	.linguaflow-control-icon svg {
		width: 20px !important;
		height: 20px !important;
	}

	/* 2. 控制栏改为横向滚动，防止溢出被切掉 */
	.linguaflow-subtitle-controls {
		flex-wrap: nowrap;
		justify-content: flex-start; /* 改回 flex-start 以确保溢出时可以通过滚动访问所有按钮 */
		overflow-x: auto;
		padding: 8px 12px;
		gap: 8px; /* 稍微减小间距 */
		/* 隐藏滚动条但保持功能 */
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
	
	.linguaflow-subtitle-controls::-webkit-scrollbar {
		display: none;
	}
	
	/* 3. 隐藏不适合移动端的按钮 (如布局切换，移动端强制底部) */
	.linguaflow-control-btn-layout {
		display: none !important;
	}
}

.linguaflow-control-label {
	font-size: 12px;
	font-weight: 500;
}

/* ==================== 特殊按钮定制 ==================== */

/* 1. 播放/暂停按钮 - 透明背景，主题色线条 */
.linguaflow-control-btn-playpause {
	background: transparent; /* 透明背景 */
	border: 2px solid var(--interactive-accent); /* 主题色边框，加粗突出 */
	color: var(--interactive-accent);
	box-shadow: 0 0 10px rgba(var(--interactive-accent-rgb), 0.3);
}

.linguaflow-control-btn-playpause:hover {
	background: transparent; /* 保持透明 */
	border-color: var(--interactive-accent-hover);
	color: var(--interactive-accent-hover);
	box-shadow: 0 0 16px rgba(var(--interactive-accent-rgb), 0.5);
	transform: scale(1.1);
}

.linguaflow-control-btn-playpause:active {
	transform: scale(0.95);
	box-shadow: 0 0 8px rgba(var(--interactive-accent-rgb), 0.25);
}

.linguaflow-control-btn-playpause .linguaflow-control-icon {
	opacity: 1;
	color: var(--interactive-accent);
}

/* 播放按钮图标特殊优化 - 更大更清晰，线条风格 */
.linguaflow-control-btn-playpause .linguaflow-control-icon svg {
	width: 22px !important;
	height: 22px !important;
	stroke-width: 2.5px;
	fill: none;
	stroke: var(--interactive-accent);
}

.linguaflow-control-btn-playpause:hover .linguaflow-control-icon svg {
	transform: scale(1.15);
	stroke: var(--interactive-accent-hover);
}

/* 2. 循环播放 - 激活时绿色 */
.linguaflow-control-btn-loop.active {
	background: rgba(16, 185, 129, 0.12);
	border-color: rgba(16, 185, 129, 0.35);
	color: #10b981;
}

.linguaflow-control-btn-loop.active:hover {
	background: rgba(16, 185, 129, 0.18);
	box-shadow: 0 2px 10px rgba(16, 185, 129, 0.2);
	transform: scale(1.05);
}

/* 3. AB复读按钮 - 激活时蓝色主题色 */
.linguaflow-control-btn-ab.active {
	background: rgba(var(--interactive-accent-rgb, 99, 102, 241), 0.12);
	border-color: rgba(var(--interactive-accent-rgb, 99, 102, 241), 0.35);
	color: var(--interactive-accent);
}

.linguaflow-control-btn-ab.active:hover {
	background: rgba(var(--interactive-accent-rgb, 99, 102, 241), 0.18);
	box-shadow: 0 2px 10px rgba(var(--interactive-accent-rgb, 99, 102, 241), 0.25);
	transform: scale(1.05);
}

/* 4. 录音按钮 - 激活时红色脉冲 */
.linguaflow-control-btn-record.active {
	background: rgba(239, 68, 68, 0.12);
	border-color: rgba(239, 68, 68, 0.35);
	color: #ef4444;
	animation: record-pulse-soft 2s ease-in-out infinite;
}

.linguaflow-control-btn-record.active:hover {
	background: rgba(239, 68, 68, 0.18);
	box-shadow: 0 2px 10px rgba(239, 68, 68, 0.25);
	transform: scale(1.05);
}

@keyframes record-pulse-soft {
	0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.3); }
	50% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
}

/* 5. 辅助按钮组 (速度, 字幕, 编号) - 使用统一尺寸 */
/* 不再需要单独设置宽度，继承基础按钮的统一尺寸 */

/* 状态栏优化 */
.linguaflow-controls-status-bar {
	margin-left: auto; /* 推到最右侧 */
	padding: 0;
	border: none;
	margin-top: 0;
}

.linguaflow-status-badge {
	padding: 2px 8px;
	border-radius: 6px;
	font-size: 11px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
}

/* ===== 媒体输入对话框样式 ===== */

.linguaflow-media-input-modal {
	padding: 20px;
}

.linguaflow-media-input-modal h2 {
	margin-top: 0;
	margin-bottom: 20px;
	color: var(--text-normal);
	font-size: 20px;
	font-weight: 600;
}

.linguaflow-media-input-modal .setting-item {
	border: none;
	padding: 10px 0;
}

.linguaflow-media-input-modal .setting-item-info {
	flex-grow: 1;
}

.linguaflow-media-input-modal .setting-item-control {
	flex-grow: 1;
}

.linguaflow-media-input-modal input[type="text"] {
	width: 100%;
	padding: 8px 12px;
	font-size: 14px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
}

.linguaflow-media-input-modal input[type="text"]:focus {
	border-color: var(--interactive-accent);
	outline: none;
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb, 66, 133, 244), 0.1);
}

.linguaflow-modal-buttons {
	display: flex;
	gap: 10px;
	margin-top: 20px;
	justify-content: flex-end;
}

.linguaflow-modal-buttons button {
	padding: 8px 16px;
	border-radius: 6px;
	font-size: 14px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.linguaflow-modal-buttons button.mod-cta {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
}

.linguaflow-modal-buttons button.mod-cta:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb, 66, 133, 244), 0.3);
}

.linguaflow-modal-buttons button:not(.mod-cta) {
	background: var(--background-secondary);
	color: var(--text-normal);
	border: 1px solid var(--background-modifier-border);
}

.linguaflow-modal-buttons button:not(.mod-cta):hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.linguaflow-modal-hint {
	margin-top: 15px;
	padding: 10px;
	background: var(--background-secondary);
	border-left: 3px solid var(--interactive-accent);
	border-radius: 4px;
	font-size: 13px;
	color: var(--text-muted);
}

/* 字幕项选中状态 - 微妙强调设计 */
.linguaflow-subtitle-item.selected {
	border-color: transparent; /* 移除外边框 */
	background: rgba(var(--interactive-accent-rgb, 139, 92, 246), 0.02);
	box-shadow: inset 2px 0 0 0 var(--interactive-accent), 0 1px 3px rgba(0, 0, 0, 0.05);
	transition: all 0.2s ease-out;
}

.linguaflow-selected-indicator {
	color: var(--interactive-accent);
	font-size: 12px;
	margin-left: auto;
	animation: pulse-indicator 2s ease-in-out infinite;
}

@keyframes pulse-indicator {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.5; }
}

/* ===== 波形可视化样式 ===== */

.linguaflow-waveform-manager {
	margin-top: 20px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.linguaflow-waveform-section {
	margin-bottom: 20px;
}

.linguaflow-waveform-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 8px;
}

.linguaflow-waveform-header h4 {
	margin: 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-waveform-status {
	padding: 2px 8px;
	background: #4A9EFF;
	color: white;
	border-radius: 3px;
	font-size: 11px;
	font-weight: 600;
}

.linguaflow-waveform-status.user {
	background: #10B981;
}

.linguaflow-waveform-container {
	border-radius: 4px;
	overflow: hidden;
	background: var(--background-primary);
	min-height: 80px;
}

.linguaflow-waveform-placeholder {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 80px;
	color: var(--text-muted);
	font-size: 13px;
	font-style: italic;
	background: var(--background-primary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 4px;
}

.linguaflow-waveform-error {
	padding: 12px;
	background: rgba(220, 53, 69, 0.1);
	color: #dc3545;
	border-radius: 4px;
	margin-bottom: 12px;
	font-size: 13px;
}

.linguaflow-waveform-hint {
	padding: 10px;
	background: var(--background-primary);
	border-radius: 4px;
	font-size: 12px;
	color: var(--text-muted);
	text-align: center;
	border-left: 3px solid #4A9EFF;
	margin-top: 12px;
}

/* ===== 录音控制样式 ===== */

.linguaflow-recorder-controls {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	margin-top: 16px;
}

.linguaflow-record-btn {
	padding: 8px 16px;
	background: #dc3545;
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: 600;
	font-size: 14px;
	transition: all 0.2s;
}

.linguaflow-record-btn:hover {
	background: #c82333;
	transform: scale(1.05);
}

.linguaflow-record-btn.recording {
	background: #ffc107;
	animation: pulse-record-yellow 1.5s infinite;
}

.linguaflow-record-btn.recording:hover {
	background: #e0a800;
}

@keyframes pulse-record-yellow {
	0%, 100% {
		box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7);
	}
	50% {
		box-shadow: 0 0 0 10px rgba(255, 193, 7, 0);
	}
}

.linguaflow-record-time {
	font-family: monospace;
	font-size: 18px;
	font-weight: 600;
	color: var(--text-normal);
	min-width: 80px;
}

.linguaflow-record-status {
	padding: 4px 12px;
	background: var(--background-primary);
	border-radius: 4px;
	font-size: 12px;
	color: var(--text-muted);
}

/* ===== 评分结果样式 ===== */

.linguaflow-evaluation-result {
	padding: 20px;
	background: var(--background-secondary);
	border-radius: 8px;
	margin-top: 16px;
}

.linguaflow-score-display {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
	margin-bottom: 16px;
}

.linguaflow-score-circle {
	width: 80px;
	height: 80px;
	border-radius: 50%;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	font-weight: 700;
	border: 4px solid;
}

.linguaflow-score-value {
	font-size: 24px;
}

.linguaflow-score-grade {
	font-size: 14px;
	margin-top: 2px;
}

.linguaflow-score-stats {
	flex: 1;
	margin-left: 20px;
}

.linguaflow-score-stat {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 8px;
	font-size: 13px;
}

.linguaflow-score-stat-label {
	color: var(--text-muted);
}

.linguaflow-score-stat-value {
	font-weight: 600;
	color: var(--text-normal);
}

.linguaflow-score-message {
	padding: 12px;
	background: var(--background-primary);
	border-radius: 4px;
	font-size: 13px;
	color: var(--text-normal);
	margin-bottom: 16px;
}

/* 差异视图样式 */
.linguaflow-diff-view {
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
	font-family: var(--font-monospace);
	font-size: 14px;
	line-height: 1.8;
	overflow-x: auto;
}

.linguaflow-diff-view .diff-equal {
	color: #28a745;
	background: rgba(40, 167, 69, 0.1);
	padding: 2px 4px;
	border-radius: 2px;
}

.linguaflow-diff-view del.diff-delete {
	color: #dc3545;
	background: rgba(220, 53, 69, 0.1);
	text-decoration: line-through;
	padding: 2px 4px;
	border-radius: 2px;
}

.linguaflow-diff-view ins.diff-insert {
	color: #007bff;
	background: rgba(0, 123, 255, 0.1);
	text-decoration: none;
	padding: 2px 4px;
	border-radius: 2px;
}

.linguaflow-diff-legend {
	display: flex;
	gap: 16px;
	margin-bottom: 12px;
	font-size: 12px;
}

.linguaflow-diff-legend-item {
	display: flex;
	align-items: center;
	gap: 4px;
}

.linguaflow-diff-legend-dot {
	width: 12px;
	height: 12px;
	border-radius: 2px;
}

.linguaflow-diff-legend-dot.correct {
	background: rgba(40, 167, 69, 0.3);
}

.linguaflow-diff-legend-dot.missing {
	background: rgba(220, 53, 69, 0.3);
}

.linguaflow-diff-legend-dot.extra {
	background: rgba(0, 123, 255, 0.3);
}

/* ===== 录音面板样式 ===== */

.linguaflow-recording-panel {
	margin-top: 20px;
	padding: 20px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.linguaflow-api-key-section {
	margin-bottom: 16px;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
}

.linguaflow-api-key-section h4 {
	margin: 0 0 8px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-api-key-input {
	width: 100%;
	padding: 8px 12px;
	background: var(--background-primary-alt);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--text-normal);
	font-family: monospace;
	font-size: 13px;
}

.linguaflow-api-key-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.linguaflow-hint-text {
	margin: 8px 0 0 0;
	font-size: 12px;
	color: var(--text-muted);
}

.linguaflow-record-btn.pause {
	background: #ffc107;
}

.linguaflow-record-btn.pause:hover {
	background: #e0a800;
}

.linguaflow-record-status {
	padding: 6px 12px;
	border-radius: 4px;
	font-size: 13px;
	font-weight: 600;
}

.linguaflow-record-status.recording {
	color: #dc3545;
	background: rgba(220, 53, 69, 0.1);
}

.linguaflow-record-status.paused {
	color: #ffc107;
	background: rgba(255, 193, 7, 0.1);
}

.linguaflow-current-subtitle-hint {
	margin: 16px 0;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
	border-left: 4px solid var(--interactive-accent);
}

.linguaflow-current-subtitle-hint h4 {
	margin: 0 0 8px 0;
	font-size: 14px;
	color: var(--text-muted);
}

.linguaflow-subtitle-text-large {
	font-size: 16px;
	line-height: 1.6;
	color: var(--text-normal);
	font-weight: 500;
}

.linguaflow-recording-playback {
	margin: 16px 0;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
}

.linguaflow-recording-playback h4 {
	margin: 0 0 8px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-audio-player {
	width: 100%;
}

.linguaflow-transcribing {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 12px;
	padding: 20px;
	background: var(--background-primary);
	border-radius: 6px;
	margin: 16px 0;
}

.linguaflow-transcription-result {
	margin: 16px 0;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
}

.linguaflow-transcription-result h4 {
	margin: 0 0 8px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-transcription-text {
	padding: 12px;
	background: var(--background-primary-alt);
	border-radius: 4px;
	font-size: 14px;
	line-height: 1.6;
	color: var(--text-normal);
}

.linguaflow-score-message {
	border-left: 4px solid;
}

.linguaflow-diff-section {
	margin-top: 16px;
}

.linguaflow-diff-section h4 {
	margin: 0 0 12px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-error-message {
	padding: 12px 16px;
	background: rgba(220, 53, 69, 0.1);
	color: #dc3545;
	border-radius: 4px;
	border-left: 4px solid #dc3545;
	margin: 16px 0;
	font-size: 13px;
}

.linguaflow-usage-hint {
	margin: 16px 0;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
	border-left: 4px solid #17a2b8;
}

.linguaflow-usage-hint h4 {
	margin: 0 0 8px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-usage-hint ol {
	margin: 0;
	padding-left: 20px;
	color: var(--text-muted);
	font-size: 13px;
	line-height: 1.8;
}

.linguaflow-usage-hint li {
	margin-bottom: 4px;
}

/* ===== Azure 发音评估样式 ===== */

.linguaflow-score-type {
	font-size: 10px;
	color: var(--text-muted);
	margin-top: 4px;
}

.linguaflow-azure-details {
	margin-top: 16px;
	padding: 16px;
	background: var(--background-primary);
	border-radius: 6px;
	border-left: 4px solid #007bff;
}

.linguaflow-azure-details h5 {
	margin: 0 0 12px 0;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-azure-details h6 {
	margin: 12px 0 8px 0;
	font-size: 13px;
	color: var(--text-normal);
}

.linguaflow-azure-scores {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.linguaflow-azure-score-item {
	display: flex;
	align-items: center;
	gap: 12px;
	font-size: 13px;
}

.linguaflow-azure-score-item > span:first-child {
	min-width: 60px;
	color: var(--text-muted);
}

.linguaflow-azure-score-item > span:last-child {
	min-width: 45px;
	text-align: right;
	color: var(--text-normal);
	font-weight: 600;
}

.linguaflow-score-bar {
	flex: 1;
	height: 8px;
	background: var(--background-modifier-border);
	border-radius: 4px;
	overflow: hidden;
}

.linguaflow-score-bar-fill {
	height: 100%;
	background: linear-gradient(90deg, #28a745, #20c997, #17a2b8);
	border-radius: 4px;
	transition: width 0.5s ease;
}

.linguaflow-word-errors {
	margin-top: 12px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
}

.linguaflow-word-errors ul {
	margin: 8px 0 0 0;
	padding-left: 20px;
	font-size: 13px;
	line-height: 1.6;
}

.linguaflow-word-errors li {
	margin-bottom: 6px;
	color: var(--text-muted);
}

.linguaflow-word-errors strong {
	color: var(--text-normal);
	font-weight: 600;
}

.linguaflow-word-score {
	color: var(--text-faint);
	font-size: 12px;
	margin-left: 4px;
}

/* ===== 评分弹窗样式 ===== */

.linguaflow-modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.6);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 9999;
	animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

.linguaflow-modal-content {
	background: var(--background-primary);
	border-radius: 16px;
	max-width: 540px;
	max-height: 90vh;
	width: 90%;
	overflow-y: auto;
	overflow-x: hidden;
	box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
	animation: slideUp 0.3s ease-out;
}

/* 隐藏滚动条但保持滚动功能 */
.linguaflow-modal-content::-webkit-scrollbar {
	width: 6px;
}

.linguaflow-modal-content::-webkit-scrollbar-track {
	background: transparent;
}

.linguaflow-modal-content::-webkit-scrollbar-thumb {
	background: rgba(var(--mono-rgb-100), 0.2);
	border-radius: 3px;
}

.linguaflow-modal-content::-webkit-scrollbar-thumb:hover {
	background: rgba(var(--mono-rgb-100), 0.3);
}

@keyframes slideUp {
	from {
		transform: translateY(20px);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.linguaflow-modal-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 16px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	flex-shrink: 0;
}

/* Modal 标题区域 */
.linguaflow-modal-title {
	display: flex;
	align-items: center;
	gap: 10px;
}

.linguaflow-modal-title h3 {
	margin: 0;
	font-size: 18px;
	font-weight: 600;
}

/* Modal 标题图标 */
.linguaflow-modal-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	background: rgba(var(--interactive-accent-rgb), 0.12);
	border-radius: 8px;
	color: var(--interactive-accent);
}

.linguaflow-modal-icon svg {
	width: 18px;
	height: 18px;
	stroke-width: 2.5px;
}

/* 关闭按钮 */
.linguaflow-modal-close {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	background: none;
	border: none;
	width: 32px;
	height: 32px;
	cursor: pointer;
	color: var(--text-muted);
	border-radius: 6px;
	transition: all 0.2s;
}

.linguaflow-modal-close:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.linguaflow-modal-close svg {
	width: 20px;
	height: 20px;
}

.linguaflow-modal-body {
	padding: 20px;
}

/* 得分和数据横向布局容器 */
.linguaflow-score-stats-container {
	display: flex;
	gap: 20px;
	align-items: center;
	margin-bottom: 16px;
}

.linguaflow-score-circle-large {
	width: 120px;
	height: 120px;
	border: 5px solid;
	border-radius: 50%;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	background: var(--background-secondary);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
	flex-shrink: 0;
}

.linguaflow-score-value-large {
	font-size: 40px;
	font-weight: 700;
	line-height: 1;
}

.linguaflow-score-grade-large {
	font-size: 18px;
	font-weight: 600;
	margin-top: 4px;
}

.linguaflow-score-feedback {
	padding: 12px 14px;
	background: var(--background-secondary);
	border-left: 3px solid;
	border-radius: 6px;
	margin-bottom: 18px;
	font-size: 14px;
	line-height: 1.5;
}

.linguaflow-modal-section {
	margin-bottom: 18px;
}

.linguaflow-modal-section:last-child {
	margin-bottom: 0;
}

.linguaflow-modal-section h4 {
	margin: 0 0 12px 0;
	font-size: 15px;
	font-weight: 600;
	color: var(--text-normal);
	display: flex;
	align-items: center;
	gap: 8px;
}

/* 章节图标 */
.linguaflow-section-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 26px;
	height: 26px;
	background: rgba(var(--interactive-accent-rgb), 0.1);
	border-radius: 6px;
	color: var(--interactive-accent);
	flex-shrink: 0;
}

.linguaflow-section-icon svg {
	width: 16px;
	height: 16px;
	stroke-width: 2.5px;
}

/* 警告图标特殊样式 */
.linguaflow-icon-warning {
	background: rgba(255, 193, 7, 0.12);
	color: #ffc107;
}

.linguaflow-transcription-box {
	background: var(--background-secondary);
	padding: 12px 16px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	font-size: 14px;
	line-height: 1.6;
	color: var(--text-normal);
}

.linguaflow-modal-audio-player {
	width: 100%;
	height: 48px;
	border-radius: 6px;
	background: var(--background-secondary);
	outline: none;
}

.linguaflow-modal-audio-player::-webkit-media-controls-panel {
	background: var(--background-secondary);
	border-radius: 6px;
}

/* 自定义音频播放器 - 与原生audio控件统一样式 */
.linguaflow-audio-player-custom {
	width: 100%;
	height: 48px;
	background: var(--background-secondary);
	border-radius: 6px;
	display: flex;
	align-items: center;
	padding: 0 12px;
	gap: 12px;
	border: 1px solid var(--background-modifier-border);
}

/* 简化的音频播放器 - 只有播放按钮和时间 */
.linguaflow-audio-player-simple {
	display: flex;
	align-items: center;
	gap: 12px;
}

.linguaflow-audio-play-btn {
	width: 32px;
	height: 32px;
	background: var(--interactive-accent);
	border: none;
	cursor: pointer;
	color: var(--text-on-accent);
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 50%;
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	flex-shrink: 0;
	box-shadow: 0 2px 5px rgba(var(--interactive-accent-rgb), 0.25);
}

.linguaflow-audio-play-btn:hover {
	background: var(--interactive-accent-hover);
	transform: scale(1.08);
	box-shadow: 0 3px 8px rgba(var(--interactive-accent-rgb), 0.35);
}

.linguaflow-audio-play-btn:active {
	transform: scale(0.95);
}

.linguaflow-audio-play-btn svg {
	width: 16px;
	height: 16px;
	fill: currentColor;
}

.linguaflow-audio-time {
	font-size: 12px;
	font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;
	color: var(--text-muted);
	white-space: nowrap;
	font-weight: 500;
	letter-spacing: 0.025em;
}

.linguaflow-audio-controls {
	margin-left: auto;
	display: flex;
	align-items: center;
	gap: 4px;
}

.linguaflow-audio-volume-btn,
.linguaflow-audio-more-btn {
	width: 28px;
	height: 28px;
	background: none;
	border: none;
	cursor: pointer;
	color: var(--text-muted);
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 4px;
	transition: all 0.2s;
}

.linguaflow-audio-volume-btn:hover,
.linguaflow-audio-more-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.linguaflow-audio-volume-btn svg,
.linguaflow-audio-more-btn svg {
	width: 16px;
	height: 16px;
}

/* ==================== 可拖动窗口样式 ==================== */

.linguaflow-draggable-window {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

/* 窗口标题栏 */
.linguaflow-window-header {
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
	padding: 12px 16px;
	display: flex;
	align-items: center;
	justify-content: space-between;
	cursor: move;
	user-select: none;
}

.linguaflow-window-header:active {
	cursor: grabbing;
}

.linguaflow-window-title {
	display: flex;
	align-items: center;
	gap: 8px;
	font-weight: 600;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-window-icon {
	font-size: 16px;
}

.linguaflow-window-drag-hint {
	color: var(--text-muted);
	opacity: 0.4;
	transition: opacity 0.2s;
}

.linguaflow-window-header:hover .linguaflow-window-drag-hint {
	opacity: 0.8;
}

/* 窗口内容 */
.linguaflow-window-content {
	flex: 1;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

/* 调整大小手柄 */
.linguaflow-window-resize-handle {
	position: absolute;
	right: 0;
	bottom: 0;
	width: 20px;
	height: 20px;
	cursor: nwse-resize;
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--text-muted);
	opacity: 0.3;
	transition: opacity 0.2s;
}

.linguaflow-window-resize-handle:hover {
	opacity: 0.8;
}

/* 字幕列表包装器 */
.linguaflow-subtitle-list-wrapper {
	flex: 1;
	overflow-y: auto;
	overflow-x: hidden;
}

/* 调整字幕列表样式以适应窗口 */
.linguaflow-subtitle-list-header {
	padding: 16px 16px 12px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	position: sticky;
	top: 0;
	z-index: 10;
}

.linguaflow-subtitle-list-header h3 {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.05em;
	margin: 0;
	display: inline-block;
}

.linguaflow-subtitle-count {
	font-size: 12px;
	color: var(--text-faint);
	margin-left: 8px;
}

.linguaflow-subtitle-items {
	padding: 8px;
}

/* ==================== 字幕面板样式 ==================== */

.linguaflow-subtitle-panel-root {
	height: 100%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.linguaflow-subtitle-panel-content {
	height: 100%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.linguaflow-subtitle-panel-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	padding: 40px 20px;
	text-align: center;
	color: var(--text-muted);
}

.linguaflow-empty-icon {
	font-size: 48px;
	margin-bottom: 16px;
	opacity: 0.5;
}

.linguaflow-subtitle-panel-empty p {
	margin: 8px 0;
}

.linguaflow-empty-hint {
	font-size: 12px;
	color: var(--text-faint);
}

.linguaflow-subtitle-list-scrollable {
	flex: 1;
	overflow-y: auto;
	overflow-x: hidden;
}

.linguaflow-audio-comparison {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
}

.linguaflow-audio-item {
	background: var(--background-secondary);
	padding: 10px 12px;
	border-radius: 8px;
	border: 1px solid var(--background-modifier-border);
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.linguaflow-audio-label {
	font-size: 12px;
	font-weight: 600;
	color: var(--text-normal);
	display: flex;
	align-items: center;
	gap: 5px;
	margin-bottom: -2px;
}

/* 音频图标 */
.linguaflow-audio-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--interactive-accent);
	opacity: 0.9;
	flex-shrink: 0;
}

.linguaflow-audio-icon svg {
	width: 15px;
	height: 15px;
	stroke-width: 2.5px;
}


.linguaflow-stats-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 8px;
}

/* 横向布局中的统计网格 - 2行3列布局 */
.linguaflow-score-stats-container .linguaflow-stats-grid {
	flex: 1;
	grid-template-columns: repeat(3, 1fr);
	grid-auto-rows: auto;
	gap: 6px;
}

.linguaflow-stat-item {
	background: var(--background-secondary);
	padding: 8px 10px;
	border-radius: 6px;
	display: flex;
	flex-direction: column;
	gap: 4px;
	border: 1px solid var(--background-modifier-border);
	text-align: center;
}

/* 横向布局中的统计项 - 更紧凑 */
.linguaflow-score-stats-container .linguaflow-stat-item {
	padding: 6px 8px;
	gap: 3px;
}

.linguaflow-stat-label {
	font-size: 11px;
	color: var(--text-muted);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.03em;
}

/* 横向布局中的标签 - 更小 */
.linguaflow-score-stats-container .linguaflow-stat-label {
	font-size: 10px;
}

.linguaflow-stat-value {
	font-size: 18px;
	font-weight: 700;
	color: var(--text-normal);
	line-height: 1;
}

/* 横向布局中的数值 - 稍小 */
.linguaflow-score-stats-container .linguaflow-stat-value {
	font-size: 16px;
	font-weight: 600;
}

.linguaflow-error-list {
	margin: 0;
	padding-left: 18px;
}

.linguaflow-error-list li {
	margin-bottom: 6px;
	font-size: 13px;
	line-height: 1.5;
}

.linguaflow-word-score-badge {
	color: var(--text-muted);
	font-size: 11px;
	margin-left: 4px;
}

.linguaflow-modal-footer {
	padding: 14px 20px;
	border-top: 1px solid var(--background-modifier-border);
	display: flex;
	justify-content: center;
	gap: 8px;
	flex-shrink: 0;
	background: var(--background-secondary);
}

.linguaflow-modal-btn-primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 9px 28px;
	border-radius: 8px;
	font-size: 14px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb), 0.2);
}

.linguaflow-modal-btn-primary:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-2px);
	box-shadow: 0 6px 16px rgba(var(--interactive-accent-rgb), 0.3);
}

.linguaflow-modal-btn-primary:active {
	transform: translateY(0);
	box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb), 0.2);
}

/* ================================================================================
   LinguaFlow Settings UI Styles
   现代化设置界面样�?
   ================================================================================ */

/* 设置容器 */
.linguaflow-settings {
	max-width: 800px;
	margin: 0 auto;
	padding: 20px;
}

/* 设置头部 */
.linguaflow-settings-header {
	text-align: center;
	padding: 30px 20px;
	margin-bottom: 30px;
	background: linear-gradient(135deg, 
		rgba(var(--interactive-accent-rgb), 0.1), 
		rgba(var(--interactive-accent-rgb), 0.05));
	border-radius: 12px;
	border: 1px solid rgba(var(--interactive-accent-rgb), 0.2);
}

.linguaflow-settings-header h1 {
	font-size: 32px;
	font-weight: 700;
	margin: 0 0 10px 0;
	color: var(--text-normal);
	background: linear-gradient(135deg, 
		var(--interactive-accent), 
		var(--interactive-accent-hover));
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.linguaflow-settings-desc {
	font-size: 14px;
	color: var(--text-muted);
	margin: 0;
	font-weight: 500;
}

/* 设置分组 */
.linguaflow-settings-section {
	margin-bottom: 40px;
	padding: 24px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
	transition: all 0.3s ease;
}

.linguaflow-settings-section:hover {
	border-color: rgba(var(--interactive-accent-rgb), 0.3);
	box-shadow: 0 4px 16px rgba(var(--interactive-accent-rgb), 0.1);
}

.linguaflow-settings-section h2 {
	font-size: 20px;
	font-weight: 600;
	margin: 0 0 8px 0;
	color: var(--text-normal);
	display: flex;
	align-items: center;
	gap: 8px;
	padding-bottom: 12px;
	border-bottom: 2px solid rgba(var(--interactive-accent-rgb), 0.2);
}

.linguaflow-settings-section > .setting-item-description {
	margin-bottom: 20px;
	font-size: 13px;
	color: var(--text-muted);
	padding-left: 4px;
}

/* 信息提示�?*/
.linguaflow-info-box {
	background: linear-gradient(135deg, 
		rgba(var(--interactive-accent-rgb), 0.08),
		rgba(var(--interactive-accent-rgb), 0.03));
	border: 1px solid rgba(var(--interactive-accent-rgb), 0.25);
	border-radius: 10px;
	padding: 16px 20px;
	margin: 16px 0;
}

.linguaflow-info-box p {
	margin: 0 0 12px 0;
	font-weight: 600;
	color: var(--text-normal);
	font-size: 14px;
}

.linguaflow-info-box ul {
	margin: 0;
	padding-left: 20px;
	list-style: none;
}

.linguaflow-info-box li {
	margin: 8px 0;
	padding-left: 8px;
	color: var(--text-muted);
	font-size: 13px;
	line-height: 1.6;
}

.linguaflow-info-box li::before {
	content: '•';
	color: var(--interactive-accent);
	font-weight: bold;
	margin-right: 8px;
}

/* 警告框 */
.linguaflow-warning-box {
	background: rgba(255, 165, 0, 0.1);
	border: 1px solid rgba(255, 165, 0, 0.3);
	border-radius: 10px;
	padding: 16px 20px;
	margin: 16px 0;
}

.linguaflow-warning-box p {
	margin: 0;
	color: var(--text-normal);
	font-size: 13px;
}

/* 成功框 */
.linguaflow-success-box {
	background: rgba(34, 197, 94, 0.1);
	border: 1px solid rgba(34, 197, 94, 0.3);
	border-radius: 10px;
	padding: 16px 20px;
	margin: 16px 0;
}

/* 设置项优�?*/
.linguaflow-settings .setting-item {
	border: none;
	padding: 16px 0;
	border-radius: 0;
}

.linguaflow-settings .setting-item:not(:last-child) {
	border-bottom: 1px solid var(--background-modifier-border-hover);
}

.linguaflow-settings .setting-item-name {
	font-weight: 600;
	font-size: 14px;
	color: var(--text-normal);
}

.linguaflow-settings .setting-item-description {
	font-size: 13px;
	color: var(--text-muted);
	line-height: 1.5;
	margin-top: 4px;
}

/* 按钮样式 */
.linguaflow-settings button {
	border-radius: 6px;
	font-weight: 500;
	transition: all 0.2s ease;
}

.linguaflow-settings button:hover {
	transform: translateY(-1px);
	box-shadow: 0 4px 12px rgba(var(--interactive-accent-rgb), 0.2);
}

/* 下拉框样�?*/
.linguaflow-settings select {
	border-radius: 6px;
	padding: 6px 10px;
	font-size: 13px;
	min-width: 200px;
}

/* 切换开关优�?*/
.linguaflow-settings .checkbox-container {
	border-radius: 12px;
}

/* 滑块优化 */
.linguaflow-settings .slider {
	border-radius: 12px;
}

/* 分隔�?*/
.linguaflow-settings hr {
	border: none;
	height: 1px;
	background: linear-gradient(90deg, 
		transparent, 
		var(--background-modifier-border), 
		transparent);
	margin: 30px 0;
}

/* 列表样式优化 */
.linguaflow-settings ol,
.linguaflow-settings ul {
	padding-left: 24px;
	margin: 12px 0;
}

.linguaflow-settings li {
	margin: 8px 0;
	line-height: 1.6;
	color: var(--text-muted);
	font-size: 13px;
}

/* 代码样式 */
.linguaflow-settings code {
	background: rgba(var(--interactive-accent-rgb), 0.1);
	color: var(--interactive-accent);
	padding: 2px 6px;
	border-radius: 4px;
	font-size: 12px;
	font-family: var(--font-monospace);
}

/* 响应式设�?*/
@media (max-width: 768px) {
	.linguaflow-settings {
		padding: 12px;
	}
	
	.linguaflow-settings-section {
		padding: 16px;
	}
	
	.linguaflow-settings-header h1 {
		font-size: 24px;
	}
}
/* ================================================================================
   Media Extended Style Buttons - 浠?Media Extended 鎸夐挳椋庢牸
   鐗圭偣锛氱函鍥炬爣銆佹棤杈规銆佹洿澶у浘鏍囥€佷富棰樿壊鑳屾櫙
   ================================================================================ */

/* 闅愯棌鎸夐挳鏂囧瓧鏍囩锛屽彧淇濈暀鍥炬爣 */
.linguaflow-control-label {
	display: none !important;
}

/* 鍩虹鎸夐挳 - Media Extended 椋庢牸 */
.linguaflow-control-btn {
	display: inline-flex !important;
	align-items: center !important;
	justify-content: center !important;
	width: 48px !important;
	height: 48px !important;
	min-width: 48px !important;
	min-height: 48px !important;
	padding: 0 !important;
	border-radius: 10px !important;
	background: transparent !important;
	border: none !important;
	color: rgba(255, 255, 255, 0.85) !important;
	cursor: pointer !important;
	transition: all 0.2s ease !important;
	position: relative !important;
	overflow: hidden !important;
	flex-shrink: 0 !important;
}

/* 鎮仠鐘舵€?- 寰寒鑳屾櫙 */
.linguaflow-control-btn:hover {
	background: rgba(255, 255, 255, 0.15) !important;
	color: rgba(255, 255, 255, 1) !important;
	transform: scale(1.08) !important;
}

/* 鐐瑰嚮鐘舵€?*/
.linguaflow-control-btn:active {
	transform: scale(0.92) !important;
	background: rgba(255, 255, 255, 0.1) !important;
}

/* 婵€娲荤姸鎬?- 鍝佺墝鑹?*/
.linguaflow-control-btn.active {
	background: rgba(var(--interactive-accent-rgb), 0.2) !important;
	color: var(--interactive-accent) !important;
}

.linguaflow-control-btn.active:hover {
	background: rgba(var(--interactive-accent-rgb), 0.3) !important;
	transform: scale(1.08) !important;
}

/* 鍥炬爣鏍峰紡 - 鏇村ぇ鏇存竻鏅?*/
.linguaflow-control-icon {
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	width: 28px !important;
	height: 28px !important;
	opacity: 1 !important;
}

.linguaflow-control-icon svg {
	width: 28px !important;
	height: 28px !important;
	stroke-width: 2px !important;
	transition: transform 0.2s ease !important;
}

/* 鎾斁/鏆傚仠鎸夐挳 - Media Extended 椋庢牸涓婚鑹茶儗鏅?*/
.linguaflow-control-btn-playpause {
	background: var(--interactive-accent) !important;
	color: #ffffff !important;
	width: 52px !important;
	height: 52px !important;
	border-radius: 12px !important;
}

.linguaflow-control-btn-playpause:hover {
	background: var(--interactive-accent-hover) !important;
	color: #ffffff !important;
	transform: scale(1.1) !important;
}

.linguaflow-control-btn-playpause:active {
	transform: scale(0.95) !important;
}

.linguaflow-control-btn-playpause .linguaflow-control-icon {
	color: #ffffff !important;
	width: 32px !important;
	height: 32px !important;
}

.linguaflow-control-btn-playpause .linguaflow-control-icon svg {
	width: 32px !important;
	height: 32px !important;
	stroke: #ffffff !important;
	fill: none !important;
	stroke-width: 2.5px !important;
}

/* 寰幆鎾斁 - 婵€娲绘椂缁胯壊 */
.linguaflow-control-btn-loop.active {
	background: rgba(16, 185, 129, 0.25) !important;
	color: #10b981 !important;
}

.linguaflow-control-btn-loop.active:hover {
	background: rgba(16, 185, 129, 0.35) !important;
	transform: scale(1.08) !important;
}

/* 褰曢煶鎸夐挳 - 婵€娲绘椂绾㈣壊 */
.linguaflow-control-btn-record.active {
	background: rgba(239, 68, 68, 0.25) !important;
	color: #ef4444 !important;
	animation: record-pulse-soft 2s ease-in-out infinite !important;
}

.linguaflow-control-btn-record.active:hover {
	background: rgba(239, 68, 68, 0.35) !important;
	transform: scale(1.08) !important;
}

/* 绂佺敤鐘舵€?*/
.linguaflow-control-btn:disabled {
	opacity: 0.25 !important;
	cursor: not-allowed !important;
	background: transparent !important;
}

.linguaflow-control-btn:disabled:hover {
	background: transparent !important;
	transform: none !important;
}

/* ================================================================================
   Modern Tabs Style - 鐜颁唬鏍囩椤垫牱寮?
   ================================================================================ */

/* 鏍囩椤靛鍣?*/
.linguaflow-tabs {
	display: flex;
	gap: 4px;
	padding: 0 0 16px 0;
	border-bottom: 2px solid var(--background-modifier-border);
	margin-bottom: 24px;
}

/* 鍗曚釜鏍囩 */
.linguaflow-tab {
	padding: 10px 20px;
	background: transparent;
	border: none;
	border-bottom: 3px solid transparent;
	color: var(--text-muted);
	font-size: 14px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
	position: relative;
	user-select: none;
}

.linguaflow-tab:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
	border-radius: 6px 6px 0 0;
}

/* 娲诲姩鏍囩 */
.linguaflow-tab.active {
	color: var(--interactive-accent);
	font-weight: 600;
	border-bottom-color: var(--interactive-accent);
}

.linguaflow-tab.active:hover {
	background: transparent;
}

/* 鏍囩椤靛唴瀹瑰尯鍩?*/
.linguaflow-tab-content {
	padding: 0;
	animation: fadeInUp 0.2s ease;
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(5px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* 绠€鍖栬缃晫闈㈢殑鏍囬 */
.linguaflow-settings h2 {
	margin-bottom: 20px;
	font-size: 24px;
	font-weight: 600;
}

/* 绉婚櫎鍗＄墖寮弒ection鏍峰紡锛堜娇鐢ㄦ爣绛鹃〉鍚庝笉闇€瑕侊級 */
.linguaflow-settings .linguaflow-settings-section {
	margin-bottom: 0;
	padding: 0;
	background: transparent;
	border: none;
	box-shadow: none;
}

/* 璁剧疆椤逛箣闂寸殑闂磋窛 */
.linguaflow-tab-content .setting-item {
	padding: 16px 0;
}

.linguaflow-tab-content .setting-item:first-child {
	padding-top: 0;
}
/* Styles updated: v1.5 */


/* ==================== 评分弹窗优化 ==================== */

/* 发音检视 Diff 样式 */
.linguaflow-diff-text-container {
display: flex;
flex-wrap: wrap;
gap: 6px;
padding: 12px;
background: var(--background-primary);
border-radius: 8px;
margin-bottom: 8px;
border: 1px solid var(--background-modifier-border);
}

.linguaflow-diff-word {
font-size: 15px;
font-weight: 500;
padding: 2px 4px;
border-radius: 4px;
}

.linguaflow-diff-word.correct {
color: #2e7d32;
background: rgba(46, 125, 50, 0.1);
}

.linguaflow-diff-word.missing {
color: #d32f2f;
background: rgba(211, 47, 47, 0.1);
text-decoration: line-through; /* 删除线表示漏读 */
opacity: 0.7;
}

.linguaflow-transcription-hint {
font-size: 12px;
color: var(--text-muted);
padding-left: 4px;
font-style: italic;
margin-top: 4px;
}

/* 音频对比区域优化 - 横向布局 */
.linguaflow-audio-comparison {
display: flex;
gap: 12px;
margin-top: 8px;
}

.linguaflow-audio-item {
flex: 1;
background: var(--background-secondary);
padding: 10px;
border-radius: 8px;
border: 1px solid var(--background-modifier-border);
display: flex;
flex-direction: column;
justify-content: center;
}

.linguaflow-audio-label {
font-size: 11px;
color: var(--text-muted);
margin-bottom: 8px;
display: flex;
align-items: center;
gap: 4px;
}

.linguaflow-audio-player-simple {
display: flex;
align-items: center;
gap: 10px;
}

.linguaflow-audio-play-btn {
background: var(--interactive-accent);
color: var(--text-on-accent);
border: none;
width: 32px;
height: 32px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.2s;
flex-shrink: 0;
padding: 0;
}

.linguaflow-audio-play-btn svg {
width: 14px;
height: 14px;
fill: currentColor;
}

.linguaflow-audio-play-btn:hover {
transform: scale(1.1);
background: var(--interactive-accent-hover);
box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb), 0.3);
}

.linguaflow-audio-time {
font-size: 12px;
font-family: monospace;
color: var(--text-normal);
font-weight: 500;
}

/* 次要按钮样式 */
.linguaflow-modal-btn-secondary {
background: var(--background-modifier-border);
color: var(--text-normal);
border: 1px solid transparent;
padding: 9px 20px;
border-radius: 8px;
font-size: 14px;
font-weight: 500;
cursor: pointer;
transition: all 0.2s;
}

.linguaflow-modal-btn-secondary:hover {
background: var(--background-modifier-hover);
border-color: var(--interactive-accent);
color: var(--text-normal);
}

/* ================================================================================
   移动端和平板优化样式
   多断点响应式设计，确保PC、手机、平板都能流畅操作
   ================================================================================ */

/* ====================
   通用移动端优化
   ==================== */

/* 触摸设备：增大点击区域 */
@media (hover: none) and (pointer: coarse) {
	.linguaflow-control-btn {
		min-height: 44px !important;
		min-width: 44px !important;
	}
	
	.linguaflow-subtitle-item {
		min-height: 48px !important;
		padding: 12px !important;
	}
	
	/* 增大单词点击区域 */
	.linguaflow-word {
		padding: 2px 1px;
		margin: 0 1px;
	}
}

/* ====================
   手机优化 (<768px)
   ==================== */
@media (max-width: 767px) {
	/* 1. 容器布局 */
	.linguaflow-container {
		flex-direction: column !important;
	}
	
	.linguaflow-main-content {
		flex-direction: column !important;
	}
	
	/* 强制底部布局 */
	.linguaflow-container.linguaflow-layout-right {
		flex-direction: column !important;
	}
	
	.linguaflow-container.linguaflow-layout-right .linguaflow-player-wrapper-section,
	.linguaflow-container.linguaflow-layout-right .linguaflow-subtitle-section {
		width: 100% !important;
		flex: none !important;
	}
	
	/* 2. 播放器高度 */
	.linguaflow-player-wrapper-section {
		height: 40vh !important;
		min-height: 200px !important;
		max-height: 300px !important;
	}
	
	/* 关键修复：强制视频区域自适应，防止挤出控制栏 */
	.linguaflow-player-section {
		height: auto !important;
		flex: 1 !important;
		min-height: 0 !important;
	}

	.simple-player-container {
		height: 100% !important;
	}
	
	/* 3. 控制栏按钮 */
	.linguaflow-control-btn {
		width: 40px !important;
		height: 40px !important;
		min-width: 40px !important;
		min-height: 40px !important;
		border-radius: 8px !important;
	}
	
	.linguaflow-control-icon svg {
		width: 16px !important;
		height: 16px !important;
	}
	
	/* 播放/暂停按钮略大 */
	.linguaflow-control-btn-playpause {
		width: 48px !important;
		height: 48px !important;
	}
	
	.linguaflow-control-btn-playpause .linguaflow-control-icon svg {
		width: 20px !important;
		height: 20px !important;
	}
	
	/* 4. 控制栏间距 */
	.linguaflow-subtitle-controls {
		padding: 8px 12px !important;
		gap: 8px !important;
	}
	
	.linguaflow-controls-group {
		gap: 4px !important;
		margin: 0 4px !important;
	}
	
	/* 5. 字幕样式 */
	.linguaflow-subtitle-item {
		padding: 10px !important;
		font-size: 14px !important;
		line-height: 1.5 !important;
	}
	
	.linguaflow-subtitle-time,
	.linguaflow-subtitle-index {
		font-size: 11px !important;
	}
	
	.linguaflow-word {
		font-size: 14px !important;
	}
	
	/* 6. 字幕列表滚动 */
	.linguaflow-subtitle-section {
		height: auto !important;
		max-height: 50vh !important;
		flex: 1 1 auto !important;
	}
	
	/* 7. 模态框 */
	.linguaflow-modal-content {
		width: 95% !important;
		max-width: 95% !important;
		max-height: 85vh !important;
		border-radius: 12px !important;
	}
	
	.linguaflow-modal-header h2 {
		font-size: 18px !important;
	}
	
	.linguaflow-modal-body {
		padding: 16px !important;
	}
	
	/* 8. 设置面板 */
	.linguaflow-settings {
		padding: 12px !important;
	}
	
	.linguaflow-settings-section {
		padding: 12px !important;
		margin-bottom: 12px !important;
	}
	
	.linguaflow-settings-header h1 {
		font-size: 20px !important;
	}
	
	/* 9. 录音面板 */
	.linguaflow-recording-panel {
		width: 90% !important;
		max-width: 90% !important;
	}
	
	/* 10. 隐藏次要信息 */
	.linguaflow-status-locked {
		display: none !important;
	}
	
	/* 11. 进度条增大 */
	.linguaflow-progress-bar {
		height: 6px !important;
	}
	
	.linguaflow-progress-handle {
		width: 16px !important;
		height: 16px !important;
	}
	
	/* 12. 音量控制简化 */
	.linguaflow-volume-control {
		display: none !important;
	}
}

/* ====================
   平板优化 (768px - 1023px)
   ==================== */
@media (min-width: 768px) and (max-width: 1023px) {
	/* 1. 容器适配 */
	.linguaflow-player-wrapper-section {
		height: 50vh !important;
		min-height: 300px !important;
	}
	
	/* 关键修复：平板端也强制视频区域自适应 */
	.linguaflow-player-section {
		height: auto !important;
		flex: 1 !important;
		min-height: 0 !important;
	}
	
	/* 2. 控制栏按钮 */
	.linguaflow-control-btn {
		width: 44px !important;
		height: 44px !important;
		min-width: 44px !important;
		min-height: 44px !important;
	}
	
	.linguaflow-control-icon svg {
		width: 18px !important;
		height: 18px !important;
	}
	
	/* 3. 字幕 */
	.linguaflow-subtitle-item {
		padding: 11px !important;
		font-size: 15px !important;
	}
	
	.linguaflow-word {
		font-size: 15px !important;
	}
	
	/* 4. 右侧布局优化 */
	.linguaflow-container.linguaflow-layout-right .linguaflow-subtitle-section {
		min-width: 300px !important;
		max-width: 400px !important;
	}
	
	/* 5. 模态框 */
	.linguaflow-modal-content {
		width: 85% !important;
		max-width: 600px !important;
	}
}

/* ====================
   横屏手机优化
   ==================== */
@media (max-width: 767px) and (orientation: landscape) {
	/* 横屏时播放器占满更多空间 */
	.linguaflow-player-wrapper-section {
		height: 60vh !important;
		max-height: none !important;
	}
	
	.linguaflow-player-section {
		height: auto !important;
		flex: 1 !important;
		min-height: 0 !important;
	}
	
	/* 字幕区域压缩 */
	.linguaflow-subtitle-section {
		max-height: 35vh !important;
	}
	
	/* 控制栏更紧凑 */
	.linguaflow-subtitle-controls {
		padding: 6px 10px !important;
	}
	
	.linguaflow-controls-group {
		gap: 3px !important;
		margin: 0 3px !important;
	}
	
	.linguaflow-control-btn {
		width: 36px !important;
		height: 36px !important;
		min-width: 36px !important;
		min-height: 36px !important;
	}
}

/* ====================
   小屏幕平板横屏
   ==================== */
@media (min-width: 768px) and (max-width: 1023px) and (orientation: landscape) {
	.linguaflow-container.linguaflow-layout-right {
		/* 横屏平板适合右侧布局 */
		flex-direction: row !important;
	}
	
	.linguaflow-player-wrapper-section {
		height: 100% !important;
	}
}

/* ====================
   触摸优化：去除hover效果
   ==================== */
@media (hover: none) {
	.linguaflow-control-btn:hover {
		transform: none !important;
		background: transparent !important;
	}
	
	.linguaflow-control-btn:active {
		transform: scale(0.95) !important;
		background: rgba(255, 255, 255, 0.1) !important;
	}
	
	.linguaflow-subtitle-item:hover {
		background: inherit !important;
	}
	
	.linguaflow-subtitle-item:active {
		background: rgba(var(--interactive-accent-rgb), 0.15) !important;
	}
	
	.linguaflow-word:hover {
		background: inherit !important;
	}
	
	.linguaflow-word:active {
		background: rgba(var(--interactive-accent-rgb), 0.2) !important;
	}
}

/* ====================
   性能优化：减少动画
   ==================== */
@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
	
	.linguaflow-waveform-canvas,
	.linguaflow-visualizer {
		display: none !important;
	}
}

/* ====================
   黑暗模式移动端优化
   ==================== */
@media (max-width: 767px) {
	.theme-dark .linguaflow-control-btn {
		background: rgba(255, 255, 255, 0.05) !important;
	}
	
	.theme-dark .linguaflow-control-btn:active {
		background: rgba(255, 255, 255, 0.15) !important;
	}
	
	.theme-dark .linguaflow-subtitle-item {
		background: rgba(0, 0, 0, 0.3) !important;
	}
}

/* ====================
   PWA/全屏模式优化
   ==================== */
@media (display-mode: fullscreen), (display-mode: standalone) {
	.linguaflow-container {
		height: 100vh !important;
	}
	
	/* 安全区域适配（刘海屏） */
	.linguaflow-subtitle-controls {
		padding-left: max(12px, env(safe-area-inset-left)) !important;
		padding-right: max(12px, env(safe-area-inset-right)) !important;
		padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
	}
}

/* ====================
   可访问性优化
   ==================== */
@media (min-width: 320px) {
	/* 最小字体确保可读性 */
	.linguaflow-word,
	.linguaflow-subtitle-text {
		font-size: max(14px, 1rem) !important;
	}
	
	/* 最小点击区域 */
	.linguaflow-control-btn,
	button {
		min-height: 44px;
		min-width: 44px;
	}
}

/* ====================
   超小屏幕设备 (<360px)
   ==================== */
@media (max-width: 359px) {
	.linguaflow-controls-group {
		gap: 2px !important;
		margin: 0 2px !important;
	}
	
	.linguaflow-control-btn {
		width: 36px !important;
		height: 36px !important;
		min-width: 36px !important;
		min-height: 36px !important;
	}
	
	.linguaflow-control-btn-playpause {
		width: 42px !important;
		height: 42px !important;
	}
	
	.linguaflow-subtitle-item {
		font-size: 13px !important;
	}
}

/* ================================================================================
   多语言选择器样式
   ================================================================================ */

/* 完整语言选择器 */
.linguaflow-language-selector {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	background: var(--background-secondary);
	border-radius: 6px;
	margin: 8px 0;
}

.linguaflow-language-selector-label {
	font-size: 13px;
	font-weight: 500;
	color: var(--text-muted);
	white-space: nowrap;
}

.linguaflow-language-selector-buttons {
	display: flex;
	gap: 6px;
	flex-wrap: wrap;
}

.linguaflow-language-btn {
	padding: 4px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.2s;
	white-space: nowrap;
}

.linguaflow-language-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.linguaflow-language-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* 紧凑型语言选择器（控制栏） */
.linguaflow-compact-language-selector {
	display: flex;
	gap: 4px;
	align-items: center;
}

.linguaflow-lang-toggle {
	padding: 4px 8px;
	border-radius: 4px;
	border: 1px solid transparent;
	background: rgba(255, 255, 255, 0.05);
	color: var(--text-muted);
	font-size: 11px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s;
	min-width: 28px;
	text-align: center;
}

.linguaflow-lang-toggle:hover {
	background: rgba(255, 255, 255, 0.1);
	color: var(--text-normal);
}

.linguaflow-lang-toggle.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* 下拉式语言选择器 */
.linguaflow-dropdown-language-selector {
	display: flex;
	align-items: center;
	gap: 8px;
}

.linguaflow-dropdown-language-selector label {
	font-size: 13px;
	color: var(--text-normal);
	white-space: nowrap;
}

.linguaflow-language-dropdown {
	padding: 4px 8px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	min-width: 120px;
}

.linguaflow-language-dropdown:hover {
	border-color: var(--interactive-accent);
}

/* 多语言字幕显示 */
.linguaflow-subtitle-language {
	margin: 4px 0;
}

.linguaflow-subtitle-language-label {
	display: inline-block;
	font-size: 10px;
	color: var(--text-muted);
	background: var(--background-secondary);
	padding: 2px 6px;
	border-radius: 3px;
	margin-right: 6px;
	vertical-align: middle;
}

.linguaflow-subtitle-language-text {
	line-height: 1.6;
	white-space: pre-wrap;
}

/* RTL语言支持 */
.linguaflow-subtitle-language.rtl {
	direction: rtl;
	text-align: right;
}

/* 移动端语言选择器优化 */
@media (max-width: 767px) {
	.linguaflow-language-selector {
		flex-direction: column;
		align-items: flex-start;
	}
	
	.linguaflow-language-selector-buttons {
		width: 100%;
	}
	
	.linguaflow-language-btn {
		flex: 1;
		min-width: 60px;
	}
	
	.linguaflow-lang-toggle {
		padding: 6px 10px;
		font-size: 12px;
	}
}

/* ===== Audio Player Mode ===== */

.linguaflow-player-section.linguaflow-audio-mode {
	background: var(--background-secondary);
	position: relative;
	justify-content: center;
	align-items: center;
	/* min-height 由内联样式控制 */
}

/* 隐藏音频模式下的 Video 元素，但保留其播放功能 */
.linguaflow-player-section.linguaflow-audio-mode .linguaflow-simple-player {
	position: absolute;
	width: 1px;
	height: 1px;
	opacity: 0;
	pointer-events: none;
	overflow: hidden;
	z-index: -1;
}

/* Audio Visualizer 容器 */
.linguaflow-audio-visualizer {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	padding: 16px;
	gap: 16px;
}

.linguaflow-audio-info {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 8px;
	z-index: 2;
}

.linguaflow-audio-icon {
	font-size: 32px;
	opacity: 0.8;
	width: 64px;
	height: 64px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--background-primary);
	border-radius: 50%;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.linguaflow-audio-title {
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
	text-align: center;
	max-width: 80%;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

/* Waveform canvas */
.linguaflow-audio-waveform {
	width: 100%;
	height: 60px;
	z-index: 1;
}

