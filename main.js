/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Tp=Object.create;var Oo=Object.defineProperty;var Rp=Object.getOwnPropertyDescriptor;var Pp=Object.getOwnPropertyNames;var Mp=Object.getPrototypeOf,Ap=Object.prototype.hasOwnProperty;var Fr=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ot=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ts=(e,t)=>{for(var n in t)Oo(e,n,{get:t[n],enumerable:!0})},cu=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pp(t))!Ap.call(e,o)&&o!==n&&Oo(e,o,{get:()=>t[o],enumerable:!(r=Rp(t,o))||r.enumerable});return e};var H=(e,t,n)=>(n=e!=null?Tp(Mp(e)):{},cu(t||!e||!e.__esModule?Oo(n,"default",{value:e,enumerable:!0}):n,e)),De=e=>cu(Oo({},"__esModule",{value:!0}),e);var ku=Ot(G=>{"use strict";var _r=Symbol.for("react.element"),Np=Symbol.for("react.portal"),Ip=Symbol.for("react.fragment"),Fp=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),zp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Op=Symbol.for("react.forward_ref"),Wp=Symbol.for("react.suspense"),Bp=Symbol.for("react.memo"),Vp=Symbol.for("react.lazy"),du=Symbol.iterator;function $p(e){return e===null||typeof e!="object"?null:(e=du&&e[du]||e["@@iterator"],typeof e=="function"?e:null)}var gu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hu=Object.assign,mu={};function Zn(e,t,n){this.props=e,this.context=t,this.refs=mu,this.updater=n||gu}Zn.prototype.isReactComponent={};Zn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vu(){}vu.prototype=Zn.prototype;function Ps(e,t,n){this.props=e,this.context=t,this.refs=mu,this.updater=n||gu}var Ms=Ps.prototype=new vu;Ms.constructor=Ps;hu(Ms,Zn.prototype);Ms.isPureReactComponent=!0;var fu=Array.isArray,yu=Object.prototype.hasOwnProperty,As={current:null},wu={key:!0,ref:!0,__self:!0,__source:!0};function Su(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)yu.call(t,r)&&!wu.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:_r,type:e,key:i,ref:s,props:o,_owner:As.current}}function Up(e,t){return{$$typeof:_r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ns(e){return typeof e=="object"&&e!==null&&e.$$typeof===_r}function Hp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pu=/\/+/g;function Rs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hp(""+e.key):t.toString(36)}function Bo(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case _r:case Np:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+Rs(s,0):r,fu(o)?(n="",e!=null&&(n=e.replace(pu,"$&/")+"/"),Bo(o,t,n,"",function(u){return u})):o!=null&&(Ns(o)&&(o=Up(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(pu,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",fu(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+Rs(i,l);s+=Bo(i,t,n,a,o)}else if(a=$p(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+Rs(i,l++),s+=Bo(i,t,n,a,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Wo(e,t,n){if(e==null)return e;var r=[],o=0;return Bo(e,r,"","",function(i){return t.call(n,i,o++)}),r}function jp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qe={current:null},Vo={transition:null},Kp={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Vo,ReactCurrentOwner:As};function bu(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Wo,forEach:function(e,t,n){Wo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wo(e,function(){t++}),t},toArray:function(e){return Wo(e,function(t){return t})||[]},only:function(e){if(!Ns(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Zn;G.Fragment=Ip;G.Profiler=_p;G.PureComponent=Ps;G.StrictMode=Fp;G.Suspense=Wp;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;G.act=bu;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hu({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=As.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)yu.call(t,a)&&!wu.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:_r,type:e.type,key:o,ref:i,props:r,_owner:s}};G.createContext=function(e){return e={$$typeof:Dp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zp,_context:e},e.Consumer=e};G.createElement=Su;G.createFactory=function(e){var t=Su.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Op,render:e}};G.isValidElement=Ns;G.lazy=function(e){return{$$typeof:Vp,_payload:{_status:-1,_result:e},_init:jp}};G.memo=function(e,t){return{$$typeof:Bp,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=Vo.transition;Vo.transition={};try{e()}finally{Vo.transition=t}};G.unstable_act=bu;G.useCallback=function(e,t){return Qe.current.useCallback(e,t)};G.useContext=function(e){return Qe.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Qe.current.useDeferredValue(e)};G.useEffect=function(e,t){return Qe.current.useEffect(e,t)};G.useId=function(){return Qe.current.useId()};G.useImperativeHandle=function(e,t,n){return Qe.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Qe.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Qe.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Qe.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Qe.current.useReducer(e,t,n)};G.useRef=function(e){return Qe.current.useRef(e)};G.useState=function(e){return Qe.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Qe.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Qe.current.useTransition()};G.version="18.3.1"});var Re=Ot((xm,xu)=>{"use strict";xu.exports=ku()});var Iu=Ot(ae=>{"use strict";function zs(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(0<$o(o,t))e[r]=t,e[n]=o,n=r;else break e}}function Tt(e){return e.length===0?null:e[0]}function Ho(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],a=s+1,u=e[a];if(0>$o(l,n))a<o&&0>$o(u,l)?(e[r]=u,e[a]=n,r=a):(e[r]=l,e[s]=n,r=s);else if(a<o&&0>$o(u,n))e[r]=u,e[a]=n,r=a;else break e}}return t}function $o(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(Eu=performance,ae.unstable_now=function(){return Eu.now()}):(Is=Date,Cu=Is.now(),ae.unstable_now=function(){return Is.now()-Cu});var Eu,Is,Cu,Wt=[],un=[],Gp=1,vt=null,$e=3,jo=!1,Nn=!1,Dr=!1,Ru=typeof setTimeout=="function"?setTimeout:null,Pu=typeof clearTimeout=="function"?clearTimeout:null,Lu=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ds(e){for(var t=Tt(un);t!==null;){if(t.callback===null)Ho(un);else if(t.startTime<=e)Ho(un),t.sortIndex=t.expirationTime,zs(Wt,t);else break;t=Tt(un)}}function Os(e){if(Dr=!1,Ds(e),!Nn)if(Tt(Wt)!==null)Nn=!0,Bs(Ws);else{var t=Tt(un);t!==null&&Vs(Os,t.startTime-e)}}function Ws(e,t){Nn=!1,Dr&&(Dr=!1,Pu(Or),Or=-1),jo=!0;var n=$e;try{for(Ds(t),vt=Tt(Wt);vt!==null&&(!(vt.expirationTime>t)||e&&!Nu());){var r=vt.callback;if(typeof r=="function"){vt.callback=null,$e=vt.priorityLevel;var o=r(vt.expirationTime<=t);t=ae.unstable_now(),typeof o=="function"?vt.callback=o:vt===Tt(Wt)&&Ho(Wt),Ds(t)}else Ho(Wt);vt=Tt(Wt)}if(vt!==null)var i=!0;else{var s=Tt(un);s!==null&&Vs(Os,s.startTime-t),i=!1}return i}finally{vt=null,$e=n,jo=!1}}var Ko=!1,Uo=null,Or=-1,Mu=5,Au=-1;function Nu(){return!(ae.unstable_now()-Au<Mu)}function Fs(){if(Uo!==null){var e=ae.unstable_now();Au=e;var t=!0;try{t=Uo(!0,e)}finally{t?zr():(Ko=!1,Uo=null)}}else Ko=!1}var zr;typeof Lu=="function"?zr=function(){Lu(Fs)}:typeof MessageChannel<"u"?(_s=new MessageChannel,Tu=_s.port2,_s.port1.onmessage=Fs,zr=function(){Tu.postMessage(null)}):zr=function(){Ru(Fs,0)};var _s,Tu;function Bs(e){Uo=e,Ko||(Ko=!0,zr())}function Vs(e,t){Or=Ru(function(){e(ae.unstable_now())},t)}ae.unstable_IdlePriority=5;ae.unstable_ImmediatePriority=1;ae.unstable_LowPriority=4;ae.unstable_NormalPriority=3;ae.unstable_Profiling=null;ae.unstable_UserBlockingPriority=2;ae.unstable_cancelCallback=function(e){e.callback=null};ae.unstable_continueExecution=function(){Nn||jo||(Nn=!0,Bs(Ws))};ae.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Mu=0<e?Math.floor(1e3/e):5};ae.unstable_getCurrentPriorityLevel=function(){return $e};ae.unstable_getFirstCallbackNode=function(){return Tt(Wt)};ae.unstable_next=function(e){switch($e){case 1:case 2:case 3:var t=3;break;default:t=$e}var n=$e;$e=t;try{return e()}finally{$e=n}};ae.unstable_pauseExecution=function(){};ae.unstable_requestPaint=function(){};ae.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=$e;$e=e;try{return t()}finally{$e=n}};ae.unstable_scheduleCallback=function(e,t,n){var r=ae.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,e={id:Gp++,callback:t,priorityLevel:e,startTime:n,expirationTime:o,sortIndex:-1},n>r?(e.sortIndex=n,zs(un,e),Tt(Wt)===null&&e===Tt(un)&&(Dr?(Pu(Or),Or=-1):Dr=!0,Vs(Os,n-r))):(e.sortIndex=o,zs(Wt,e),Nn||jo||(Nn=!0,Bs(Ws))),e};ae.unstable_shouldYield=Nu;ae.unstable_wrapCallback=function(e){var t=$e;return function(){var n=$e;$e=t;try{return e.apply(this,arguments)}finally{$e=n}}}});var _u=Ot((Cm,Fu)=>{"use strict";Fu.exports=Iu()});var Bf=Ot(gt=>{"use strict";var Qp=Re(),ft=_u();function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $c=new Set,so={};function jn(e,t){wr(e,t),wr(e+"Capture",t)}function wr(e,t){for(so[e]=t,e=0;e<t.length;e++)$c.add(t[e])}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=Object.prototype.hasOwnProperty,qp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zu={},Du={};function Yp(e){return cl.call(Du,e)?!0:cl.call(zu,e)?!1:qp.test(e)?Du[e]=!0:(zu[e]=!0,!1)}function Xp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zp(e,t,n,r){if(t===null||typeof t>"u"||Xp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Be[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Be[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Be[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Be[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Be[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Be[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Be[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Be[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Be[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var na=/[\-:]([a-z])/g;function ra(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(na,ra);Be[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(na,ra);Be[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(na,ra);Be[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Be[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Be.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Be[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function oa(e,t,n,r){var o=Be.hasOwnProperty(t)?Be[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zp(t,n,o,r)&&(n=null),r||o===null?Yp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ln=Qp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Go=Symbol.for("react.element"),tr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),ia=Symbol.for("react.strict_mode"),dl=Symbol.for("react.profiler"),Uc=Symbol.for("react.provider"),Hc=Symbol.for("react.context"),sa=Symbol.for("react.forward_ref"),fl=Symbol.for("react.suspense"),pl=Symbol.for("react.suspense_list"),la=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),jc=Symbol.for("react.offscreen"),Ou=Symbol.iterator;function Wr(e){return e===null||typeof e!="object"?null:(e=Ou&&e[Ou]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,$s;function Gr(e){if($s===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$s=t&&t[1]||""}return`
`+$s+e}var Us=!1;function Hs(e,t){if(!e||Us)return"";Us=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var a=`
`+o[s].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=s&&0<=l);break}}}finally{Us=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gr(e):""}function Jp(e){switch(e.tag){case 5:return Gr(e.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 2:case 15:return e=Hs(e.type,!1),e;case 11:return e=Hs(e.type.render,!1),e;case 1:return e=Hs(e.type,!0),e;default:return""}}function gl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nr:return"Fragment";case tr:return"Portal";case dl:return"Profiler";case ia:return"StrictMode";case fl:return"Suspense";case pl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hc:return(e.displayName||"Context")+".Consumer";case Uc:return(e._context.displayName||"Context")+".Provider";case sa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case la:return t=e.displayName||null,t!==null?t:gl(e.type)||"Memo";case dn:t=e._payload,e=e._init;try{return gl(e(t))}catch{}}return null}function eg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gl(t);case 8:return t===ia?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tg(e){var t=Kc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){e._valueTracker||(e._valueTracker=tg(e))}function Gc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hl(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qc(e,t){t=t.checked,t!=null&&oa(e,"checked",t,!1)}function ml(e,t){Qc(e,t);var n=Cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vl(e,t.type,n):t.hasOwnProperty("defaultValue")&&vl(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vl(e,t,n){(t!=="number"||ki(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qr=Array.isArray;function pr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function yl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(Qr(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cn(n)}}function qc(e,t){var n=Cn(t.value),r=Cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $u(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qo,Xc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function lo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ng=["Webkit","ms","Moz","O"];Object.keys(Xr).forEach(function(e){ng.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xr[t]=Xr[e]})});function Zc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xr.hasOwnProperty(e)&&Xr[e]?(""+t).trim():t+"px"}function Jc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Zc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var rg=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sl(e,t){if(t){if(rg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function bl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=null;function aa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xl=null,gr=null,hr=null;function Uu(e){if(e=Lo(e)){if(typeof xl!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Yi(t),xl(e.stateNode,e.type,t))}}function ed(e){gr?hr?hr.push(e):hr=[e]:gr=e}function td(){if(gr){var e=gr,t=hr;if(hr=gr=null,Uu(e),t)for(e=0;e<t.length;e++)Uu(t[e])}}function nd(e,t){return e(t)}function rd(){}var js=!1;function od(e,t,n){if(js)return e(t,n);js=!0;try{return nd(e,t,n)}finally{js=!1,(gr!==null||hr!==null)&&(rd(),td())}}function ao(e,t){var n=e.stateNode;if(n===null)return null;var r=Yi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var El=!1;if(nn)try{Jn={},Object.defineProperty(Jn,"passive",{get:function(){El=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{El=!1}var Jn;function og(e,t,n,r,o,i,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Zr=!1,xi=null,Ei=!1,Cl=null,ig={onError:function(e){Zr=!0,xi=e}};function sg(e,t,n,r,o,i,s,l,a){Zr=!1,xi=null,og.apply(ig,arguments)}function lg(e,t,n,r,o,i,s,l,a){if(sg.apply(this,arguments),Zr){if(Zr){var u=xi;Zr=!1,xi=null}else throw Error(M(198));Ei||(Ei=!0,Cl=u)}}function Kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function id(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hu(e){if(Kn(e)!==e)throw Error(M(188))}function ag(e){var t=e.alternate;if(!t){if(t=Kn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Hu(o),e;if(i===r)return Hu(o),t;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function sd(e){return e=ag(e),e!==null?ld(e):null}function ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ld(e);if(t!==null)return t;e=e.sibling}return null}var ad=ft.unstable_scheduleCallback,ju=ft.unstable_cancelCallback,ug=ft.unstable_shouldYield,cg=ft.unstable_requestPaint,Ee=ft.unstable_now,dg=ft.unstable_getCurrentPriorityLevel,ua=ft.unstable_ImmediatePriority,ud=ft.unstable_UserBlockingPriority,Ci=ft.unstable_NormalPriority,fg=ft.unstable_LowPriority,cd=ft.unstable_IdlePriority,Ki=null,Ut=null;function pg(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Ki,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:mg,gg=Math.log,hg=Math.LN2;function mg(e){return e>>>=0,e===0?32:31-(gg(e)/hg|0)|0}var Yo=64,Xo=4194304;function qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Li(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=qr(l):(i&=s,i!==0&&(r=qr(i)))}else s=n&~o,s!==0?r=qr(s):i!==0&&(r=qr(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&o)===0&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),o=1<<n,r|=e[n],t&=~o;return r}function vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Nt(i),l=1<<s,a=o[s];a===-1?((l&n)===0||(l&r)!==0)&&(o[s]=vg(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function Ll(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dd(){var e=Yo;return Yo<<=1,(Yo&4194240)===0&&(Yo=64),e}function Ks(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function wg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Nt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function ca(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ie=0;function fd(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var pd,da,gd,hd,md,Tl=!1,Zo=[],vn=null,yn=null,wn=null,uo=new Map,co=new Map,pn=[],Sg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ku(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":uo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(t.pointerId)}}function Br(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Lo(t),t!==null&&da(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function bg(e,t,n,r,o){switch(t){case"focusin":return vn=Br(vn,e,t,n,r,o),!0;case"dragenter":return yn=Br(yn,e,t,n,r,o),!0;case"mouseover":return wn=Br(wn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return uo.set(i,Br(uo.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,co.set(i,Br(co.get(i)||null,e,t,n,r,o)),!0}return!1}function vd(e){var t=_n(e.target);if(t!==null){var n=Kn(t);if(n!==null){if(t=n.tag,t===13){if(t=id(n),t!==null){e.blockedOn=t,md(e.priority,function(){gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);kl=r,n.target.dispatchEvent(r),kl=null}else return t=Lo(n),t!==null&&da(t),e.blockedOn=n,!1;t.shift()}return!0}function Gu(e,t,n){fi(e)&&n.delete(t)}function kg(){Tl=!1,vn!==null&&fi(vn)&&(vn=null),yn!==null&&fi(yn)&&(yn=null),wn!==null&&fi(wn)&&(wn=null),uo.forEach(Gu),co.forEach(Gu)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,Tl||(Tl=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,kg)))}function fo(e){function t(o){return Vr(o,e)}if(0<Zo.length){Vr(Zo[0],e);for(var n=1;n<Zo.length;n++){var r=Zo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vn!==null&&Vr(vn,e),yn!==null&&Vr(yn,e),wn!==null&&Vr(wn,e),uo.forEach(t),co.forEach(t),n=0;n<pn.length;n++)r=pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<pn.length&&(n=pn[0],n.blockedOn===null);)vd(n),n.blockedOn===null&&pn.shift()}var mr=ln.ReactCurrentBatchConfig,Ti=!0;function xg(e,t,n,r){var o=ie,i=mr.transition;mr.transition=null;try{ie=1,fa(e,t,n,r)}finally{ie=o,mr.transition=i}}function Eg(e,t,n,r){var o=ie,i=mr.transition;mr.transition=null;try{ie=4,fa(e,t,n,r)}finally{ie=o,mr.transition=i}}function fa(e,t,n,r){if(Ti){var o=Rl(e,t,n,r);if(o===null)Js(e,t,r,Ri,n),Ku(e,r);else if(bg(o,e,t,n,r))r.stopPropagation();else if(Ku(e,r),t&4&&-1<Sg.indexOf(e)){for(;o!==null;){var i=Lo(o);if(i!==null&&pd(i),i=Rl(e,t,n,r),i===null&&Js(e,t,r,Ri,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Js(e,t,r,null,n)}}var Ri=null;function Rl(e,t,n,r){if(Ri=null,e=aa(r),e=_n(e),e!==null)if(t=Kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=id(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ri=e,null}function yd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dg()){case ua:return 1;case ud:return 4;case Ci:case fg:return 16;case cd:return 536870912;default:return 16}default:return 16}}var hn=null,pa=null,pi=null;function wd(){if(pi)return pi;var e,t=pa,n=t.length,r,o="value"in hn?hn.value:hn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return pi=o.slice(e,1<r?1-r:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function Qu(){return!1}function pt(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jo:Qu,this.isPropagationStopped=Qu,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=pt(Lr),Co=ye({},Lr,{view:0,detail:0}),Cg=pt(Co),Gs,Qs,$r,Gi=ye({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Gs=e.screenX-$r.screenX,Qs=e.screenY-$r.screenY):Qs=Gs=0,$r=e),Gs)},movementY:function(e){return"movementY"in e?e.movementY:Qs}}),qu=pt(Gi),Lg=ye({},Gi,{dataTransfer:0}),Tg=pt(Lg),Rg=ye({},Co,{relatedTarget:0}),qs=pt(Rg),Pg=ye({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Mg=pt(Pg),Ag=ye({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ng=pt(Ag),Ig=ye({},Lr,{data:0}),Yu=pt(Ig),Fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zg[e])?!!t[e]:!1}function ha(){return Dg}var Og=ye({},Co,{key:function(e){if(e.key){var t=Fg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wg=pt(Og),Bg=ye({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=pt(Bg),Vg=ye({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),$g=pt(Vg),Ug=ye({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hg=pt(Ug),jg=ye({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=pt(jg),Gg=[9,13,27,32],ma=nn&&"CompositionEvent"in window,Jr=null;nn&&"documentMode"in document&&(Jr=document.documentMode);var Qg=nn&&"TextEvent"in window&&!Jr,Sd=nn&&(!ma||Jr&&8<Jr&&11>=Jr),Zu=" ",Ju=!1;function bd(e,t){switch(e){case"keyup":return Gg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rr=!1;function qg(e,t){switch(e){case"compositionend":return kd(t);case"keypress":return t.which!==32?null:(Ju=!0,Zu);case"textInput":return e=t.data,e===Zu&&Ju?null:e;default:return null}}function Yg(e,t){if(rr)return e==="compositionend"||!ma&&bd(e,t)?(e=wd(),pi=pa=hn=null,rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sd&&t.locale!=="ko"?null:t.data;default:return null}}var Xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xg[e.type]:t==="textarea"}function xd(e,t,n,r){ed(r),t=Pi(t,"onChange"),0<t.length&&(n=new ga("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var eo=null,po=null;function Zg(e){Fd(e,0)}function Qi(e){var t=sr(e);if(Gc(t))return e}function Jg(e,t){if(e==="change")return t}var Ed=!1;nn&&(nn?(ti="oninput"in document,ti||(Ys=document.createElement("div"),Ys.setAttribute("oninput","return;"),ti=typeof Ys.oninput=="function"),ei=ti):ei=!1,Ed=ei&&(!document.documentMode||9<document.documentMode));var ei,ti,Ys;function tc(){eo&&(eo.detachEvent("onpropertychange",Cd),po=eo=null)}function Cd(e){if(e.propertyName==="value"&&Qi(po)){var t=[];xd(t,po,e,aa(e)),od(Zg,t)}}function eh(e,t,n){e==="focusin"?(tc(),eo=t,po=n,eo.attachEvent("onpropertychange",Cd)):e==="focusout"&&tc()}function th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qi(po)}function nh(e,t){if(e==="click")return Qi(t)}function rh(e,t){if(e==="input"||e==="change")return Qi(t)}function oh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:oh;function go(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!cl.call(t,o)||!Ft(e[o],t[o]))return!1}return!0}function nc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rc(e,t){var n=nc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nc(n)}}function Ld(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ld(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Td(){for(var e=window,t=ki();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ki(e.document)}return t}function va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ih(e){var t=Td(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ld(n.ownerDocument.documentElement,n)){if(r!==null&&va(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=rc(n,i);var s=rc(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sh=nn&&"documentMode"in document&&11>=document.documentMode,or=null,Pl=null,to=null,Ml=!1;function oc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ml||or==null||or!==ki(r)||(r=or,"selectionStart"in r&&va(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),to&&go(to,r)||(to=r,r=Pi(Pl,"onSelect"),0<r.length&&(t=new ga("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ir={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Xs={},Rd={};nn&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function qi(e){if(Xs[e])return Xs[e];if(!ir[e])return e;var t=ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rd)return Xs[e]=t[n];return e}var Pd=qi("animationend"),Md=qi("animationiteration"),Ad=qi("animationstart"),Nd=qi("transitionend"),Id=new Map,ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){Id.set(e,t),jn(t,[e])}for(ri=0;ri<ic.length;ri++)oi=ic[ri],sc=oi.toLowerCase(),lc=oi[0].toUpperCase()+oi.slice(1),Tn(sc,"on"+lc);var oi,sc,lc,ri;Tn(Pd,"onAnimationEnd");Tn(Md,"onAnimationIteration");Tn(Ad,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(Nd,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function ac(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lg(r,t,void 0,e),e.currentTarget=null}function Fd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&o.isPropagationStopped())break e;ac(o,l,u),i=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&o.isPropagationStopped())break e;ac(o,l,u),i=a}}}if(Ei)throw e=Cl,Ei=!1,Cl=null,e}function pe(e,t){var n=t[_l];n===void 0&&(n=t[_l]=new Set);var r=e+"__bubble";n.has(r)||(_d(t,e,2,!1),n.add(r))}function Zs(e,t,n){var r=0;t&&(r|=4),_d(n,e,r,t)}var ii="_reactListening"+Math.random().toString(36).slice(2);function ho(e){if(!e[ii]){e[ii]=!0,$c.forEach(function(n){n!=="selectionchange"&&(lh.has(n)||Zs(n,!1,e),Zs(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ii]||(t[ii]=!0,Zs("selectionchange",!1,t))}}function _d(e,t,n,r){switch(yd(t)){case 1:var o=xg;break;case 4:o=Eg;break;default:o=fa}n=o.bind(null,t,n,e),o=void 0,!El||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Js(e,t,n,r,o){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;s=s.return}for(;l!==null;){if(s=_n(l),s===null)return;if(a=s.tag,a===5||a===6){r=i=s;continue e}l=l.parentNode}}r=r.return}od(function(){var u=i,d=aa(n),g=[];e:{var h=Id.get(e);if(h!==void 0){var y=ga,v=e;switch(e){case"keypress":if(gi(n)===0)break e;case"keydown":case"keyup":y=Wg;break;case"focusin":v="focus",y=qs;break;case"focusout":v="blur",y=qs;break;case"beforeblur":case"afterblur":y=qs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Tg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=$g;break;case Pd:case Md:case Ad:y=Mg;break;case Nd:y=Hg;break;case"scroll":y=Cg;break;case"wheel":y=Kg;break;case"copy":case"cut":case"paste":y=Ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xu}var S=(t&4)!==0,L=!S&&e==="scroll",p=S?h!==null?h+"Capture":null:h;S=[];for(var c=u,f;c!==null;){f=c;var m=f.stateNode;if(f.tag===5&&m!==null&&(f=m,p!==null&&(m=ao(c,p),m!=null&&S.push(mo(c,m,f)))),L)break;c=c.return}0<S.length&&(h=new y(h,v,null,n,d),g.push({event:h,listeners:S}))}}if((t&7)===0){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==kl&&(v=n.relatedTarget||n.fromElement)&&(_n(v)||v[rn]))break e;if((y||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?_n(v):null,v!==null&&(L=Kn(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(S=qu,m="onMouseLeave",p="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(S=Xu,m="onPointerLeave",p="onPointerEnter",c="pointer"),L=y==null?h:sr(y),f=v==null?h:sr(v),h=new S(m,c+"leave",y,n,d),h.target=L,h.relatedTarget=f,m=null,_n(d)===u&&(S=new S(p,c+"enter",v,n,d),S.target=f,S.relatedTarget=L,m=S),L=m,y&&v)t:{for(S=y,p=v,c=0,f=S;f;f=er(f))c++;for(f=0,m=p;m;m=er(m))f++;for(;0<c-f;)S=er(S),c--;for(;0<f-c;)p=er(p),f--;for(;c--;){if(S===p||p!==null&&S===p.alternate)break t;S=er(S),p=er(p)}S=null}else S=null;y!==null&&uc(g,h,y,S,!1),v!==null&&L!==null&&uc(g,L,v,S,!0)}}e:{if(h=u?sr(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var w=Jg;else if(ec(h))if(Ed)w=rh;else{w=th;var E=eh}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=nh);if(w&&(w=w(e,u))){xd(g,w,n,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&vl(h,"number",h.value)}switch(E=u?sr(u):window,e){case"focusin":(ec(E)||E.contentEditable==="true")&&(or=E,Pl=u,to=null);break;case"focusout":to=Pl=or=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,oc(g,n,d);break;case"selectionchange":if(sh)break;case"keydown":case"keyup":oc(g,n,d)}var T;if(ma)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else rr?bd(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Sd&&n.locale!=="ko"&&(rr||N!=="onCompositionStart"?N==="onCompositionEnd"&&rr&&(T=wd()):(hn=d,pa="value"in hn?hn.value:hn.textContent,rr=!0)),E=Pi(u,N),0<E.length&&(N=new Yu(N,e,null,n,d),g.push({event:N,listeners:E}),T?N.data=T:(T=kd(n),T!==null&&(N.data=T)))),(T=Qg?qg(e,n):Yg(e,n))&&(u=Pi(u,"onBeforeInput"),0<u.length&&(d=new Yu("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:u}),d.data=T))}Fd(g,t)})}function mo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pi(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ao(e,n),i!=null&&r.unshift(mo(e,i,o)),i=ao(e,t),i!=null&&r.push(mo(e,i,o))),e=e.return}return r}function er(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uc(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,o?(a=ao(n,i),a!=null&&s.unshift(mo(n,a,l))):o||(a=ao(n,i),a!=null&&s.push(mo(n,a,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ah=/\r\n?/g,uh=/\u0000|\uFFFD/g;function cc(e){return(typeof e=="string"?e:""+e).replace(ah,`
`).replace(uh,"")}function si(e,t,n){if(t=cc(t),cc(e)!==t&&n)throw Error(M(425))}function Mi(){}var Al=null,Nl=null;function Il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fl=typeof setTimeout=="function"?setTimeout:void 0,ch=typeof clearTimeout=="function"?clearTimeout:void 0,dc=typeof Promise=="function"?Promise:void 0,dh=typeof queueMicrotask=="function"?queueMicrotask:typeof dc<"u"?function(e){return dc.resolve(null).then(e).catch(fh)}:Fl;function fh(e){setTimeout(function(){throw e})}function el(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),fo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);fo(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),$t="__reactFiber$"+Tr,vo="__reactProps$"+Tr,rn="__reactContainer$"+Tr,_l="__reactEvents$"+Tr,ph="__reactListeners$"+Tr,gh="__reactHandles$"+Tr;function _n(e){var t=e[$t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rn]||n[$t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fc(e);e!==null;){if(n=e[$t])return n;e=fc(e)}return t}e=n,n=e.parentNode}return null}function Lo(e){return e=e[$t]||e[rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Yi(e){return e[vo]||null}var zl=[],lr=-1;function Rn(e){return{current:e}}function ge(e){0>lr||(e.current=zl[lr],zl[lr]=null,lr--)}function ue(e,t){lr++,zl[lr]=e.current,e.current=t}var Ln={},Ke=Rn(Ln),nt=Rn(!1),Bn=Ln;function Sr(e,t){var n=e.type.contextTypes;if(!n)return Ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function Ai(){ge(nt),ge(Ke)}function pc(e,t,n){if(Ke.current!==Ln)throw Error(M(168));ue(Ke,t),ue(nt,n)}function zd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(M(108,eg(e)||"Unknown",o));return ye({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,Bn=Ke.current,ue(Ke,e),ue(nt,nt.current),!0}function gc(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=zd(e,t,Bn),r.__reactInternalMemoizedMergedChildContext=e,ge(nt),ge(Ke),ue(Ke,e)):ge(nt),ue(nt,n)}var Zt=null,Xi=!1,tl=!1;function Dd(e){Zt===null?Zt=[e]:Zt.push(e)}function hh(e){Xi=!0,Dd(e)}function Pn(){if(!tl&&Zt!==null){tl=!0;var e=0,t=ie;try{var n=Zt;for(ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zt=null,Xi=!1}catch(o){throw Zt!==null&&(Zt=Zt.slice(e+1)),ad(ua,Pn),o}finally{ie=t,tl=!1}}return null}var ar=[],ur=0,Ii=null,Fi=0,yt=[],wt=0,Vn=null,Jt=1,en="";function In(e,t){ar[ur++]=Fi,ar[ur++]=Ii,Ii=e,Fi=t}function Od(e,t,n){yt[wt++]=Jt,yt[wt++]=en,yt[wt++]=Vn,Vn=e;var r=Jt;e=en;var o=32-Nt(r)-1;r&=~(1<<o),n+=1;var i=32-Nt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Jt=1<<32-Nt(t)+o|n<<o|r,en=i+e}else Jt=1<<i|n<<o|r,en=e}function ya(e){e.return!==null&&(In(e,1),Od(e,1,0))}function wa(e){for(;e===Ii;)Ii=ar[--ur],ar[ur]=null,Fi=ar[--ur],ar[ur]=null;for(;e===Vn;)Vn=yt[--wt],yt[wt]=null,en=yt[--wt],yt[wt]=null,Jt=yt[--wt],yt[wt]=null}var dt=null,ct=null,he=!1,At=null;function Wd(e,t){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ct=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Jt,overflow:en}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,ct=null,!0):!1;default:return!1}}function Dl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ol(e){if(he){var t=ct;if(t){var n=t;if(!hc(e,t)){if(Dl(e))throw Error(M(418));t=Sn(n.nextSibling);var r=dt;t&&hc(e,t)?Wd(r,n):(e.flags=e.flags&-4097|2,he=!1,dt=e)}}else{if(Dl(e))throw Error(M(418));e.flags=e.flags&-4097|2,he=!1,dt=e}}}function mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function li(e){if(e!==dt)return!1;if(!he)return mc(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Il(e.type,e.memoizedProps)),t&&(t=ct)){if(Dl(e))throw Bd(),Error(M(418));for(;t;)Wd(e,t),t=Sn(t.nextSibling)}if(mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ct=Sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=dt?Sn(e.stateNode.nextSibling):null;return!0}function Bd(){for(var e=ct;e;)e=Sn(e.nextSibling)}function br(){ct=dt=null,he=!1}function Sa(e){At===null?At=[e]:At.push(e)}var mh=ln.ReactCurrentBatchConfig;function Ur(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vc(e){var t=e._init;return t(e._payload)}function Vd(e){function t(p,c){if(e){var f=p.deletions;f===null?(p.deletions=[c],p.flags|=16):f.push(c)}}function n(p,c){if(!e)return null;for(;c!==null;)t(p,c),c=c.sibling;return null}function r(p,c){for(p=new Map;c!==null;)c.key!==null?p.set(c.key,c):p.set(c.index,c),c=c.sibling;return p}function o(p,c){return p=En(p,c),p.index=0,p.sibling=null,p}function i(p,c,f){return p.index=f,e?(f=p.alternate,f!==null?(f=f.index,f<c?(p.flags|=2,c):f):(p.flags|=2,c)):(p.flags|=1048576,c)}function s(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,c,f,m){return c===null||c.tag!==6?(c=al(f,p.mode,m),c.return=p,c):(c=o(c,f),c.return=p,c)}function a(p,c,f,m){var w=f.type;return w===nr?d(p,c,f.props.children,m,f.key):c!==null&&(c.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===dn&&vc(w)===c.type)?(m=o(c,f.props),m.ref=Ur(p,c,f),m.return=p,m):(m=bi(f.type,f.key,f.props,null,p.mode,m),m.ref=Ur(p,c,f),m.return=p,m)}function u(p,c,f,m){return c===null||c.tag!==4||c.stateNode.containerInfo!==f.containerInfo||c.stateNode.implementation!==f.implementation?(c=ul(f,p.mode,m),c.return=p,c):(c=o(c,f.children||[]),c.return=p,c)}function d(p,c,f,m,w){return c===null||c.tag!==7?(c=Wn(f,p.mode,m,w),c.return=p,c):(c=o(c,f),c.return=p,c)}function g(p,c,f){if(typeof c=="string"&&c!==""||typeof c=="number")return c=al(""+c,p.mode,f),c.return=p,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Go:return f=bi(c.type,c.key,c.props,null,p.mode,f),f.ref=Ur(p,null,c),f.return=p,f;case tr:return c=ul(c,p.mode,f),c.return=p,c;case dn:var m=c._init;return g(p,m(c._payload),f)}if(Qr(c)||Wr(c))return c=Wn(c,p.mode,f,null),c.return=p,c;ai(p,c)}return null}function h(p,c,f,m){var w=c!==null?c.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return w!==null?null:l(p,c,""+f,m);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Go:return f.key===w?a(p,c,f,m):null;case tr:return f.key===w?u(p,c,f,m):null;case dn:return w=f._init,h(p,c,w(f._payload),m)}if(Qr(f)||Wr(f))return w!==null?null:d(p,c,f,m,null);ai(p,f)}return null}function y(p,c,f,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return p=p.get(f)||null,l(c,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Go:return p=p.get(m.key===null?f:m.key)||null,a(c,p,m,w);case tr:return p=p.get(m.key===null?f:m.key)||null,u(c,p,m,w);case dn:var E=m._init;return y(p,c,f,E(m._payload),w)}if(Qr(m)||Wr(m))return p=p.get(f)||null,d(c,p,m,w,null);ai(c,m)}return null}function v(p,c,f,m){for(var w=null,E=null,T=c,N=c=0,O=null;T!==null&&N<f.length;N++){T.index>N?(O=T,T=null):O=T.sibling;var R=h(p,T,f[N],m);if(R===null){T===null&&(T=O);break}e&&T&&R.alternate===null&&t(p,T),c=i(R,c,N),E===null?w=R:E.sibling=R,E=R,T=O}if(N===f.length)return n(p,T),he&&In(p,N),w;if(T===null){for(;N<f.length;N++)T=g(p,f[N],m),T!==null&&(c=i(T,c,N),E===null?w=T:E.sibling=T,E=T);return he&&In(p,N),w}for(T=r(p,T);N<f.length;N++)O=y(T,p,N,f[N],m),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?N:O.key),c=i(O,c,N),E===null?w=O:E.sibling=O,E=O);return e&&T.forEach(function(W){return t(p,W)}),he&&In(p,N),w}function S(p,c,f,m){var w=Wr(f);if(typeof w!="function")throw Error(M(150));if(f=w.call(f),f==null)throw Error(M(151));for(var E=w=null,T=c,N=c=0,O=null,R=f.next();T!==null&&!R.done;N++,R=f.next()){T.index>N?(O=T,T=null):O=T.sibling;var W=h(p,T,R.value,m);if(W===null){T===null&&(T=O);break}e&&T&&W.alternate===null&&t(p,T),c=i(W,c,N),E===null?w=W:E.sibling=W,E=W,T=O}if(R.done)return n(p,T),he&&In(p,N),w;if(T===null){for(;!R.done;N++,R=f.next())R=g(p,R.value,m),R!==null&&(c=i(R,c,N),E===null?w=R:E.sibling=R,E=R);return he&&In(p,N),w}for(T=r(p,T);!R.done;N++,R=f.next())R=y(T,p,N,R.value,m),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?N:R.key),c=i(R,c,N),E===null?w=R:E.sibling=R,E=R);return e&&T.forEach(function(U){return t(p,U)}),he&&In(p,N),w}function L(p,c,f,m){if(typeof f=="object"&&f!==null&&f.type===nr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Go:e:{for(var w=f.key,E=c;E!==null;){if(E.key===w){if(w=f.type,w===nr){if(E.tag===7){n(p,E.sibling),c=o(E,f.props.children),c.return=p,p=c;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===dn&&vc(w)===E.type){n(p,E.sibling),c=o(E,f.props),c.ref=Ur(p,E,f),c.return=p,p=c;break e}n(p,E);break}else t(p,E);E=E.sibling}f.type===nr?(c=Wn(f.props.children,p.mode,m,f.key),c.return=p,p=c):(m=bi(f.type,f.key,f.props,null,p.mode,m),m.ref=Ur(p,c,f),m.return=p,p=m)}return s(p);case tr:e:{for(E=f.key;c!==null;){if(c.key===E)if(c.tag===4&&c.stateNode.containerInfo===f.containerInfo&&c.stateNode.implementation===f.implementation){n(p,c.sibling),c=o(c,f.children||[]),c.return=p,p=c;break e}else{n(p,c);break}else t(p,c);c=c.sibling}c=ul(f,p.mode,m),c.return=p,p=c}return s(p);case dn:return E=f._init,L(p,c,E(f._payload),m)}if(Qr(f))return v(p,c,f,m);if(Wr(f))return S(p,c,f,m);ai(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,c!==null&&c.tag===6?(n(p,c.sibling),c=o(c,f),c.return=p,p=c):(n(p,c),c=al(f,p.mode,m),c.return=p,p=c),s(p)):n(p,c)}return L}var kr=Vd(!0),$d=Vd(!1),_i=Rn(null),zi=null,cr=null,ba=null;function ka(){ba=cr=zi=null}function xa(e){var t=_i.current;ge(_i),e._currentValue=t}function Wl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){zi=e,ba=cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(tt=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},cr===null){if(zi===null)throw Error(M(308));cr=e,zi.dependencies={lanes:0,firstContext:e}}else cr=cr.next=e;return t}var zn=null;function Ea(e){zn===null?zn=[e]:zn.push(e)}function Ud(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ea(t)):(n.next=o.next,o.next=n),t.interleaved=n,on(e,r)}function on(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function Ca(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ee&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,on(e,n)}return o=r.interleaved,o===null?(t.next=t,Ea(r)):(t.next=o.next,o.next=t),r.interleaved=t,on(e,n)}function hi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ca(e,n)}}function yc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,r){var o=e.updateQueue;fn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?i=u:s.next=u,s=a;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(i!==null){var g=o.baseState;s=0,d=u=a=null,l=i;do{var h=l.lane,y=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,S=l;switch(h=t,y=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){g=v.call(y,g,h);break e}g=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(y,g,h):v,h==null)break e;g=ye({},g,h);break e;case 2:fn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,a=g):d=d.next=y,s|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(a=g),o.baseState=a,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Un|=s,e.lanes=s,e.memoizedState=g}}function wc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var To={},Ht=Rn(To),yo=Rn(To),wo=Rn(To);function Dn(e){if(e===To)throw Error(M(174));return e}function La(e,t){switch(ue(wo,t),ue(yo,e),ue(Ht,To),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wl(t,e)}ge(Ht),ue(Ht,t)}function xr(){ge(Ht),ge(yo),ge(wo)}function jd(e){Dn(wo.current);var t=Dn(Ht.current),n=wl(t,e.type);t!==n&&(ue(yo,e),ue(Ht,n))}function Ta(e){yo.current===e&&(ge(Ht),ge(yo))}var me=Rn(0);function Oi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nl=[];function Ra(){for(var e=0;e<nl.length;e++)nl[e]._workInProgressVersionPrimary=null;nl.length=0}var mi=ln.ReactCurrentDispatcher,rl=ln.ReactCurrentBatchConfig,$n=0,ve=null,Pe=null,Ie=null,Wi=!1,no=!1,So=0,vh=0;function Ue(){throw Error(M(321))}function Pa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function Ma(e,t,n,r,o,i){if($n=i,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mi.current=e===null||e.memoizedState===null?bh:kh,e=n(r,o),no){i=0;do{if(no=!1,So=0,25<=i)throw Error(M(301));i+=1,Ie=Pe=null,t.updateQueue=null,mi.current=xh,e=n(r,o)}while(no)}if(mi.current=Bi,t=Pe!==null&&Pe.next!==null,$n=0,Ie=Pe=ve=null,Wi=!1,t)throw Error(M(300));return e}function Aa(){var e=So!==0;return So=0,e}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ve.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function xt(){if(Pe===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Ie===null?ve.memoizedState:Ie.next;if(t!==null)Ie=t,Pe=e;else{if(e===null)throw Error(M(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ie===null?ve.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function bo(e,t){return typeof t=="function"?t(e):t}function ol(e){var t=xt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=Pe,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,a=null,u=i;do{var d=u.lane;if(($n&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=g,s=r):a=a.next=g,ve.lanes|=d,Un|=d}u=u.next}while(u!==null&&u!==i);a===null?s=r:a.next=l,Ft(r,t.memoizedState)||(tt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,ve.lanes|=i,Un|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function il(e){var t=xt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Ft(i,t.memoizedState)||(tt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Kd(){}function Gd(e,t){var n=ve,r=xt(),o=t(),i=!Ft(r.memoizedState,o);if(i&&(r.memoizedState=o,tt=!0),r=r.queue,Na(Yd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,ko(9,qd.bind(null,n,r,o,t),void 0,null),Fe===null)throw Error(M(349));($n&30)!==0||Qd(n,t,o)}return o}function Qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qd(e,t,n,r){t.value=n,t.getSnapshot=r,Xd(t)&&Zd(e)}function Yd(e,t,n){return n(function(){Xd(t)&&Zd(e)})}function Xd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function Zd(e){var t=on(e,1);t!==null&&It(t,e,1,-1)}function Sc(e){var t=Vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Sh.bind(null,ve,e),[t.memoizedState,e]}function ko(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jd(){return xt().memoizedState}function vi(e,t,n,r){var o=Vt();ve.flags|=e,o.memoizedState=ko(1|t,n,void 0,r===void 0?null:r)}function Zi(e,t,n,r){var o=xt();r=r===void 0?null:r;var i=void 0;if(Pe!==null){var s=Pe.memoizedState;if(i=s.destroy,r!==null&&Pa(r,s.deps)){o.memoizedState=ko(t,n,i,r);return}}ve.flags|=e,o.memoizedState=ko(1|t,n,i,r)}function bc(e,t){return vi(8390656,8,e,t)}function Na(e,t){return Zi(2048,8,e,t)}function ef(e,t){return Zi(4,2,e,t)}function tf(e,t){return Zi(4,4,e,t)}function nf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rf(e,t,n){return n=n!=null?n.concat([e]):null,Zi(4,4,nf.bind(null,t,e),n)}function Ia(){}function of(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sf(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lf(e,t,n){return($n&21)===0?(e.baseState&&(e.baseState=!1,tt=!0),e.memoizedState=n):(Ft(n,t)||(n=dd(),ve.lanes|=n,Un|=n,e.baseState=!0),t)}function yh(e,t){var n=ie;ie=n!==0&&4>n?n:4,e(!0);var r=rl.transition;rl.transition={};try{e(!1),t()}finally{ie=n,rl.transition=r}}function af(){return xt().memoizedState}function wh(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uf(e))cf(t,n);else if(n=Ud(e,t,n,r),n!==null){var o=Ye();It(n,e,r,o),df(n,t,r)}}function Sh(e,t,n){var r=xn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uf(e))cf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,Ft(l,s)){var a=t.interleaved;a===null?(o.next=o,Ea(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}n=Ud(e,t,o,r),n!==null&&(o=Ye(),It(n,e,r,o),df(n,t,r))}}function uf(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function cf(e,t){no=Wi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function df(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ca(e,n)}}var Bi={readContext:kt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},bh={readContext:kt,useCallback:function(e,t){return Vt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:bc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vi(4194308,4,nf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return vi(4,2,e,t)},useMemo:function(e,t){var n=Vt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=wh.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=Vt();return e={current:e},t.memoizedState=e},useState:Sc,useDebugValue:Ia,useDeferredValue:function(e){return Vt().memoizedState=e},useTransition:function(){var e=Sc(!1),t=e[0];return e=yh.bind(null,e[1]),Vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,o=Vt();if(he){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),Fe===null)throw Error(M(349));($n&30)!==0||Qd(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,bc(Yd.bind(null,r,i,e),[e]),r.flags|=2048,ko(9,qd.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Vt(),t=Fe.identifierPrefix;if(he){var n=en,r=Jt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=So++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kh={readContext:kt,useCallback:of,useContext:kt,useEffect:Na,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:ol,useRef:Jd,useState:function(){return ol(bo)},useDebugValue:Ia,useDeferredValue:function(e){var t=xt();return lf(t,Pe.memoizedState,e)},useTransition:function(){var e=ol(bo)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:af,unstable_isNewReconciler:!1},xh={readContext:kt,useCallback:of,useContext:kt,useEffect:Na,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:il,useRef:Jd,useState:function(){return il(bo)},useDebugValue:Ia,useDeferredValue:function(e){var t=xt();return Pe===null?t.memoizedState=e:lf(t,Pe.memoizedState,e)},useTransition:function(){var e=il(bo)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:af,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ji={isMounted:function(e){return(e=e._reactInternals)?Kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=xn(e),i=tn(r,o);i.payload=t,n!=null&&(i.callback=n),t=bn(e,i,o),t!==null&&(It(t,e,o,r),hi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=xn(e),i=tn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=bn(e,i,o),t!==null&&(It(t,e,o,r),hi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ye(),r=xn(e),o=tn(n,r);o.tag=2,t!=null&&(o.callback=t),t=bn(e,o,r),t!==null&&(It(t,e,r,n),hi(t,e,r))}};function kc(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!go(n,r)||!go(o,i):!0}function ff(e,t,n){var r=!1,o=Ln,i=t.contextType;return typeof i=="object"&&i!==null?i=kt(i):(o=rt(t)?Bn:Ke.current,r=t.contextTypes,i=(r=r!=null)?Sr(e,o):Ln),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ji,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function xc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ji.enqueueReplaceState(t,t.state,null)}function Vl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ca(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=kt(i):(i=rt(t)?Bn:Ke.current,o.context=Sr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Bl(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ji.enqueueReplaceState(o,o.state,null),Di(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Er(e,t){try{var n="",r=t;do n+=Jp(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function sl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $l(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eh=typeof WeakMap=="function"?WeakMap:Map;function pf(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$i||($i=!0,Zl=r),$l(e,t)},n}function gf(e,t,n){n=tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){$l(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$l(e,t),typeof r!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Ec(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eh;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Oh.bind(null,e,t,n),t.then(e,e))}function Cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lc(e,t,n,r,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,bn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var Ch=ln.ReactCurrentOwner,tt=!1;function qe(e,t,n,r){t.child=e===null?$d(t,null,n,r):kr(t,e.child,n,r)}function Tc(e,t,n,r,o){n=n.render;var i=t.ref;return vr(t,o),r=Ma(e,t,n,r,i,o),n=Aa(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,sn(e,t,o)):(he&&n&&ya(t),t.flags|=1,qe(e,t,r,o),t.child)}function Rc(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Va(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,hf(e,t,i,r,o)):(e=bi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&o)===0){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(s,r)&&e.ref===t.ref)return sn(e,t,o)}return t.flags|=1,e=En(i,r),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(go(i,r)&&e.ref===t.ref)if(tt=!1,t.pendingProps=r=i,(e.lanes&o)!==0)(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,sn(e,t,o)}return Ul(e,t,n,r,o)}function mf(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(fr,ut),ut|=n;else{if((n&1073741824)===0)return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(fr,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(fr,ut),ut|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ue(fr,ut),ut|=r;return qe(e,t,o,n),t.child}function vf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ul(e,t,n,r,o){var i=rt(n)?Bn:Ke.current;return i=Sr(t,i),vr(t,o),n=Ma(e,t,n,r,i,o),r=Aa(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,sn(e,t,o)):(he&&r&&ya(t),t.flags|=1,qe(e,t,n,o),t.child)}function Pc(e,t,n,r,o){if(rt(n)){var i=!0;Ni(t)}else i=!1;if(vr(t,o),t.stateNode===null)yi(e,t),ff(t,n,r),Vl(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=rt(n)?Bn:Ke.current,u=Sr(t,u));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";g||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&xc(t,s,r,u),fn=!1;var h=t.memoizedState;s.state=h,Di(t,r,s,o),a=t.memoizedState,l!==r||h!==a||nt.current||fn?(typeof d=="function"&&(Bl(t,n,d,r),a=t.memoizedState),(l=fn||kc(t,n,l,r,h,a,u))?(g||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Hd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pt(t.type,l),s.props=u,g=t.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=kt(a):(a=rt(n)?Bn:Ke.current,a=Sr(t,a));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==g||h!==a)&&xc(t,s,r,a),fn=!1,h=t.memoizedState,s.state=h,Di(t,r,s,o);var v=t.memoizedState;l!==g||h!==v||nt.current||fn?(typeof y=="function"&&(Bl(t,n,y,r),v=t.memoizedState),(u=fn||kc(t,n,u,r,h,v,a)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,a)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Hl(e,t,n,r,i,o)}function Hl(e,t,n,r,o,i){vf(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&gc(t,n,!1),sn(e,t,i);r=t.stateNode,Ch.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=kr(t,e.child,null,i),t.child=kr(t,null,l,i)):qe(e,t,l,i),t.memoizedState=r.state,o&&gc(t,n,!0),t.child}function yf(e){var t=e.stateNode;t.pendingContext?pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pc(e,t.context,!1),La(e,t.containerInfo)}function Mc(e,t,n,r,o){return br(),Sa(o),t.flags|=256,qe(e,t,n,r),t.child}var jl={dehydrated:null,treeContext:null,retryLane:0};function Kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function wf(e,t,n){var r=t.pendingProps,o=me.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ue(me,o&1),e===null)return Ol(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ns(s,r,0,null),e=Wn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Kl(n),t.memoizedState=jl,e):Fa(t,s));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Lh(e,t,s,r,l,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,l=o.sibling;var a={mode:"hidden",children:r.children};return(s&1)===0&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=En(o,a),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=En(l,i):(i=Wn(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Kl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=jl,r}return i=e.child,e=i.sibling,r=En(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return t=ns({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ui(e,t,n,r){return r!==null&&Sa(r),kr(t,e.child,null,n),e=Fa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lh(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=sl(Error(M(422))),ui(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=ns({mode:"visible",children:r.children},o,0,null),i=Wn(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&kr(t,e.child,null,s),t.child.memoizedState=Kl(s),t.memoizedState=jl,i);if((t.mode&1)===0)return ui(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(M(419)),r=sl(i,r,void 0),ui(e,t,s,r)}if(l=(s&e.childLanes)!==0,tt||l){if(r=Fe,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(r.suspendedLanes|s))!==0?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,on(e,o),It(r,e,o,-1))}return Ba(),r=sl(Error(M(421))),ui(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Wh.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,ct=Sn(o.nextSibling),dt=t,he=!0,At=null,e!==null&&(yt[wt++]=Jt,yt[wt++]=en,yt[wt++]=Vn,Jt=e.id,en=e.overflow,Vn=t),t=Fa(t,r.children),t.flags|=4096,t)}function Ac(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Wl(e.return,t,n)}function ll(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Sf(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(qe(e,t,r.children,n),r=me.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ac(e,n,t);else if(e.tag===19)Ac(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(me,r),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Oi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ll(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Oi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ll(t,!0,n,null,i);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=En(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=En(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Th(e,t,n){switch(t.tag){case 3:yf(t),br();break;case 5:jd(t);break;case 1:rt(t.type)&&Ni(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ue(_i,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?wf(e,t,n):(ue(me,me.current&1),e=sn(e,t,n),e!==null?e.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Sf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,mf(e,t,n)}return sn(e,t,n)}var bf,Gl,kf,xf;bf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gl=function(){};kf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Dn(Ht.current);var i=null;switch(n){case"input":o=hl(e,o),r=hl(e,r),i=[];break;case"select":o=ye({},o,{value:void 0}),r=ye({},r,{value:void 0}),i=[];break;case"textarea":o=yl(e,o),r=yl(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Mi)}Sl(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(so.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=o?.[u],r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(so.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&pe("scroll",e),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};xf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hr(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rh(e,t,n){var r=t.pendingProps;switch(wa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return rt(t.type)&&Ai(),He(t),null;case 3:return r=t.stateNode,xr(),ge(nt),ge(Ke),Ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,At!==null&&(ta(At),At=null))),Gl(e,t),He(t),null;case 5:Ta(t);var o=Dn(wo.current);if(n=t.type,e!==null&&t.stateNode!=null)kf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return He(t),null}if(e=Dn(Ht.current),li(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[$t]=t,r[vo]=i,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(o=0;o<Yr.length;o++)pe(Yr[o],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Wu(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":Vu(r,i),pe("invalid",r)}Sl(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&si(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&si(r.textContent,l,e),o=["children",""+l]):so.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&pe("scroll",r)}switch(n){case"input":Qo(r),Bu(r,i,!0);break;case"textarea":Qo(r),$u(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mi)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[$t]=t,e[vo]=r,bf(e,t,!1,!1),t.stateNode=e;e:{switch(s=bl(n,r),n){case"dialog":pe("cancel",e),pe("close",e),o=r;break;case"iframe":case"object":case"embed":pe("load",e),o=r;break;case"video":case"audio":for(o=0;o<Yr.length;o++)pe(Yr[o],e);o=r;break;case"source":pe("error",e),o=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),o=r;break;case"details":pe("toggle",e),o=r;break;case"input":Wu(e,r),o=hl(e,r),pe("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ye({},r,{value:void 0}),pe("invalid",e);break;case"textarea":Vu(e,r),o=yl(e,r),pe("invalid",e);break;default:o=r}Sl(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?Jc(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xc(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&lo(e,a):typeof a=="number"&&lo(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(so.hasOwnProperty(i)?a!=null&&i==="onScroll"&&pe("scroll",e):a!=null&&oa(e,i,a,s))}switch(n){case"input":Qo(e),Bu(e,r,!1);break;case"textarea":Qo(e),$u(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?pr(e,!!r.multiple,i,!1):r.defaultValue!=null&&pr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Mi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)xf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=Dn(wo.current),Dn(Ht.current),li(t)){if(r=t.stateNode,n=t.memoizedProps,r[$t]=t,(i=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:si(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&si(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=t,t.stateNode=r}return He(t),null;case 13:if(ge(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&ct!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Bd(),br(),t.flags|=98560,i=!1;else if(i=li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(M(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[$t]=t}else br(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),i=!1}else At!==null&&(ta(At),At=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(me.current&1)!==0?Me===0&&(Me=3):Ba())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return xr(),Gl(e,t),e===null&&ho(t.stateNode.containerInfo),He(t),null;case 10:return xa(t.type._context),He(t),null;case 17:return rt(t.type)&&Ai(),He(t),null;case 19:if(ge(me),i=t.memoizedState,i===null)return He(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Hr(i,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=Oi(e),s!==null){for(t.flags|=128,Hr(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ee()>Cr&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Oi(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!he)return He(t),null}else 2*Ee()-i.renderingStartTime>Cr&&n!==1073741824&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ee(),t.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),t):(He(t),null);case 22:case 23:return Wa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(ut&1073741824)!==0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Ph(e,t){switch(wa(t),t.tag){case 1:return rt(t.type)&&Ai(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xr(),ge(nt),ge(Ke),Ra(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ta(t),null;case 13:if(ge(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(me),null;case 4:return xr(),null;case 10:return xa(t.type._context),null;case 22:case 23:return Wa(),null;case 24:return null;default:return null}}var ci=!1,je=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,z=null;function dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function Ql(e,t,n){try{n()}catch(r){be(e,t,r)}}var Nc=!1;function Ah(e,t){if(Al=Ti,e=Td(),va(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,d=0,g=e,h=null;t:for(;;){for(var y;g!==n||o!==0&&g.nodeType!==3||(l=s+o),g!==i||r!==0&&g.nodeType!==3||(a=s+r),g.nodeType===3&&(s+=g.nodeValue.length),(y=g.firstChild)!==null;)h=g,g=y;for(;;){if(g===e)break t;if(h===n&&++u===o&&(l=s),h===i&&++d===r&&(a=s),(y=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nl={focusedElem:e,selectionRange:n},Ti=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var v=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,L=v.memoizedState,p=t.stateNode,c=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:Pt(t.type,S),L);p.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(m){be(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return v=Nc,Nc=!1,v}function ro(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Ql(t,n,i)}o=o.next}while(o!==r)}}function es(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ql(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$t],delete t[vo],delete t[_l],delete t[ph],delete t[gh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cf(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mi));else if(r!==4&&(e=e.child,e!==null))for(Yl(e,t,n),e=e.sibling;e!==null;)Yl(e,t,n),e=e.sibling}function Xl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xl(e,t,n),e=e.sibling;e!==null;)Xl(e,t,n),e=e.sibling}var Oe=null,Mt=!1;function cn(e,t,n){for(n=n.child;n!==null;)Lf(e,t,n),n=n.sibling}function Lf(e,t,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Ki,n)}catch{}switch(n.tag){case 5:je||dr(n,t);case 6:var r=Oe,o=Mt;Oe=null,cn(e,t,n),Oe=r,Mt=o,Oe!==null&&(Mt?(e=Oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Mt?(e=Oe,n=n.stateNode,e.nodeType===8?el(e.parentNode,n):e.nodeType===1&&el(e,n),fo(e)):el(Oe,n.stateNode));break;case 4:r=Oe,o=Mt,Oe=n.stateNode.containerInfo,Mt=!0,cn(e,t,n),Oe=r,Mt=o;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&((i&2)!==0||(i&4)!==0)&&Ql(n,t,s),o=o.next}while(o!==r)}cn(e,t,n);break;case 1:if(!je&&(dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,t,l)}cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,cn(e,t,n),je=r):cn(e,t,n);break;default:cn(e,t,n)}}function Fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mh),t.forEach(function(r){var o=Bh.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Oe=l.stateNode,Mt=!1;break e;case 3:Oe=l.stateNode.containerInfo,Mt=!0;break e;case 4:Oe=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Oe===null)throw Error(M(160));Lf(i,s,o),Oe=null,Mt=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(u){be(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tf(t,e),t=t.sibling}function Tf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Bt(e),r&4){try{ro(3,e,e.return),es(3,e)}catch(S){be(e,e.return,S)}try{ro(5,e,e.return)}catch(S){be(e,e.return,S)}}break;case 1:Rt(t,e),Bt(e),r&512&&n!==null&&dr(n,n.return);break;case 5:if(Rt(t,e),Bt(e),r&512&&n!==null&&dr(n,n.return),e.flags&32){var o=e.stateNode;try{lo(o,"")}catch(S){be(e,e.return,S)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qc(o,i),bl(l,s);var u=bl(l,i);for(s=0;s<a.length;s+=2){var d=a[s],g=a[s+1];d==="style"?Jc(o,g):d==="dangerouslySetInnerHTML"?Xc(o,g):d==="children"?lo(o,g):oa(o,d,g,u)}switch(l){case"input":ml(o,i);break;case"textarea":qc(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?pr(o,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?pr(o,!!i.multiple,i.defaultValue,!0):pr(o,!!i.multiple,i.multiple?[]:"",!1))}o[vo]=i}catch(S){be(e,e.return,S)}}break;case 6:if(Rt(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(M(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(S){be(e,e.return,S)}}break;case 3:if(Rt(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fo(t.containerInfo)}catch(S){be(e,e.return,S)}break;case 4:Rt(t,e),Bt(e);break;case 13:Rt(t,e),Bt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Da=Ee())),r&4&&Fc(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(je=(u=je)||d,Rt(t,e),je=u):Rt(t,e),Bt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(z=e,d=e.child;d!==null;){for(g=z=d;z!==null;){switch(h=z,y=h.child,h.tag){case 0:case 11:case 14:case 15:ro(4,h,h.return);break;case 1:dr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){be(r,n,S)}}break;case 5:dr(h,h.return);break;case 22:if(h.memoizedState!==null){zc(g);continue}}y!==null?(y.return=h,z=y):zc(g)}d=d.sibling}e:for(d=null,g=e;;){if(g.tag===5){if(d===null){d=g;try{o=g.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,a=g.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Zc("display",s))}catch(S){be(e,e.return,S)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(S){be(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Rt(t,e),Bt(e),r&4&&Fc(e);break;case 21:break;default:Rt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cf(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(lo(o,""),r.flags&=-33);var i=Ic(e);Xl(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Ic(e);Yl(e,l,s);break;default:throw Error(M(161))}}catch(a){be(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nh(e,t,n){z=e,Rf(e,t,n)}function Rf(e,t,n){for(var r=(e.mode&1)!==0;z!==null;){var o=z,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||ci;if(!s){var l=o.alternate,a=l!==null&&l.memoizedState!==null||je;l=ci;var u=je;if(ci=s,(je=a)&&!u)for(z=o;z!==null;)s=z,a=s.child,s.tag===22&&s.memoizedState!==null?Dc(o):a!==null?(a.return=s,z=a):Dc(o);for(;i!==null;)z=i,Rf(i,t,n),i=i.sibling;z=o,ci=l,je=u}_c(e,t,n)}else(o.subtreeFlags&8772)!==0&&i!==null?(i.return=o,z=i):_c(e,t,n)}}function _c(e){for(;z!==null;){var t=z;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:je||es(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!je)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&wc(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wc(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&fo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}je||t.flags&512&&ql(t)}catch(h){be(t,t.return,h)}}if(t===e){z=null;break}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}}function zc(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,z=n;break}z=t.return}}function Dc(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(a){be(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(a){be(t,o,a)}}var i=t.return;try{ql(t)}catch(a){be(t,i,a)}break;case 5:var s=t.return;try{ql(t)}catch(a){be(t,s,a)}}}catch(a){be(t,t.return,a)}if(t===e){z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,z=l;break}z=t.return}}var Ih=Math.ceil,Vi=ln.ReactCurrentDispatcher,_a=ln.ReactCurrentOwner,bt=ln.ReactCurrentBatchConfig,ee=0,Fe=null,Te=null,We=0,ut=0,fr=Rn(0),Me=0,xo=null,Un=0,ts=0,za=0,oo=null,et=null,Da=0,Cr=1/0,Xt=null,$i=!1,Zl=null,kn=null,di=!1,mn=null,Ui=0,io=0,Jl=null,wi=-1,Si=0;function Ye(){return(ee&6)!==0?Ee():wi!==-1?wi:wi=Ee()}function xn(e){return(e.mode&1)===0?1:(ee&2)!==0&&We!==0?We&-We:mh.transition!==null?(Si===0&&(Si=dd()),Si):(e=ie,e!==0||(e=window.event,e=e===void 0?16:yd(e.type)),e)}function It(e,t,n,r){if(50<io)throw io=0,Jl=null,Error(M(185));Eo(e,n,r),((ee&2)===0||e!==Fe)&&(e===Fe&&((ee&2)===0&&(ts|=n),Me===4&&gn(e,We)),ot(e,r),n===1&&ee===0&&(t.mode&1)===0&&(Cr=Ee()+500,Xi&&Pn()))}function ot(e,t){var n=e.callbackNode;yg(e,t);var r=Li(e,e===Fe?We:0);if(r===0)n!==null&&ju(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ju(n),t===1)e.tag===0?hh(Oc.bind(null,e)):Dd(Oc.bind(null,e)),dh(function(){(ee&6)===0&&Pn()}),n=null;else{switch(fd(r)){case 1:n=ua;break;case 4:n=ud;break;case 16:n=Ci;break;case 536870912:n=cd;break;default:n=Ci}n=zf(n,Pf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pf(e,t){if(wi=-1,Si=0,(ee&6)!==0)throw Error(M(327));var n=e.callbackNode;if(yr()&&e.callbackNode!==n)return null;var r=Li(e,e===Fe?We:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Hi(e,r);else{t=r;var o=ee;ee|=2;var i=Af();(Fe!==e||We!==t)&&(Xt=null,Cr=Ee()+500,On(e,t));do try{zh();break}catch(l){Mf(e,l)}while(!0);ka(),Vi.current=i,ee=o,Te!==null?t=0:(Fe=null,We=0,t=Me)}if(t!==0){if(t===2&&(o=Ll(e),o!==0&&(r=o,t=ea(e,o))),t===1)throw n=xo,On(e,0),gn(e,r),ot(e,Ee()),n;if(t===6)gn(e,r);else{if(o=e.current.alternate,(r&30)===0&&!Fh(o)&&(t=Hi(e,r),t===2&&(i=Ll(e),i!==0&&(r=i,t=ea(e,i))),t===1))throw n=xo,On(e,0),gn(e,r),ot(e,Ee()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Fn(e,et,Xt);break;case 3:if(gn(e,r),(r&130023424)===r&&(t=Da+500-Ee(),10<t)){if(Li(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ye(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fl(Fn.bind(null,e,et,Xt),t);break}Fn(e,et,Xt);break;case 4:if(gn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-Nt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ih(r/1960))-r,10<r){e.timeoutHandle=Fl(Fn.bind(null,e,et,Xt),r);break}Fn(e,et,Xt);break;case 5:Fn(e,et,Xt);break;default:throw Error(M(329))}}}return ot(e,Ee()),e.callbackNode===n?Pf.bind(null,e):null}function ea(e,t){var n=oo;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=Hi(e,t),e!==2&&(t=et,et=n,t!==null&&ta(t)),e}function ta(e){et===null?et=e:et.push.apply(et,e)}function Fh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Ft(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gn(e,t){for(t&=~za,t&=~ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function Oc(e){if((ee&6)!==0)throw Error(M(327));yr();var t=Li(e,0);if((t&1)===0)return ot(e,Ee()),null;var n=Hi(e,t);if(e.tag!==0&&n===2){var r=Ll(e);r!==0&&(t=r,n=ea(e,r))}if(n===1)throw n=xo,On(e,0),gn(e,t),ot(e,Ee()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,et,Xt),ot(e,Ee()),null}function Oa(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(Cr=Ee()+500,Xi&&Pn())}}function Hn(e){mn!==null&&mn.tag===0&&(ee&6)===0&&yr();var t=ee;ee|=1;var n=bt.transition,r=ie;try{if(bt.transition=null,ie=1,e)return e()}finally{ie=r,bt.transition=n,ee=t,(ee&6)===0&&Pn()}}function Wa(){ut=fr.current,ge(fr)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ch(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(wa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ai();break;case 3:xr(),ge(nt),ge(Ke),Ra();break;case 5:Ta(r);break;case 4:xr();break;case 13:ge(me);break;case 19:ge(me);break;case 10:xa(r.type._context);break;case 22:case 23:Wa()}n=n.return}if(Fe=e,Te=e=En(e.current,null),We=ut=t,Me=0,xo=null,za=ts=Un=0,et=oo=null,zn!==null){for(t=0;t<zn.length;t++)if(n=zn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}zn=null}return e}function Mf(e,t){do{var n=Te;try{if(ka(),mi.current=Bi,Wi){for(var r=ve.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Wi=!1}if($n=0,Ie=Pe=ve=null,no=!1,So=0,_a.current=null,n===null||n.return===null){Me=1,xo=t,Te=null;break}e:{var i=e,s=n.return,l=n,a=t;if(t=We,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,g=d.tag;if((d.mode&1)===0&&(g===0||g===11||g===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Cc(s);if(y!==null){y.flags&=-257,Lc(y,s,l,i,t),y.mode&1&&Ec(i,u,t),t=y,a=u;var v=t.updateQueue;if(v===null){var S=new Set;S.add(a),t.updateQueue=S}else v.add(a);break e}else{if((t&1)===0){Ec(i,u,t),Ba();break e}a=Error(M(426))}}else if(he&&l.mode&1){var L=Cc(s);if(L!==null){(L.flags&65536)===0&&(L.flags|=256),Lc(L,s,l,i,t),Sa(Er(a,l));break e}}i=a=Er(a,l),Me!==4&&(Me=2),oo===null?oo=[i]:oo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=pf(i,a,t);yc(i,p);break e;case 1:l=a;var c=i.type,f=i.stateNode;if((i.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(kn===null||!kn.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var m=gf(i,l,t);yc(i,m);break e}}i=i.return}while(i!==null)}If(n)}catch(w){t=w,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function Af(){var e=Vi.current;return Vi.current=Bi,e===null?Bi:e}function Ba(){(Me===0||Me===3||Me===2)&&(Me=4),Fe===null||(Un&268435455)===0&&(ts&268435455)===0||gn(Fe,We)}function Hi(e,t){var n=ee;ee|=2;var r=Af();(Fe!==e||We!==t)&&(Xt=null,On(e,t));do try{_h();break}catch(o){Mf(e,o)}while(!0);if(ka(),ee=n,Vi.current=r,Te!==null)throw Error(M(261));return Fe=null,We=0,Me}function _h(){for(;Te!==null;)Nf(Te)}function zh(){for(;Te!==null&&!ug();)Nf(Te)}function Nf(e){var t=_f(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?If(e):Te=t,_a.current=null}function If(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Rh(n,t,ut),n!==null){Te=n;return}}else{if(n=Ph(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Te=null;return}}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Me===0&&(Me=5)}function Fn(e,t,n){var r=ie,o=bt.transition;try{bt.transition=null,ie=1,Dh(e,t,n,r)}finally{bt.transition=o,ie=r}return null}function Dh(e,t,n,r){do yr();while(mn!==null);if((ee&6)!==0)throw Error(M(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(wg(e,i),e===Fe&&(Te=Fe=null,We=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||di||(di=!0,zf(Ci,function(){return yr(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=bt.transition,bt.transition=null;var s=ie;ie=1;var l=ee;ee|=4,_a.current=null,Ah(e,n),Tf(n,e),ih(Nl),Ti=!!Al,Nl=Al=null,e.current=n,Nh(n,e,o),cg(),ee=l,ie=s,bt.transition=i}else e.current=n;if(di&&(di=!1,mn=e,Ui=o),i=e.pendingLanes,i===0&&(kn=null),pg(n.stateNode,r),ot(e,Ee()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if($i)throw $i=!1,e=Zl,Zl=null,e;return(Ui&1)!==0&&e.tag!==0&&yr(),i=e.pendingLanes,(i&1)!==0?e===Jl?io++:(io=0,Jl=e):io=0,Pn(),null}function yr(){if(mn!==null){var e=fd(Ui),t=bt.transition,n=ie;try{if(bt.transition=null,ie=16>e?16:e,mn===null)var r=!1;else{if(e=mn,mn=null,Ui=0,(ee&6)!==0)throw Error(M(331));var o=ee;for(ee|=4,z=e.current;z!==null;){var i=z,s=i.child;if((z.flags&16)!==0){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(z=u;z!==null;){var d=z;switch(d.tag){case 0:case 11:case 15:ro(8,d,i)}var g=d.child;if(g!==null)g.return=d,z=g;else for(;z!==null;){d=z;var h=d.sibling,y=d.return;if(Ef(d),d===u){z=null;break}if(h!==null){h.return=y,z=h;break}z=y}}}var v=i.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var L=S.sibling;S.sibling=null,S=L}while(S!==null)}}z=i}}if((i.subtreeFlags&2064)!==0&&s!==null)s.return=i,z=s;else e:for(;z!==null;){if(i=z,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:ro(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,z=p;break e}z=i.return}}var c=e.current;for(z=c;z!==null;){s=z;var f=s.child;if((s.subtreeFlags&2064)!==0&&f!==null)f.return=s,z=f;else e:for(s=c;z!==null;){if(l=z,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:es(9,l)}}catch(w){be(l,l.return,w)}if(l===s){z=null;break e}var m=l.sibling;if(m!==null){m.return=l.return,z=m;break e}z=l.return}}if(ee=o,Pn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Ki,e)}catch{}r=!0}return r}finally{ie=n,bt.transition=t}}return!1}function Wc(e,t,n){t=Er(n,t),t=pf(e,t,1),e=bn(e,t,1),t=Ye(),e!==null&&(Eo(e,1,t),ot(e,t))}function be(e,t,n){if(e.tag===3)Wc(e,e,n);else for(;t!==null;){if(t.tag===3){Wc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kn===null||!kn.has(r))){e=Er(n,e),e=gf(t,e,1),t=bn(t,e,1),e=Ye(),t!==null&&(Eo(t,1,e),ot(t,e));break}}t=t.return}}function Oh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&n,Fe===e&&(We&n)===n&&(Me===4||Me===3&&(We&130023424)===We&&500>Ee()-Da?On(e,0):za|=n),ot(e,t)}function Ff(e,t){t===0&&((e.mode&1)===0?t=1:(t=Xo,Xo<<=1,(Xo&130023424)===0&&(Xo=4194304)));var n=Ye();e=on(e,t),e!==null&&(Eo(e,t,n),ot(e,n))}function Wh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ff(e,n)}function Bh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Ff(e,n)}var _f;_f=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)tt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return tt=!1,Th(e,t,n);tt=(e.flags&131072)!==0}else tt=!1,he&&(t.flags&1048576)!==0&&Od(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yi(e,t),e=t.pendingProps;var o=Sr(t,Ke.current);vr(t,n),o=Ma(null,t,r,e,o,n);var i=Aa();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(r)?(i=!0,Ni(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ca(t),o.updater=Ji,t.stateNode=o,o._reactInternals=t,Vl(t,r,e,n),t=Hl(null,t,r,!0,i,n)):(t.tag=0,he&&i&&ya(t),qe(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=$h(r),e=Pt(r,e),o){case 0:t=Ul(null,t,r,e,n);break e;case 1:t=Pc(null,t,r,e,n);break e;case 11:t=Tc(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,Pt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Pt(r,o),Ul(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Pt(r,o),Pc(e,t,r,o,n);case 3:e:{if(yf(t),e===null)throw Error(M(387));r=t.pendingProps,i=t.memoizedState,o=i.element,Hd(e,t),Di(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=Er(Error(M(423)),t),t=Mc(e,t,r,n,o);break e}else if(r!==o){o=Er(Error(M(424)),t),t=Mc(e,t,r,n,o);break e}else for(ct=Sn(t.stateNode.containerInfo.firstChild),dt=t,he=!0,At=null,n=$d(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),r===o){t=sn(e,t,n);break e}qe(e,t,r,n)}t=t.child}return t;case 5:return jd(t),e===null&&Ol(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Il(r,o)?s=null:i!==null&&Il(r,i)&&(t.flags|=32),vf(e,t),qe(e,t,s,n),t.child;case 6:return e===null&&Ol(t),null;case 13:return wf(e,t,n);case 4:return La(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=kr(t,null,r,n):qe(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Pt(r,o),Tc(e,t,r,o,n);case 7:return qe(e,t,t.pendingProps,n),t.child;case 8:return qe(e,t,t.pendingProps.children,n),t.child;case 12:return qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,ue(_i,r._currentValue),r._currentValue=s,i!==null)if(Ft(i.value,s)){if(i.children===o.children&&!nt.current){t=sn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=tn(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Wl(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(M(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Wl(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}qe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,vr(t,n),o=kt(o),r=r(o),t.flags|=1,qe(e,t,r,n),t.child;case 14:return r=t.type,o=Pt(r,t.pendingProps),o=Pt(r.type,o),Rc(e,t,r,o,n);case 15:return hf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Pt(r,o),yi(e,t),t.tag=1,rt(r)?(e=!0,Ni(t)):e=!1,vr(t,n),ff(t,r,o),Vl(t,r,o,n),Hl(null,t,r,!0,e,n);case 19:return Sf(e,t,n);case 22:return mf(e,t,n)}throw Error(M(156,t.tag))};function zf(e,t){return ad(e,t)}function Vh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,n,r){return new Vh(e,t,n,r)}function Va(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $h(e){if(typeof e=="function")return Va(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sa)return 11;if(e===la)return 14}return 2}function En(e,t){var n=e.alternate;return n===null?(n=St(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bi(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Va(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case nr:return Wn(n.children,o,i,t);case ia:s=8,o|=8;break;case dl:return e=St(12,n,t,o|2),e.elementType=dl,e.lanes=i,e;case fl:return e=St(13,n,t,o),e.elementType=fl,e.lanes=i,e;case pl:return e=St(19,n,t,o),e.elementType=pl,e.lanes=i,e;case jc:return ns(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Uc:s=10;break e;case Hc:s=9;break e;case sa:s=11;break e;case la:s=14;break e;case dn:s=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=St(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Wn(e,t,n,r){return e=St(7,e,r,t),e.lanes=n,e}function ns(e,t,n,r){return e=St(22,e,r,t),e.elementType=jc,e.lanes=n,e.stateNode={isHidden:!1},e}function al(e,t,n){return e=St(6,e,null,t),e.lanes=n,e}function ul(e,t,n){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uh(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ks(0),this.expirationTimes=Ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $a(e,t,n,r,o,i,s,l,a){return e=new Uh(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=St(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ca(i),e}function Hh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Df(e){if(!e)return Ln;e=e._reactInternals;e:{if(Kn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(rt(n))return zd(e,n,t)}return t}function Of(e,t,n,r,o,i,s,l,a){return e=$a(n,r,!0,e,o,i,s,l,a),e.context=Df(null),n=e.current,r=Ye(),o=xn(n),i=tn(r,o),i.callback=t??null,bn(n,i,o),e.current.lanes=o,Eo(e,o,r),ot(e,r),e}function rs(e,t,n,r){var o=t.current,i=Ye(),s=xn(o);return n=Df(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bn(o,t,s),e!==null&&(It(e,o,s,i),hi(e,o,s)),s}function ji(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Bc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ua(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}function jh(){return null}var Wf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ha(e){this._internalRoot=e}os.prototype.render=Ha.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));rs(e,t,null,null)};os.prototype.unmount=Ha.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){rs(null,e,null,null)}),t[rn]=null}};function os(e){this._internalRoot=e}os.prototype.unstable_scheduleHydration=function(e){if(e){var t=hd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pn.length&&t!==0&&t<pn[n].priority;n++);pn.splice(n,0,e),n===0&&vd(e)}};function ja(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vc(){}function Kh(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=ji(s);i.call(u)}}var s=Of(t,r,e,0,null,!1,!1,"",Vc);return e._reactRootContainer=s,e[rn]=s.current,ho(e.nodeType===8?e.parentNode:e),Hn(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=ji(a);l.call(u)}}var a=$a(e,0,!1,null,null,!1,!1,"",Vc);return e._reactRootContainer=a,e[rn]=a.current,ho(e.nodeType===8?e.parentNode:e),Hn(function(){rs(t,a,n,r)}),a}function ss(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var a=ji(s);l.call(a)}}rs(t,s,e,o)}else s=Kh(n,t,e,o,r);return ji(s)}pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qr(t.pendingLanes);n!==0&&(ca(t,n|1),ot(t,Ee()),(ee&6)===0&&(Cr=Ee()+500,Pn()))}break;case 13:Hn(function(){var r=on(e,1);if(r!==null){var o=Ye();It(r,e,1,o)}}),Ua(e,1)}};da=function(e){if(e.tag===13){var t=on(e,134217728);if(t!==null){var n=Ye();It(t,e,134217728,n)}Ua(e,134217728)}};gd=function(e){if(e.tag===13){var t=xn(e),n=on(e,t);if(n!==null){var r=Ye();It(n,e,t,r)}Ua(e,t)}};hd=function(){return ie};md=function(e,t){var n=ie;try{return ie=e,t()}finally{ie=n}};xl=function(e,t,n){switch(t){case"input":if(ml(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Yi(r);if(!o)throw Error(M(90));Gc(r),ml(r,o)}}}break;case"textarea":qc(e,n);break;case"select":t=n.value,t!=null&&pr(e,!!n.multiple,t,!1)}};nd=Oa;rd=Hn;var Gh={usingClientEntryPoint:!1,Events:[Lo,sr,Yi,ed,td,Oa]},jr={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qh={bundleType:jr.bundleType,version:jr.version,rendererPackageName:jr.rendererPackageName,rendererConfig:jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sd(e),e===null?null:e.stateNode},findFiberByHostInstance:jr.findFiberByHostInstance||jh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Kr=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Kr.isDisabled&&Kr.supportsFiber))try{Ki=Kr.inject(Qh),Ut=Kr}catch{}var Kr;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gh;gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ja(t))throw Error(M(200));return Hh(e,t,null,n)};gt.createRoot=function(e,t){if(!ja(e))throw Error(M(299));var n=!1,r="",o=Wf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=$a(e,1,!1,null,null,n,!1,r,o),e[rn]=t.current,ho(e.nodeType===8?e.parentNode:e),new Ha(t)};gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=sd(t),e=e===null?null:e.stateNode,e};gt.flushSync=function(e){return Hn(e)};gt.hydrate=function(e,t,n){if(!is(t))throw Error(M(200));return ss(null,e,t,!0,n)};gt.hydrateRoot=function(e,t,n){if(!ja(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Wf;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Of(t,null,e,1,n??null,o,!1,i,s),e[rn]=t.current,ho(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new os(t)};gt.render=function(e,t,n){if(!is(t))throw Error(M(200));return ss(null,e,t,!1,n)};gt.unmountComponentAtNode=function(e){if(!is(e))throw Error(M(40));return e._reactRootContainer?(Hn(function(){ss(null,null,e,!1,function(){e._reactRootContainer=null,e[rn]=null})}),!0):!1};gt.unstable_batchedUpdates=Oa;gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!is(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return ss(e,t,n,!1,r)};gt.version="18.3.1-next-f1338f8080-20240426"});var Ka=Ot((Tm,$f)=>{"use strict";function Vf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vf)}catch(e){console.error(e)}}Vf(),$f.exports=Bf()});var Qa=Ot(Ga=>{"use strict";var Uf=Ka();Ga.createRoot=Uf.createRoot,Ga.hydrateRoot=Uf.hydrateRoot;var Rm});var jf=Ot(ls=>{"use strict";var qh=Re(),Yh=Symbol.for("react.element"),Xh=Symbol.for("react.fragment"),Zh=Object.prototype.hasOwnProperty,Jh=qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,em={key:!0,ref:!0,__self:!0,__source:!0};function Hf(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Zh.call(t,r)&&!em.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Yh,type:e,key:i,ref:s,props:o,_owner:Jh.current}}ls.Fragment=Xh;ls.jsx=Hf;ls.jsxs=Hf});var Ce=Ot((Am,Kf)=>{"use strict";Kf.exports=jf()});var Gf,Qf,Xa=Fr(()=>{Gf=e=>{let t,n=new Set,r=(u,d)=>{let g=typeof u=="function"?u(t):u;if(!Object.is(g,t)){let h=t;t=d??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(y=>y(t,h))}},o=()=>t,l={setState:r,getState:o,getInitialState:()=>a,subscribe:u=>(n.add(u),()=>n.delete(u))},a=t=e(r,o,l);return l},Qf=(e=>e?Gf(e):Gf)});function nm(e,t=tm){let n=Ro.default.useSyncExternalStore(e.subscribe,Ro.default.useCallback(()=>t(e.getState()),[e,t]),Ro.default.useCallback(()=>t(e.getInitialState()),[e,t]));return Ro.default.useDebugValue(n),n}var Ro,tm,qf,Yf,Xf=Fr(()=>{Ro=H(Re(),1);Xa();tm=e=>e;qf=e=>{let t=Qf(e),n=r=>nm(t,r);return Object.assign(n,t),n},Yf=(e=>e?qf(e):qf)});var Zf=Fr(()=>{Xa();Xf()});var Ze={};Ts(Ze,{selectCurrentSubtitle:()=>Po,selectIsABRepeating:()=>om,selectIsLooping:()=>rm,useMediaStore:()=>b});var Jf,b,Po,rm,om,we=Fr(()=>{Zf();Jf={currentTime:0,duration:0,playing:!1,volume:.8,playbackRate:1,videoFit:"contain",showInlineSubtitles:!1,playerRef:null,subtitles:[],activeIndex:-1,activeWordIndex:-1,subtitleConfig:{fontSize:16,fontColor:"#FFFFFF",translationColor:"",highlightColor:"",backgroundColor:"rgba(0, 0, 0, 0.7)",position:"bottom",showEnglish:!0,showChinese:!0,visibleLanguages:["en","zh"],primaryLanguage:"en",showIndexAndTime:!1,wordByWordHighlight:!1},loopEnabled:!1,loopStart:0,loopEnd:0,segmentPlayEnabled:!1,segmentPlayEnd:0,segmentLoopEnabled:!1,segmentLoopTotal:3,segmentLoopCurrent:0,segmentLoopIndex:-1,abRepeatEnabled:!1,pointA:null,pointB:null,shadowingEnabled:!1,shadowingPauseFactor:1},b=Yf((e,t)=>({...Jf,setCurrentTime:n=>{e({currentTime:n})},setDuration:n=>{e({duration:n})},setPlaying:n=>{e({playing:n})},setVolume:n=>{e({volume:Math.max(0,Math.min(1,n))})},setPlaybackRate:n=>{e({playbackRate:Math.max(.25,Math.min(2,n))})},setVideoFit:n=>{e({videoFit:n})},setShowInlineSubtitles:n=>{e({showInlineSubtitles:n})},setPlayerRef:n=>{e({playerRef:n})},setSubtitles:n=>{console.log("[MediaStore] Loading subtitles:",n.length),e({subtitles:n,activeIndex:-1})},setActiveIndex:n=>{let r=t();r.activeIndex!==n&&(n>=0&&n<r.subtitles.length?e({activeIndex:n,activeWordIndex:-1}):n===-1&&(r.activeIndex!==-1||r.activeWordIndex!==-1)&&e({activeIndex:-1,activeWordIndex:-1}))},setActiveWordIndex:n=>{t().activeWordIndex!==n&&e({activeWordIndex:n})},updateSubtitleConfig:n=>{e(r=>({subtitleConfig:{...r.subtitleConfig,...n}}))},enableLoop:(n,r)=>{console.log("[MediaStore] Enable loop:",n,"-",r),t().segmentLoopEnabled&&t().stopSegmentLoop(),t().abRepeatEnabled&&t().disableABRepeat(),t().shadowingEnabled&&t().disableShadowing(),e({loopEnabled:!0,loopStart:n,loopEnd:r})},disableLoop:()=>{console.log("[MediaStore] Disable loop"),e({loopEnabled:!1,loopStart:0,loopEnd:0})},toggleLoop:()=>{let{loopEnabled:n}=t();if(n)t().disableLoop();else{let{activeIndex:r,subtitles:o}=t();if(r>=0&&r<o.length){let i=o[r];i&&t().enableLoop(i.start,i.end)}}},playSegment:(n,r)=>{console.log("[MediaStore] Play segment:",n,"-",r),t().loopEnabled&&t().disableLoop(),t().segmentLoopEnabled&&t().stopSegmentLoop(),t().abRepeatEnabled&&t().disableABRepeat(),t().shadowingEnabled&&t().disableShadowing(),e({segmentPlayEnabled:!0,segmentPlayEnd:r,currentTime:n,playing:!0})},startSegmentLoop:(n,r,o,i=-1)=>{console.log("[MediaStore] Start segment loop:",n,"-",r,"Count:",o,"Index:",i);let s=t().playerRef;s?(console.log("[MediaStore] startSegmentLoop seeking to:",n),s.seekTo(n)):console.warn("[MediaStore] startSegmentLoop: Player ref is null!"),t().loopEnabled&&t().disableLoop(),t().segmentPlayEnabled&&e({segmentPlayEnabled:!1}),t().abRepeatEnabled&&t().disableABRepeat(),t().shadowingEnabled&&t().disableShadowing();let{playing:l}=t();e({segmentLoopEnabled:!0,segmentLoopTotal:o,segmentLoopCurrent:0,segmentLoopIndex:i,loopStart:n,loopEnd:r,currentTime:n,playing:l})},stopSegmentLoop:()=>{console.log("[MediaStore] Stop segment loop"),e({segmentLoopEnabled:!1,segmentLoopTotal:3,segmentLoopCurrent:0,segmentLoopIndex:-1,loopStart:0,loopEnd:0})},incrementLoopCount:()=>{let{segmentLoopCurrent:n}=t();e({segmentLoopCurrent:n+1})},playNextSegment:()=>{let{subtitles:n,segmentLoopIndex:r,segmentLoopTotal:o,activeIndex:i}=t();if(!n||n.length===0){console.warn("[MediaStore] Cannot play next: No subtitles");return}let l=(r!==-1?r:i)+1;if(l>=n.length){console.log("[MediaStore] Reached end of subtitles");return}let a=n[l];if(!a){console.warn("[MediaStore] Next cue not found");return}if(console.log("[MediaStore] Playing next segment:",a.text),r!==-1){console.log("[MediaStore] Stopping current loop and starting new one"),e({playing:!0});let u=t().playerRef;u&&(console.log("[MediaStore] Seeking to next segment (loop mode):",a.start),u.seekTo(a.start),u.playVideo()),e({segmentLoopEnabled:!1,segmentLoopCurrent:0}),t().startSegmentLoop(a.start,a.end,o,l)}else{console.log("[MediaStore] Not in loop mode, jumping directly to nextIndex:",l),e({activeIndex:l});let u=t().playerRef;u?(console.log("[MediaStore] Seeking to:",a.start),u.seekTo(a.start)):console.warn("[MediaStore] Player not available!")}},playPreviousSegment:()=>{let{subtitles:n,segmentLoopIndex:r,segmentLoopTotal:o,activeIndex:i}=t();if(console.log("[MediaStore] playPreviousSegment called. activeIndex:",i,"segmentLoopIndex:",r,"subtitles.length:",n?.length),!n||n.length===0){console.warn("[MediaStore] Cannot play previous: No subtitles");return}let s=r!==-1?r:i,l=s-1;if(console.log("[MediaStore] currentIndex:",s,"\u2192 prevIndex:",l),l<0){console.log("[MediaStore] Reached beginning of subtitles");return}let a=n[l];if(!a){console.warn("[MediaStore] Previous cue not found");return}if(console.log("[MediaStore] Playing previous segment:",a.text),r!==-1){console.log("[MediaStore] Stopping current loop and starting new one");let u=t().playerRef;u&&(console.log("[MediaStore] Seeking to previous segment (loop mode):",a.start),u.seekTo(a.start),u.playVideo(),t().setPlaying(!0)),e({segmentLoopEnabled:!1,segmentLoopCurrent:0}),t().startSegmentLoop(a.start,a.end,o,l)}else{console.log("[MediaStore] Not in loop mode, jumping directly to prevIndex:",l),e({activeIndex:l});let u=t().playerRef;u?(console.log("[MediaStore] Seeking to:",a.start),u.seekTo(a.start)):console.warn("[MediaStore] Player not available!")}},setPointA:n=>{if(typeof n!="number"||isNaN(n)||n<0){console.warn("[MediaStore] Invalid time for Point A:",n);return}console.log("[MediaStore] Set Point A:",n),e({pointA:n})},setPointB:n=>{if(typeof n!="number"||isNaN(n)||n<0){console.warn("[MediaStore] Invalid time for Point B:",n);return}console.log("[MediaStore] Set Point B:",n);let{pointA:r}=t();r!==null&&n>r?e({pointB:n}):console.warn("[MediaStore] Point B must be greater than Point A")},enableABRepeat:()=>{let{pointA:n,pointB:r}=t();n!==null&&r!==null&&r>n&&(console.log("[MediaStore] Enable AB Repeat:",n,"-",r),t().segmentLoopEnabled&&t().stopSegmentLoop(),t().loopEnabled&&t().disableLoop(),t().shadowingEnabled&&t().disableShadowing(),e({abRepeatEnabled:!0}))},disableABRepeat:()=>{console.log("[MediaStore] Disable AB Repeat"),e({abRepeatEnabled:!1})},clearABPoints:()=>{console.log("[MediaStore] Clear AB Points"),e({pointA:null,pointB:null,abRepeatEnabled:!1})},toggleShadowing:()=>{let{shadowingEnabled:n}=t();n?t().disableShadowing():t().enableShadowing()},enableShadowing:()=>{console.log("[MediaStore] Enable Shadowing"),t().segmentLoopEnabled&&t().stopSegmentLoop(),t().loopEnabled&&t().disableLoop(),t().abRepeatEnabled&&t().disableABRepeat(),e({shadowingEnabled:!0})},disableShadowing:()=>{console.log("[MediaStore] Disable Shadowing"),e({shadowingEnabled:!1})},setShadowingPauseFactor:n=>{e({shadowingPauseFactor:n})},reset:()=>{console.log("[MediaStore] Reset state");let{subtitleConfig:n,videoFit:r,showInlineSubtitles:o,volume:i}=t();e({...Jf,subtitleConfig:n,videoFit:r,showInlineSubtitles:o,volume:i})}})),Po=e=>{let{subtitles:t,activeIndex:n}=e;return n>=0&&n<t.length&&t[n]||null},rm=e=>e.loopEnabled,om=e=>e.abRepeatEnabled&&e.pointA!==null&&e.pointB!==null});var tu=Ot((vv,Ar)=>{var A=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},se=-1,de=1,j=0;A.Diff=function(e,t){return[e,t]};A.prototype.diff_main=function(e,t,n,r){typeof r>"u"&&(this.Diff_Timeout<=0?r=Number.MAX_VALUE:r=new Date().getTime()+this.Diff_Timeout*1e3);var o=r;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e==t)return e?[new A.Diff(j,e)]:[];typeof n>"u"&&(n=!0);var i=n,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var a=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,i,o);return l&&u.unshift(new A.Diff(j,l)),a&&u.push(new A.Diff(j,a)),this.diff_cleanupMerge(u),u};A.prototype.diff_compute_=function(e,t,n,r){var o;if(!e)return[new A.Diff(de,t)];if(!t)return[new A.Diff(se,e)];var i=e.length>t.length?e:t,s=e.length>t.length?t:e,l=i.indexOf(s);if(l!=-1)return o=[new A.Diff(de,i.substring(0,l)),new A.Diff(j,s),new A.Diff(de,i.substring(l+s.length))],e.length>t.length&&(o[0][0]=o[2][0]=se),o;if(s.length==1)return[new A.Diff(se,e),new A.Diff(de,t)];var a=this.diff_halfMatch_(e,t);if(a){var u=a[0],d=a[1],g=a[2],h=a[3],y=a[4],v=this.diff_main(u,g,n,r),S=this.diff_main(d,h,n,r);return v.concat([new A.Diff(j,y)],S)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)};A.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var o=r.lineArray,i=this.diff_main(e,t,!1,n);this.diff_charsToLines_(i,o),this.diff_cleanupSemantic(i),i.push(new A.Diff(j,""));for(var s=0,l=0,a=0,u="",d="";s<i.length;){switch(i[s][0]){case de:a++,d+=i[s][1];break;case se:l++,u+=i[s][1];break;case j:if(l>=1&&a>=1){i.splice(s-l-a,l+a),s=s-l-a;for(var g=this.diff_main(u,d,!1,n),h=g.length-1;h>=0;h--)i.splice(s,0,g[h]);s=s+g.length}a=0,l=0,u="",d="";break}s++}return i.pop(),i};A.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,o=t.length,i=Math.ceil((r+o)/2),s=i,l=2*i,a=new Array(l),u=new Array(l),d=0;d<l;d++)a[d]=-1,u[d]=-1;a[s+1]=0,u[s+1]=0;for(var g=r-o,h=g%2!=0,y=0,v=0,S=0,L=0,p=0;p<i&&!(new Date().getTime()>n);p++){for(var c=-p+y;c<=p-v;c+=2){var f=s+c,m;c==-p||c!=p&&a[f-1]<a[f+1]?m=a[f+1]:m=a[f-1]+1;for(var w=m-c;m<r&&w<o&&e.charAt(m)==t.charAt(w);)m++,w++;if(a[f]=m,m>r)v+=2;else if(w>o)y+=2;else if(h){var E=s+g-c;if(E>=0&&E<l&&u[E]!=-1){var T=r-u[E];if(m>=T)return this.diff_bisectSplit_(e,t,m,w,n)}}}for(var N=-p+S;N<=p-L;N+=2){var E=s+N,T;N==-p||N!=p&&u[E-1]<u[E+1]?T=u[E+1]:T=u[E-1]+1;for(var O=T-N;T<r&&O<o&&e.charAt(r-T-1)==t.charAt(o-O-1);)T++,O++;if(u[E]=T,T>r)L+=2;else if(O>o)S+=2;else if(!h){var f=s+g-N;if(f>=0&&f<l&&a[f]!=-1){var m=a[f],w=s+m-f;if(T=r-T,m>=T)return this.diff_bisectSplit_(e,t,m,w,n)}}}}return[new A.Diff(se,e),new A.Diff(de,t)]};A.prototype.diff_bisectSplit_=function(e,t,n,r,o){var i=e.substring(0,n),s=t.substring(0,r),l=e.substring(n),a=t.substring(r),u=this.diff_main(i,s,!1,o),d=this.diff_main(l,a,!1,o);return u.concat(d)};A.prototype.diff_linesToChars_=function(e,t){var n=[],r={};n[0]="";function o(a){for(var u="",d=0,g=-1,h=n.length;g<a.length-1;){g=a.indexOf(`
`,d),g==-1&&(g=a.length-1);var y=a.substring(d,g+1);(r.hasOwnProperty?r.hasOwnProperty(y):r[y]!==void 0)?u+=String.fromCharCode(r[y]):(h==i&&(y=a.substring(d),g=a.length),u+=String.fromCharCode(h),r[y]=h,n[h++]=y),d=g+1}return u}var i=4e4,s=o(e);i=65535;var l=o(t);return{chars1:s,chars2:l,lineArray:n}};A.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],o=[],i=0;i<r.length;i++)o[i]=t[r.charCodeAt(i)];e[n][1]=o.join("")}};A.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o};A.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o};A.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var o=Math.min(n,r);if(e==t)return o;for(var i=0,s=1;;){var l=e.substring(o-s),a=t.indexOf(l);if(a==-1)return i;s+=a,(a==0||e.substring(o-s)==t.substring(0,s))&&(i=s,s++)}};A.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;var o=this;function i(v,S,L){for(var p=v.substring(L,L+Math.floor(v.length/4)),c=-1,f="",m,w,E,T;(c=S.indexOf(p,c+1))!=-1;){var N=o.diff_commonPrefix(v.substring(L),S.substring(c)),O=o.diff_commonSuffix(v.substring(0,L),S.substring(0,c));f.length<O+N&&(f=S.substring(c-O,c)+S.substring(c,c+N),m=v.substring(0,L-O),w=v.substring(L+N),E=S.substring(0,c-O),T=S.substring(c+N))}return f.length*2>=v.length?[m,w,E,T,f]:null}var s=i(n,r,Math.ceil(n.length/4)),l=i(n,r,Math.ceil(n.length/2)),a;if(!s&&!l)return null;l?s?a=s[4].length>l[4].length?s:l:a=l:a=s;var u,d,g,h;e.length>t.length?(u=a[0],d=a[1],g=a[2],h=a[3]):(g=a[0],h=a[1],u=a[2],d=a[3]);var y=a[4];return[u,d,g,h,y]};A.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,o=null,i=0,s=0,l=0,a=0,u=0;i<e.length;)e[i][0]==j?(n[r++]=i,s=a,l=u,a=0,u=0,o=e[i][1]):(e[i][0]==de?a+=e[i][1].length:u+=e[i][1].length,o&&o.length<=Math.max(s,l)&&o.length<=Math.max(a,u)&&(e.splice(n[r-1],0,new A.Diff(se,o)),e[n[r-1]+1][0]=de,r--,r--,i=r>0?n[r-1]:-1,s=0,l=0,a=0,u=0,o=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;){if(e[i-1][0]==se&&e[i][0]==de){var d=e[i-1][1],g=e[i][1],h=this.diff_commonOverlap_(d,g),y=this.diff_commonOverlap_(g,d);h>=y?(h>=d.length/2||h>=g.length/2)&&(e.splice(i,0,new A.Diff(j,g.substring(0,h))),e[i-1][1]=d.substring(0,d.length-h),e[i+1][1]=g.substring(h),i++):(y>=d.length/2||y>=g.length/2)&&(e.splice(i,0,new A.Diff(j,d.substring(0,y))),e[i-1][0]=de,e[i-1][1]=g.substring(0,g.length-y),e[i+1][0]=se,e[i+1][1]=d.substring(y),i++),i++}i++}};A.prototype.diff_cleanupSemanticLossless=function(e){function t(y,v){if(!y||!v)return 6;var S=y.charAt(y.length-1),L=v.charAt(0),p=S.match(A.nonAlphaNumericRegex_),c=L.match(A.nonAlphaNumericRegex_),f=p&&S.match(A.whitespaceRegex_),m=c&&L.match(A.whitespaceRegex_),w=f&&S.match(A.linebreakRegex_),E=m&&L.match(A.linebreakRegex_),T=w&&y.match(A.blanklineEndRegex_),N=E&&v.match(A.blanklineStartRegex_);return T||N?5:w||E?4:p&&!f&&m?3:f||m?2:p||c?1:0}for(var n=1;n<e.length-1;){if(e[n-1][0]==j&&e[n+1][0]==j){var r=e[n-1][1],o=e[n][1],i=e[n+1][1],s=this.diff_commonSuffix(r,o);if(s){var l=o.substring(o.length-s);r=r.substring(0,r.length-s),o=l+o.substring(0,o.length-s),i=l+i}for(var a=r,u=o,d=i,g=t(r,o)+t(o,i);o.charAt(0)===i.charAt(0);){r+=o.charAt(0),o=o.substring(1)+i.charAt(0),i=i.substring(1);var h=t(r,o)+t(o,i);h>=g&&(g=h,a=r,u=o,d=i)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=u,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}};A.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;A.whitespaceRegex_=/\s/;A.linebreakRegex_=/[\r\n]/;A.blanklineEndRegex_=/\n\r?\n$/;A.blanklineStartRegex_=/^\r?\n\r?\n/;A.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,o=null,i=0,s=!1,l=!1,a=!1,u=!1;i<e.length;)e[i][0]==j?(e[i][1].length<this.Diff_EditCost&&(a||u)?(n[r++]=i,s=a,l=u,o=e[i][1]):(r=0,o=null),a=u=!1):(e[i][0]==se?u=!0:a=!0,o&&(s&&l&&a&&u||o.length<this.Diff_EditCost/2&&s+l+a+u==3)&&(e.splice(n[r-1],0,new A.Diff(se,o)),e[n[r-1]+1][0]=de,r--,o=null,s&&l?(a=u=!0,r=0):(r--,i=r>0?n[r-1]:-1,a=u=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)};A.prototype.diff_cleanupMerge=function(e){e.push(new A.Diff(j,""));for(var t=0,n=0,r=0,o="",i="",s;t<e.length;)switch(e[t][0]){case de:r++,i+=e[t][1],t++;break;case se:n++,o+=e[t][1],t++;break;case j:n+r>1?(n!==0&&r!==0&&(s=this.diff_commonPrefix(i,o),s!==0&&(t-n-r>0&&e[t-n-r-1][0]==j?e[t-n-r-1][1]+=i.substring(0,s):(e.splice(0,0,new A.Diff(j,i.substring(0,s))),t++),i=i.substring(s),o=o.substring(s)),s=this.diff_commonSuffix(i,o),s!==0&&(e[t][1]=i.substring(i.length-s)+e[t][1],i=i.substring(0,i.length-s),o=o.substring(0,o.length-s))),t-=n+r,e.splice(t,n+r),o.length&&(e.splice(t,0,new A.Diff(se,o)),t++),i.length&&(e.splice(t,0,new A.Diff(de,i)),t++),t++):t!==0&&e[t-1][0]==j?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,o="",i="";break}e[e.length-1][1]===""&&e.pop();var l=!1;for(t=1;t<e.length-1;)e[t-1][0]==j&&e[t+1][0]==j&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)==e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),l=!0):e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),l=!0)),t++;l&&this.diff_cleanupMerge(e)};A.prototype.diff_xIndex=function(e,t){var n=0,r=0,o=0,i=0,s;for(s=0;s<e.length&&(e[s][0]!==de&&(n+=e[s][1].length),e[s][0]!==se&&(r+=e[s][1].length),!(n>t));s++)o=n,i=r;return e.length!=s&&e[s][0]===se?i:i+(t-o)};A.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,o=/>/g,i=/\n/g,s=0;s<e.length;s++){var l=e[s][0],a=e[s][1],u=a.replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(l){case de:t[s]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case se:t[s]='<del style="background:#ffe6e6;">'+u+"</del>";break;case j:t[s]="<span>"+u+"</span>";break}}return t.join("")};A.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==de&&(t[n]=e[n][1]);return t.join("")};A.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==se&&(t[n]=e[n][1]);return t.join("")};A.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var i=e[o][0],s=e[o][1];switch(i){case de:n+=s.length;break;case se:r+=s.length;break;case j:t+=Math.max(n,r),n=0,r=0;break}}return t+=Math.max(n,r),t};A.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case de:t[n]="+"+encodeURI(e[n][1]);break;case se:t[n]="-"+e[n][1].length;break;case j:t[n]="="+e[n][1].length;break}return t.join("	").replace(/%20/g," ")};A.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,o=0,i=t.split(/\t/g),s=0;s<i.length;s++){var l=i[s].substring(1);switch(i[s].charAt(0)){case"+":try{n[r++]=new A.Diff(de,decodeURI(l))}catch{throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var a=parseInt(l,10);if(isNaN(a)||a<0)throw new Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(o,o+=a);i[s].charAt(0)=="="?n[r++]=new A.Diff(j,u):n[r++]=new A.Diff(se,u);break;default:if(i[s])throw new Error("Invalid diff operation in diff_fromDelta: "+i[s])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return n};A.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1};A.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),o=this;function i(m,w){var E=m/t.length,T=Math.abs(n-w);return o.Match_Distance?E+T/o.Match_Distance:T?1:E}var s=this.Match_Threshold,l=e.indexOf(t,n);l!=-1&&(s=Math.min(i(0,l),s),l=e.lastIndexOf(t,n+t.length),l!=-1&&(s=Math.min(i(0,l),s)));var a=1<<t.length-1;l=-1;for(var u,d,g=t.length+e.length,h,y=0;y<t.length;y++){for(u=0,d=g;u<d;)i(y,n+d)<=s?u=d:g=d,d=Math.floor((g-u)/2+u);g=d;var v=Math.max(1,n-d+1),S=Math.min(n+d,e.length)+t.length,L=Array(S+2);L[S+1]=(1<<y)-1;for(var p=S;p>=v;p--){var c=r[e.charAt(p-1)];if(y===0?L[p]=(L[p+1]<<1|1)&c:L[p]=(L[p+1]<<1|1)&c|((h[p+1]|h[p])<<1|1)|h[p+1],L[p]&a){var f=i(y,p-1);if(f<=s)if(s=f,l=p-1,l>n)v=Math.max(1,2*n-l);else break}}if(i(y+1,n)>s)break;h=L}return l};A.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t};A.prototype.patch_addContext_=function(e,t){if(t.length!=0){if(e.start2===null)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=t.substring(e.start2-r,e.start2);o&&e.diffs.unshift(new A.Diff(j,o));var i=t.substring(e.start2+e.length1,e.start2+e.length1+r);i&&e.diffs.push(new A.Diff(j,i)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+i.length,e.length2+=o.length+i.length}};A.prototype.patch_make=function(e,t,n){var r,o;if(typeof e=="string"&&typeof t=="string"&&typeof n>"u")r=e,o=this.diff_main(r,t,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&typeof e=="object"&&typeof t>"u"&&typeof n>"u")o=e,r=this.diff_text1(o);else if(typeof e=="string"&&t&&typeof t=="object"&&typeof n>"u")r=e,o=t;else if(typeof e=="string"&&typeof t=="string"&&n&&typeof n=="object")r=e,o=n;else throw new Error("Unknown call format to patch_make.");if(o.length===0)return[];for(var i=[],s=new A.patch_obj,l=0,a=0,u=0,d=r,g=r,h=0;h<o.length;h++){var y=o[h][0],v=o[h][1];switch(!l&&y!==j&&(s.start1=a,s.start2=u),y){case de:s.diffs[l++]=o[h],s.length2+=v.length,g=g.substring(0,u)+v+g.substring(u);break;case se:s.length1+=v.length,s.diffs[l++]=o[h],g=g.substring(0,u)+g.substring(u+v.length);break;case j:v.length<=2*this.Patch_Margin&&l&&o.length!=h+1?(s.diffs[l++]=o[h],s.length1+=v.length,s.length2+=v.length):v.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,d),i.push(s),s=new A.patch_obj,l=0,d=g,a=u);break}y!==de&&(a+=v.length),y!==se&&(u+=v.length)}return l&&(this.patch_addContext_(s,d),i.push(s)),i};A.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=new A.patch_obj;o.diffs=[];for(var i=0;i<r.diffs.length;i++)o.diffs[i]=new A.Diff(r.diffs[i][0],r.diffs[i][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,t[n]=o}return t};A.prototype.patch_apply=function(e,t){if(e.length==0)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,o=[],i=0;i<e.length;i++){var s=e[i].start2+r,l=this.diff_text1(e[i].diffs),a,u=-1;if(l.length>this.Match_MaxBits?(a=this.match_main(t,l.substring(0,this.Match_MaxBits),s),a!=-1&&(u=this.match_main(t,l.substring(l.length-this.Match_MaxBits),s+l.length-this.Match_MaxBits),(u==-1||a>=u)&&(a=-1))):a=this.match_main(t,l,s),a==-1)o[i]=!1,r-=e[i].length2-e[i].length1;else{o[i]=!0,r=a-s;var d;if(u==-1?d=t.substring(a,a+l.length):d=t.substring(a,u+this.Match_MaxBits),l==d)t=t.substring(0,a)+this.diff_text2(e[i].diffs)+t.substring(a+l.length);else{var g=this.diff_main(l,d,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(g)/l.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(g);for(var h=0,y,v=0;v<e[i].diffs.length;v++){var S=e[i].diffs[v];S[0]!==j&&(y=this.diff_xIndex(g,h)),S[0]===de?t=t.substring(0,a+y)+S[1]+t.substring(a+y):S[0]===se&&(t=t.substring(0,a+y)+t.substring(a+this.diff_xIndex(g,h+S[1].length))),S[0]!==se&&(h+=S[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,o]};A.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var o=e[0],i=o.diffs;if(i.length==0||i[0][0]!=j)i.unshift(new A.Diff(j,n)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>i[0][1].length){var s=t-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(o=e[e.length-1],i=o.diffs,i.length==0||i[i.length-1][0]!=j)i.push(new A.Diff(j,n)),o.length1+=t,o.length2+=t;else if(t>i[i.length-1][1].length){var s=t-i[i.length-1][1].length;i[i.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n};A.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var o=r.start1,i=r.start2,s="";r.diffs.length!==0;){var l=new A.patch_obj,a=!0;for(l.start1=o-s.length,l.start2=i-s.length,s!==""&&(l.length1=l.length2=s.length,l.diffs.push(new A.Diff(j,s)));r.diffs.length!==0&&l.length1<t-this.Patch_Margin;){var u=r.diffs[0][0],d=r.diffs[0][1];u===de?(l.length2+=d.length,i+=d.length,l.diffs.push(r.diffs.shift()),a=!1):u===se&&l.diffs.length==1&&l.diffs[0][0]==j&&d.length>2*t?(l.length1+=d.length,o+=d.length,a=!1,l.diffs.push(new A.Diff(u,d)),r.diffs.shift()):(d=d.substring(0,t-l.length1-this.Patch_Margin),l.length1+=d.length,o+=d.length,u===j?(l.length2+=d.length,i+=d.length):a=!1,l.diffs.push(new A.Diff(u,d)),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}s=this.diff_text2(l.diffs),s=s.substring(s.length-this.Patch_Margin);var g=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);g!==""&&(l.length1+=g.length,l.length2+=g.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===j?l.diffs[l.diffs.length-1][1]+=g:l.diffs.push(new A.Diff(j,g))),a||e.splice(++n,0,l)}}};A.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")};A.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split(`
`),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var i=n[r].match(o);if(!i)throw new Error("Invalid patch string: "+n[r]);var s=new A.patch_obj;for(t.push(s),s.start1=parseInt(i[1],10),i[2]===""?(s.start1--,s.length1=1):i[2]=="0"?s.length1=0:(s.start1--,s.length1=parseInt(i[2],10)),s.start2=parseInt(i[3],10),i[4]===""?(s.start2--,s.length2=1):i[4]=="0"?s.length2=0:(s.start2--,s.length2=parseInt(i[4],10)),r++;r<n.length;){var l=n[r].charAt(0);try{var a=decodeURI(n[r].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+a)}if(l=="-")s.diffs.push(new A.Diff(se,a));else if(l=="+")s.diffs.push(new A.Diff(de,a));else if(l==" ")s.diffs.push(new A.Diff(j,a));else{if(l=="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+a)}r++}}return t};A.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0};A.patch_obj.prototype.toString=function(){var e,t;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?t=this.start2+",0":this.length2==1?t=this.start2+1:t=this.start2+1+","+this.length2;for(var n=["@@ -"+e+" +"+t+` @@
`],r,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case de:r="+";break;case se:r="-";break;case j:r=" ";break}n[o+1]=r+encodeURI(this.diffs[o][1])+`
`}return n.join("").replace(/%20/g," ")};Ar.exports=A;Ar.exports.diff_match_patch=A;Ar.exports.DIFF_DELETE=se;Ar.exports.DIFF_INSERT=de;Ar.exports.DIFF_EQUAL=j});var iu={};Ts(iu,{LogLevel:()=>Sp,logger:()=>zo});var Sp,ou,zo,ws=Fr(()=>{Sp=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i[i.NONE=4]="NONE",i))(Sp||{}),ou=class{level=4;prefix="[LangPlayer]";setLevel(t){this.level=t}enableDebug(){this.level=0}disableAll(){this.level=4}debug(t,...n){this.level<=0&&console.log(`${this.prefix}[${t}]`,...n)}info(t,...n){this.level<=1&&console.log(`${this.prefix}[${t}]`,...n)}warn(t,...n){this.level<=2&&console.warn(`${this.prefix}[${t}]`,...n)}error(t,...n){this.level<=3&&console.error(`${this.prefix}[${t}]`,...n)}perfStart(t){this.level<=0&&performance.mark(`${t}-start`)}perfEnd(t){if(this.level<=0){performance.mark(`${t}-end`),performance.measure(t,`${t}-start`,`${t}-end`);let n=performance.getEntriesByName(t)[0];n&&console.log(`${this.prefix}[Perf] ${t}: ${n.duration.toFixed(2)}ms`)}}},zo=new ou});var wm={};Ts(wm,{default:()=>Ls});module.exports=De(wm);var Y=require("obsidian");var qt=require("obsidian"),q=H(Re(),1),bp=H(Qa(),1);var Rr=H(Re(),1),qa=H(Ce(),1),Ya=(0,Rr.forwardRef)(({url:e,onReady:t,onError:n,onProgress:r,autoPlay:o=!1,startTime:i=0,videoFit:s="cover"},l)=>{let a=(0,Rr.useRef)(null);return(0,Rr.useImperativeHandle)(l,()=>({seekTo:v=>{console.log("[SimplePlayer] seekTo called:",v),a.current?(a.current.currentTime=v,console.log("[SimplePlayer] currentTime set to:",a.current.currentTime)):console.warn("[SimplePlayer] Video ref is null")},getCurrentTime:()=>a.current?.currentTime||0,getDuration:()=>a.current?.duration||0,getSecondsLoaded:()=>{if(a.current){let v=a.current.buffered;if(v.length>0)return v.end(v.length-1)}return 0},playVideo:()=>{a.current?.play().catch(v=>console.error("[SimplePlayer] Play failed:",v))},pauseVideo:()=>{a.current?.pause()},setPlaybackRate:v=>{a.current&&(a.current.playbackRate=v,console.log("[SimplePlayer] playbackRate set to:",v))},getInternalPlayer:()=>a.current})),(0,qa.jsx)("div",{className:"linguaflow-simple-player",children:(0,qa.jsx)("video",{ref:a,src:e,controls:!0,autoPlay:o,onLoadedData:()=>{console.log("[SimplePlayer] Video loaded"),i>0&&a.current&&(a.current.currentTime=i),t?.()},onTimeUpdate:()=>{if(a.current&&r){let v={playing:!a.current.paused,currentTime:a.current.currentTime,duration:a.current.duration,loaded:1,volume:a.current.volume,playbackRate:a.current.playbackRate};r(v)}},onPlay:()=>{if(console.log("[SimplePlayer] Play event triggered"),a.current&&r){let v={playing:!0,currentTime:a.current.currentTime,duration:a.current.duration,loaded:1,volume:a.current.volume,playbackRate:a.current.playbackRate};r(v)}},onPause:()=>{if(console.log("[SimplePlayer] Pause event triggered"),a.current&&r){let v={playing:!1,currentTime:a.current.currentTime,duration:a.current.duration,loaded:1,volume:a.current.volume,playbackRate:a.current.playbackRate};r(v)}},onError:v=>{console.error("[SimplePlayer] Error:",v);let S=a.current?.error;n?.(S||new Error("Video load failed"))},style:{width:"100%",height:"100%",objectFit:s,backgroundColor:"#000"},children:"Your browser does not support video playback."})})});Ya.displayName="SimplePlayer";var ce=H(Re(),1),sp=require("obsidian");we();var us=H(Re(),1),Pr=require("obsidian");we();var as={en:{code:"en",name:"English",nativeName:"English",unicodeRange:[0,127]},zh:{code:"zh",name:"Chinese",nativeName:"\u4E2D\u6587",unicodeRange:[19968,40959]},ja:{code:"ja",name:"Japanese",nativeName:"\u65E5\u672C\u8A9E",unicodeRange:[12352,12543]},ko:{code:"ko",name:"Korean",nativeName:"\uD55C\uAD6D\uC5B4",unicodeRange:[44032,55215]},es:{code:"es",name:"Spanish",nativeName:"Espa\xF1ol",unicodeRange:[0,127]},fr:{code:"fr",name:"French",nativeName:"Fran\xE7ais",unicodeRange:[0,127]},de:{code:"de",name:"German",nativeName:"Deutsch",unicodeRange:[0,127]},pt:{code:"pt",name:"Portuguese",nativeName:"Portugu\xEAs",unicodeRange:[0,127]},ru:{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",unicodeRange:[1024,1279]},ar:{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",unicodeRange:[1536,1791],rtl:!0},it:{code:"it",name:"Italian",nativeName:"Italiano",unicodeRange:[0,127]},nl:{code:"nl",name:"Dutch",nativeName:"Nederlands",unicodeRange:[0,127]},pl:{code:"pl",name:"Polish",nativeName:"Polski",unicodeRange:[0,127]},tr:{code:"tr",name:"Turkish",nativeName:"T\xFCrk\xE7e",unicodeRange:[0,127]},vi:{code:"vi",name:"Vietnamese",nativeName:"Ti\u1EBFng Vi\u1EC7t",unicodeRange:[0,127]},th:{code:"th",name:"Thai",nativeName:"\u0E44\u0E17\u0E22",unicodeRange:[3584,3711]},id:{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia",unicodeRange:[0,127]},hi:{code:"hi",name:"Hindi",nativeName:"\u0939\u093F\u0928\u094D\u0926\u0940",unicodeRange:[2304,2431]},unknown:{code:"unknown",name:"Unknown",nativeName:"Unknown"}},im=[{lang:"zh",regex:/[\u4e00-\u9fa5]/,weight:1},{lang:"ja",regex:/[\u3040-\u309f\u30a0-\u30ff]/,weight:1},{lang:"ko",regex:/[\uac00-\ud7af]/,weight:1},{lang:"ru",regex:/[\u0400-\u04ff]/,weight:1},{lang:"ar",regex:/[\u0600-\u06ff]/,weight:1},{lang:"th",regex:/[\u0e00-\u0e7f]/,weight:1},{lang:"hi",regex:/[\u0900-\u097f]/,weight:1},{lang:"es",regex:/[]/i,weight:.8},{lang:"fr",regex:/[]/i,weight:.8},{lang:"de",regex:/[]/i,weight:.8},{lang:"pt",regex:/[]/i,weight:.8},{lang:"vi",regex:/[]/i,weight:.9},{lang:"pl",regex:/[]/i,weight:.8},{lang:"tr",regex:/[]/i,weight:.8}];function Mo(e){if(!e||e.trim().length===0)return"unknown";if(/[\u4e00-\u9fa5\u3000-\u303F\uFF00-\uFFEF]/.test(e))return"zh";if(/^[\d\s.,!?;:'"()\-]+$/.test(e)||/[a-zA-Z]/.test(e))return"en";let t={};for(let o of im){let i=e.match(o.regex);i&&(t[o.lang]=(t[o.lang]||0)+i.length*o.weight)}let n=0,r="unknown";for(let[o,i]of Object.entries(t))i>n&&(n=i,r=o);return r}function Za(e){let t={},n=e.split(`
`).map(o=>o.trim()).filter(o=>o);if(n.length===0)return t;if(n.length===1){let o=Mo(e);return t[o]=e,t}let r=new Map;for(let o of n){let i;/[\u4e00-\u9fa5\u3000-\u303F\uFF00-\uFFEF]/.test(o)?i="zh":(i=Mo(o),i==="unknown"&&/\d/.test(o)&&(i="en")),r.has(i)||r.set(i,[]),r.get(i).push(o)}for(let[o,i]of r)t[o]=i.join(" ");return t}function ep(e){return as[e]?.rtl||!1}var k=H(Ce(),1),_e={Play:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,k.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),Pause:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),(0,k.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),SkipBack:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("polygon",{points:"19 20 9 12 19 4 19 20"}),(0,k.jsx)("line",{x1:"5",y1:"19",x2:"5",y2:"5"})]}),SkipForward:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("polygon",{points:"5 4 15 12 5 20 5 4"}),(0,k.jsx)("line",{x1:"19",y1:"5",x2:"19",y2:"19"})]}),Repeat:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"m17 2 4 4-4 4"}),(0,k.jsx)("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),(0,k.jsx)("path",{d:"m7 22-4-4 4-4"}),(0,k.jsx)("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),RepeatOne:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"m17 2 4 4-4 4"}),(0,k.jsx)("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),(0,k.jsx)("path",{d:"m7 22-4-4 4-4"}),(0,k.jsx)("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"}),(0,k.jsx)("path",{d:"M11 10h2v6"})]}),Square:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,k.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),Mic:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),(0,k.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,k.jsx)("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),User:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,k.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),Circle:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2.5",children:(0,k.jsx)("circle",{cx:"12",cy:"12",r:"10"})}),ABRepeat:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("text",{x:"5.5",y:"17",fontSize:"13",fontWeight:"700",fontFamily:"sans-serif",fill:"currentColor",stroke:"none",textAnchor:"middle",children:"A"}),(0,k.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"})," ",(0,k.jsx)("text",{x:"18.5",y:"17",fontSize:"13",fontWeight:"700",fontFamily:"sans-serif",fill:"currentColor",stroke:"none",textAnchor:"middle",children:"B"})]}),Zap:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,k.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Gauge:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"m12 14 4-4"}),(0,k.jsx)("path",{d:"M3.34 19a10 10 0 1 1 17.32 0"})]}),Languages:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"m5 8 6 6"}),(0,k.jsx)("path",{d:"m4 14 6-6 2-3"}),(0,k.jsx)("path",{d:"M2 5h12"}),(0,k.jsx)("path",{d:"M7 2h1"}),(0,k.jsx)("path",{d:"m22 22-5-10-5 10"}),(0,k.jsx)("path",{d:"M14 18h6"})]}),Globe:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,k.jsx)("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),Type:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("polyline",{points:"4 7 4 4 20 4 20 7"}),(0,k.jsx)("line",{x1:"9",x2:"15",y1:"20",y2:"20"}),(0,k.jsx)("line",{x1:"12",x2:"12",y1:"4",y2:"20"})]}),Captions:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2"}),(0,k.jsx)("path",{d:"M7 10h4"}),(0,k.jsx)("path",{d:"M13 10h4"}),(0,k.jsx)("path",{d:"M7 14h4"}),(0,k.jsx)("path",{d:"M13 14h4"})]}),Eye:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,k.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),EyeOff:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),(0,k.jsx)("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),(0,k.jsx)("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),(0,k.jsx)("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),Hash:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("line",{x1:"4",x2:"20",y1:"9",y2:"9"}),(0,k.jsx)("line",{x1:"4",x2:"20",y1:"15",y2:"15"}),(0,k.jsx)("line",{x1:"10",x2:"8",y1:"3",y2:"21"}),(0,k.jsx)("line",{x1:"16",x2:"14",y1:"3",y2:"21"})]}),Lock:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,k.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),FileText:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,k.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,k.jsx)("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),(0,k.jsx)("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),(0,k.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),Edit:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,k.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ExternalLink:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,k.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,k.jsx)("line",{x1:"10",x2:"21",y1:"14",y2:"3"})]}),LayoutBottom:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("rect",{x:"3",y:"3",width:"18",height:"8",rx:"2"}),(0,k.jsx)("rect",{x:"3",y:"13",width:"18",height:"8",rx:"2"})]}),LayoutRight:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,k.jsx)("rect",{x:"3",y:"3",width:"8",height:"18",rx:"2"}),(0,k.jsx)("rect",{x:"13",y:"3",width:"8",height:"18",rx:"2"})]})},sm=({currentCue:e,plugin:t,playerRef:n,isPlaying:r,isLooping:o,isRecording:i,isManuallyLocked:s,playbackRate:l,onTogglePlay:a,onToggleLoop:u,onExitLoop:d,onRecord:g,onRateChange:h,onUnlock:y})=>{let v=b(_=>_.subtitles),S=b(_=>_.activeIndex),L=b(_=>_.playNextSegment),p=b(_=>_.playPreviousSegment),c=b(_=>_.setActiveIndex),f=b(_=>_.shadowingEnabled),m=b(_=>_.toggleShadowing),w=b(_=>_.shadowingPauseFactor),E=b(_=>_.setShadowingPauseFactor),T=b(_=>_.enableShadowing),N=b(_=>_.disableShadowing),O=b(_=>_.abRepeatEnabled),R=b(_=>_.pointA),W=b(_=>_.pointB),U=()=>{p()},te=()=>{L()},Z=(()=>{try{let _=t?.settings?.loopCount;return typeof _=="number"&&!isNaN(_)?_:3}catch{return 3}})(),Q=(()=>{try{return!l||typeof l!="number"||isNaN(l)?"1x":l===1||l===1.25||l===1.5||l===.75?`${l}x`:`${l.toFixed(2)}x`}catch{return"1x"}})();return(0,k.jsxs)("div",{className:"linguaflow-subtitle-controls",children:[(0,k.jsxs)("div",{className:"linguaflow-controls-group linguaflow-group-main",children:[(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-previous",onClick:U,disabled:S===0,title:"\u4E0A\u4E00\u53E5 (\u5FEB\u6377\u952E: \u2190)",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.SkipBack})}),(0,k.jsx)("button",{className:`linguaflow-control-btn linguaflow-control-btn-playpause ${r?"playing":"paused"}`,onClick:a,title:r?"\u6682\u505C\u89C6\u9891 (\u7A7A\u683C)":"\u64AD\u653E\u89C6\u9891 (\u7A7A\u683C)",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:r?_e.Pause:_e.Play})}),(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-next",onClick:te,disabled:S===v.length-1,title:"\u4E0B\u4E00\u53E5 (\u5FEB\u6377\u952E: \u2192)",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.SkipForward})})]}),(0,k.jsxs)("div",{className:"linguaflow-controls-group linguaflow-group-learning",children:[o?(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-loop active",onClick:d,title:"\u9000\u51FA\u5FAA\u73AF",disabled:!e,children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.Square})}):(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-loop",onClick:_=>{_.button===0&&!_.ctrlKey&&!_.metaKey&&u()},onContextMenu:_=>{_.preventDefault();let P=new Pr.Menu;[1,2,3,5,10,20,50,100].forEach(I=>{P.addItem(X=>{X.setTitle(`${I} \u6B21`).setChecked(t.settings.loopCount===I).onClick(async()=>{t.settings.loopCount=I,await t.saveSettings()})})}),P.showAtMouseEvent(_.nativeEvent)},title:e?`\u5FAA\u73AF\u64AD\u653E ${String(Z)} \u6B21 (\u53CC\u51FB\u5B57\u5E55)`:"\u8BF7\u5148\u9009\u62E9\u5B57\u5E55\u4EE5\u542F\u7528\u5FAA\u73AF",disabled:!e,children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.RepeatOne})}),(0,k.jsx)("button",{className:`linguaflow-control-btn linguaflow-control-btn-ab ${O||R!==null?"active":""}`,onClick:_=>{let P=b.getState(),re=P.currentTime,I=new Pr.Menu,X=J=>{if(J==null)return"\u672A\u8BBE\u7F6E";let xe=Math.floor(J/60),Ne=Math.floor(J%60);return`${xe}:${Ne.toString().padStart(2,"0")}`};I.addItem(J=>{J.setTitle(`\u8BBE\u7F6E A \u70B9 (\u5F53\u524D: ${X(P.pointA)})`).setIcon("map-pin").onClick(()=>{P.setPointA(re),new(require("obsidian")).Notice(`\u{1F170}\uFE0F A\u70B9\u5DF2\u8BBE\u7F6E: ${X(re)}`),P.pointB&&P.pointB>re&&(P.enableABRepeat(),new(require("obsidian")).Notice("\u{1F501} AB\u5FAA\u73AF\u5DF2\u81EA\u52A8\u542F\u52A8"))})}),I.addItem(J=>{J.setTitle(`\u8BBE\u7F6E B \u70B9 (\u5F53\u524D: ${X(P.pointB)})`).setIcon("flag").setDisabled(!P.pointA&&re===0).onClick(()=>{P.setPointB(re),new(require("obsidian")).Notice(`\u{1F171}\uFE0F B\u70B9\u5DF2\u8BBE\u7F6E: ${X(re)}`),P.pointA&&(P.enableABRepeat(),new(require("obsidian")).Notice("\u{1F501} AB\u5FAA\u73AF\u5DF2\u81EA\u52A8\u542F\u52A8"))})}),I.addSeparator(),I.addItem(J=>{J.setTitle(P.abRepeatEnabled?"\u5173\u95ED AB \u590D\u8BFB":"\u542F\u7528 AB \u590D\u8BFB").setChecked(P.abRepeatEnabled).setDisabled(!P.pointA||!P.pointB).onClick(()=>{P.abRepeatEnabled?(P.disableABRepeat(),new(require("obsidian")).Notice("\u23F9\uFE0F AB\u5FAA\u73AF\u5DF2\u5173\u95ED")):(P.enableABRepeat(),new(require("obsidian")).Notice("\u{1F501} AB\u5FAA\u73AF\u5DF2\u542F\u7528"))})}),I.addItem(J=>{J.setTitle("\u6E05\u9664 AB \u70B9").setIcon("trash").setDisabled(!P.pointA&&!P.pointB).onClick(()=>{P.clearABPoints()})}),I.showAtMouseEvent(_.nativeEvent)},title:"AB\u590D\u8BFB (\u5FEB\u6377\u952E: A/B \u8BBE\u7F6E\u7AEF\u70B9)",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.ABRepeat})}),(0,k.jsx)("button",{className:`linguaflow-control-btn linguaflow-control-btn-record ${i?"active":""}`,onClick:g,title:f?"\u5F71\u5B50\u8DDF\u8BFB\u6A21\u5F0F\u4E0B\u4E0D\u53EF\u5F55\u97F3":e?i?"\u505C\u6B62\u5F55\u97F3 (R)":"\u8DDF\u8BFB\u5F55\u97F3 (R)":"\u8BF7\u5148\u9009\u62E9\u5B57\u5E55\u4EE5\u542F\u7528\u5F55\u97F3",disabled:!e||f,children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:i?_e.Circle:_e.Mic})}),(0,k.jsx)("button",{className:`linguaflow-control-btn linguaflow-control-btn-shadowing ${f?"active":""}`,onClick:_=>{let P=new Pr.Menu;P.addItem(re=>{re.setTitle("\u667A\u80FD\u9002\u5E94 (\u63A8\u8350)").setChecked(f&&w===1.1).onClick(()=>{E(1.1),f||T(),new(require("obsidian")).Notice("\u5DF2\u5207\u6362\u81F3\u667A\u80FD\u9002\u5E94\u6A21\u5F0F\uFF1A\u65F6\u957F + 1\u79D2\u7F13\u51B2")})}),P.addItem(re=>{re.setTitle("\u7D27\u51D1\u6A21\u5F0F (1.0x)").setChecked(f&&w===1).onClick(()=>{E(1),f||T(),new(require("obsidian")).Notice("\u5DF2\u5207\u6362\u81F3\u7D27\u51D1\u6A21\u5F0F")})}),P.addItem(re=>{re.setTitle("\u5BBD\u677E\u6A21\u5F0F (1.5x)").setChecked(f&&w===1.5).onClick(()=>{E(1.5),f||T(),new(require("obsidian")).Notice("\u5DF2\u5207\u6362\u81F3\u5BBD\u677E\u6A21\u5F0F")})}),P.addSeparator(),P.addItem(re=>{re.setTitle("\u5173\u95ED\u5F71\u5B50\u8DDF\u8BFB").setChecked(!f).onClick(()=>{N()})}),P.showAtMouseEvent(_.nativeEvent)},title:e?f?"\u5F71\u5B50\u8DDF\u8BFB\u5DF2\u5F00\u542F":"\u70B9\u51FB\u9009\u62E9\u8DDF\u8BFB\u6A21\u5F0F":"\u8BF7\u5148\u9009\u62E9\u5B57\u5E55\u4EE5\u542F\u7528\u5F71\u5B50\u8DDF\u8BFB",disabled:!e,children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.User})})]}),(0,k.jsxs)("div",{className:"linguaflow-controls-group linguaflow-group-settings",children:[(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-speed",onClick:_=>{let P=new Pr.Menu;[.5,.75,1,1.25,1.5,2].forEach(I=>{P.addItem(X=>{X.setTitle(`${I}x`).setChecked(l===I).onClick(()=>h(I))})}),P.showAtMouseEvent(_.nativeEvent)},title:`\u5F53\u524D\u901F\u5EA6: ${Q}`,children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.Gauge})}),(0,k.jsx)(lm,{}),(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-layout",onClick:async()=>{let P=t.settings.subtitleLayout==="bottom"?"right":"bottom";t.settings.subtitleLayout=P,await t.saveSettings();let re=await t.activateView();re&&re.refresh?.();let I=P==="bottom"?"\u5E95\u90E8":"\u53F3\u4FA7";new(require("obsidian")).Notice(`\u2705 \u5B57\u5E55\u5E03\u5C40\uFF1A${I}`)},title:t.settings.subtitleLayout==="bottom"?"\u5207\u6362\u4E3A\u53F3\u4FA7\u5E03\u5C40":"\u5207\u6362\u4E3A\u5E95\u90E8\u5E03\u5C40",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:t.settings.subtitleLayout==="bottom"?_e.LayoutBottom:_e.LayoutRight})}),(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-load-subtitle",onClick:()=>t.loadExternalSubtitle(),title:"\u52A0\u8F7D\u5916\u90E8\u5B57\u5E55\u6587\u4EF6",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.FileText})}),(0,k.jsx)("button",{className:"linguaflow-control-btn linguaflow-control-btn-note",onClick:()=>t.openStudyNote(),title:"\u6253\u5F00\u5B66\u4E60\u7B14\u8BB0 (\u53F3\u4FA7\u5206\u5C4F)",children:(0,k.jsx)("span",{className:"linguaflow-control-icon",children:_e.Edit})})]}),s&&e&&(0,k.jsx)("div",{className:"linguaflow-controls-status-bar",children:(0,k.jsxs)("div",{className:"linguaflow-status-badge linguaflow-status-locked",title:"\u70B9\u51FB\u5B57\u5E55\u89E3\u9501",children:[(0,k.jsx)("span",{className:"linguaflow-status-icon",children:_e.Lock}),(0,k.jsxs)("span",{className:"linguaflow-status-text",children:["#",typeof e.index=="number"?e.index+1:"?"]})]})})]})},cs=us.default.memo(sm);var lm=()=>{let e=b(a=>a.subtitles),t=b(a=>a.subtitleConfig),n=b(a=>a.updateSubtitleConfig),r=(0,us.useMemo)(()=>{let a=new Set;return e.forEach(u=>{u.detectedLanguages&&u.detectedLanguages.forEach(d=>a.add(d)),u.textEn&&a.add("en"),u.textZh&&a.add("zh")}),Array.from(a)},[e]),o=t.visibleLanguages,i=()=>{let a=o.length;if(a===0)return{icon:_e.EyeOff,label:"\u9690\u85CF"};if(a===1&&o[0]){let u=o[0],d=as[u];return{icon:(0,k.jsx)("span",{style:{fontSize:"16px",fontWeight:600},children:d.nativeName.slice(0,2)}),label:d.nativeName.slice(0,2)}}else return{icon:_e.Languages,label:`${a}\u79CD`}},{icon:s,label:l}=i();return r.length===0?null:(0,k.jsxs)("button",{className:"linguaflow-control-btn linguaflow-control-btn-subtitle",onClick:a=>{let u=new Pr.Menu;u.setNoIcon(),u.addItem(d=>{d.setTitle("\u2728 \u5168\u90E8\u663E\u793A").onClick(()=>{n({visibleLanguages:r,showEnglish:r.includes("en"),showChinese:r.includes("zh")})})}),u.addItem(d=>{d.setTitle("\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F \u5168\u90E8\u9690\u85CF").onClick(()=>{n({visibleLanguages:[],showEnglish:!1,showChinese:!1})})}),u.addSeparator(),r.forEach(d=>{let g=as[d],h=o.includes(d);u.addItem(y=>{y.setTitle(`${g.nativeName} (${g.name})`).setChecked(h).onClick(()=>{let v=h?o.filter(S=>S!==d):[...o,d];n({visibleLanguages:v,showEnglish:v.includes("en"),showChinese:v.includes("zh")})})})}),u.showAtMouseEvent(a.nativeEvent)},title:"\u9009\u62E9\u663E\u793A\u7684\u5B57\u5E55\u8BED\u8A00",children:[(0,k.jsx)("span",{className:"linguaflow-control-icon",children:s}),(0,k.jsx)("span",{className:"linguaflow-control-label",children:l})]})};var Gn=H(Re(),1);var jt=H(Re(),1);var ds=class{capacity;cache;head;tail;size;constructor(t){this.capacity=t,this.cache=new Map,this.head=null,this.tail=null,this.size=0}get(t){let n=this.cache.get(t);if(n)return this.moveToHead(n),n.value}set(t,n){let r=this.cache.get(t);if(r)r.value=n,this.moveToHead(r);else{let o={key:t,value:n,prev:null,next:null};this.cache.set(t,o),this.addToHead(o),this.size++,this.size>this.capacity&&this.removeTail()}}has(t){return this.cache.has(t)}delete(t){let n=this.cache.get(t);return n?(this.removeNode(n),this.cache.delete(t),this.size--,!0):!1}clear(){this.cache.clear(),this.head=null,this.tail=null,this.size=0}getSize(){return this.size}getCapacity(){return this.capacity}keys(){return Array.from(this.cache.keys())}values(){return Array.from(this.cache.values()).map(t=>t.value)}forEach(t){let n=this.head;for(;n;)t(n.value,n.key),n=n.next}moveToHead(t){t!==this.head&&(this.removeNode(t),this.addToHead(t))}addToHead(t){t.prev=null,t.next=this.head,this.head&&(this.head.prev=t),this.head=t,this.tail||(this.tail=t)}removeNode(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeTail(){if(!this.tail)return;let t=this.tail;this.cache.delete(t.key),this.removeNode(t),this.size--}getUsageRate(){return this.size/this.capacity}resize(t){if(t<1)throw new Error("Capacity must be at least 1");for(this.capacity=t;this.size>this.capacity;)this.removeTail()}getStats(){return{size:this.size,capacity:this.capacity,usageRate:this.getUsageRate(),isFull:this.size>=this.capacity}}};var fs=H(Ce(),1),Ao=class{static cache=new ds(500);static parseText(t){let n=this.cache.get(t);if(n)return n;let r=t.split(/(\s+|[.,;:!?'"()[\]{}])/),o=[],i=0;return r.forEach(s=>{if(!s)return;let l=s.trim().length>0&&!/^[.,;:!?'"()[\]{}]$/.test(s);o.push({text:s,index:l?i++:-1,isWord:l})}),this.cache.set(t,o),o}static clearCache(){this.cache.clear()}static getCacheSize(){return this.cache.getSize()}static getCacheStats(){return this.cache.getStats()}},No=jt.default.memo(({text:e,isActive:t,activeWordIndex:n,onWordClick:r})=>{let o=(0,jt.useMemo)(()=>Ao.parseText(e),[e]),i=(0,jt.useRef)([]),s=(0,jt.useRef)(-1);return i.current=o.map(()=>null),(0,jt.useEffect)(()=>{if(!t){if(s.current!==-1){let a=i.current[s.current];a&&a.classList.remove("linguaflow-word-highlight"),s.current=-1}return}let l=o.findIndex(a=>a.index===n);if(s.current!==-1&&s.current!==l){let a=i.current[s.current];a&&a.classList.remove("linguaflow-word-highlight")}if(l!==-1){let a=i.current[l];a&&(a.classList.add("linguaflow-word-highlight"),s.current=l)}else if(s.current!==-1){let a=i.current[s.current];a&&a.classList.remove("linguaflow-word-highlight"),s.current=-1}},[t,n,o]),(0,jt.useEffect)(()=>{s.current=-1},[e]),(0,fs.jsx)("div",{style:{display:"inline",lineHeight:"inherit"},children:o.map((l,a)=>l.isWord?(0,fs.jsx)("span",{ref:u=>i.current[a]=u,className:"linguaflow-clickable-word",onClick:u=>r(l.text,u),title:`\u67E5\u8BE2: ${l.text}`,children:l.text},a):(0,fs.jsx)("span",{className:"linguaflow-punctuation",style:{whiteSpace:"pre-wrap"},children:l.text},a))})},(e,t)=>{let n=e.text===t.text,r=e.isActive===t.isActive,o=e.activeWordIndex===t.activeWordIndex;return n&&r&&o});No.displayName="ClickableText";var Se=H(Ce(),1),Io=Gn.default.memo(({cue:e,index:t,isActive:n,wordByWordHighlight:r,isLooping:o,isRecording:i,isSelected:s,showEnglish:l,showChinese:a,showIndexAndTime:u,activeWordIndex:d,visibleLanguages:g,onSubtitleClick:h,onSubtitleDblClick:y,onSubtitleContextMenu:v,onWordClick:S,onExportSubtitle:L,activeItemRef:p})=>{let c=(0,Gn.useCallback)(w=>{let E=Math.floor(w/60),T=Math.floor(w%60);return`${E}:${T.toString().padStart(2,"0")}`},[]),f=(0,Gn.useMemo)(()=>e.languages&&Object.keys(e.languages).length>0,[e.languages]),m=(0,Gn.useCallback)(()=>f?Object.entries(e.languages).filter(([w])=>g.includes(w)).map(([w,E])=>{if(!E)return null;let T=ep(w),N=["en","es","fr","de","pt","it","nl"].includes(w);return(0,Se.jsx)("div",{className:`linguaflow-subtitle-language ${T?"rtl":""} ${n&&!r?"linguaflow-line-highlight":""}`,children:N?(0,Se.jsx)(No,{text:E,isActive:n&&r,activeWordIndex:d,onWordClick:S}):(0,Se.jsx)("span",{className:"linguaflow-subtitle-language-text",children:E})},w)}):(0,Se.jsxs)(Se.Fragment,{children:[e.textEn&&l&&(0,Se.jsx)("div",{className:`linguaflow-subtitle-item-en ${n&&!r?"linguaflow-line-highlight":""}`,children:(0,Se.jsx)(No,{text:e.textEn,isActive:n&&r,activeWordIndex:d,onWordClick:S})}),e.textZh&&a&&(0,Se.jsx)("div",{className:`linguaflow-subtitle-item-zh ${n&&!r?"linguaflow-line-highlight":""}`,children:e.textZh}),!e.textEn&&!e.textZh&&(0,Se.jsx)("div",{className:`linguaflow-subtitle-item-main ${n&&!r?"linguaflow-line-highlight":""}`,children:(0,Se.jsx)(No,{text:e.text,isActive:n&&r,activeWordIndex:d,onWordClick:S})})]}),[f,e,g,l,a,n,r,d,S]);return(0,Se.jsxs)("div",{ref:n?p:null,className:`linguaflow-subtitle-item ${n?"active":""} ${o?"looping":""} ${i?"recording":""} ${s?"selected":""}`,onClick:()=>h(e),onDoubleClick:()=>y(e),onContextMenu:w=>v(e,w),children:[(0,Se.jsxs)("div",{className:"linguaflow-subtitle-item-header",children:[u&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("span",{className:"linguaflow-subtitle-index",children:["#",t+1]}),(0,Se.jsxs)("span",{className:"linguaflow-subtitle-time",children:[c(e.start)," \u2192 ",c(e.end)]})]}),(0,Se.jsx)("button",{className:"linguaflow-export-btn",onClick:w=>L(e,w),title:"\u5BFC\u51FA\u5B57\u5E55\u5230\u7B14\u8BB0",children:"\u{1F4DD}"}),s&&(0,Se.jsx)("span",{className:"linguaflow-selected-indicator",title:"\u5DF2\u9009\u4E2D",children:"\u25CF"}),o&&(0,Se.jsx)("span",{className:"linguaflow-loop-badge",children:"\u5FAA\u73AF\u4E2D"})]}),(0,Se.jsx)("div",{className:"linguaflow-subtitle-item-text",children:m()})]})});Io.displayName="SubtitleItem";var Ae=H(Re(),1);var Ja=require("obsidian");function Qn(){return Ja.Platform.isMobile||Ja.Platform.isMobileApp}function Mr(){return Qn()?window.innerWidth<768:!1}function am(){return Qn()?window.innerWidth>=768:!1}function um(){return Mr()?"phone":am()?"tablet":"desktop"}function cm(){let e=window.innerWidth;return e<768?"small":e<1024?"medium":"large"}function eu(e){let t=um(),n=window.innerHeight;switch(t){case"phone":return Math.max(200,Math.floor(n*.4));case"tablet":return Math.max(300,Math.floor(n*.5));default:return e}}function dm(){return cm()==="small"}function tp(){return dm(),"bottom"}function np(e){let t=()=>e();return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}}function fm(){if(!Qn())return"high";let e=navigator.hardwareConcurrency||2,t=navigator.deviceMemory;return Mr()?t&&t<2||e<4?"low":e<6?"medium":"high":t&&t<3||e<4?"medium":"high"}function pm(){if("memory"in performance&&performance.memory){let e=performance.memory;return{used:e.usedJSHeapSize/1048576,limit:e.jsHeapSizeLimit/1048576}}return null}function rp(){let e=fm(),t=pm();return!!(e==="low"||t&&t.used/t.limit>.8)}function op(e,t=16){let n=!1,r=null,o=null;return function(...i){r=i,n||(e.apply(this,i),n=!0,o=setTimeout(()=>{n=!1,r&&(e.apply(this,r),r=null)},t))}}var Fo=H(Ce(),1);var _o=Ae.default.forwardRef(({items:e,estimatedItemHeight:t,containerHeight:n,overscan:r=3,renderItem:o,getItemKey:i,className:s=""},l)=>{let a=(0,Ae.useRef)(null),[u,d]=(0,Ae.useState)(0),[g,h]=(0,Ae.useState)(new Map),y=(0,Ae.useCallback)((c,f)=>{h(m=>{if(m.get(c)===f)return m;let w=new Map(m);return w.set(c,f),w})},[]),v=(0,Ae.useMemo)(()=>{let c=[],f=0;for(let m=0;m<e.length;m++){c.push(f);let w=g.get(m)||t;f+=w}return{positions:c,totalHeight:f}},[e.length,g,t]);Ae.default.useImperativeHandle(l,()=>({scrollToIndex:(c,f)=>{let{behavior:m="smooth",offset:w=0}=f||{},E=v.positions[c]??0,T=Math.max(0,E-w);a.current?.scrollTo({top:T,behavior:m})},getScrollElement:()=>a.current}));let{startIndex:S,endIndex:L}=(0,Ae.useMemo)(()=>{let{positions:c}=v;if(c.length===0)return{startIndex:0,endIndex:0};let f=0,m=c.length-1;for(;f<m;){let E=Math.floor((f+m)/2),T=c[E];T!==void 0&&T<u?f=E+1:m=E}f=Math.max(0,f-r),m=f;let w=u+n;for(;m<c.length;){let E=c[m];if(E===void 0||E>=w)break;m++}return m=Math.min(c.length-1,m+r),{startIndex:f,endIndex:m}},[u,n,r,v]),p=(0,Ae.useMemo)(()=>op(c=>{let f=c.target;d(f.scrollTop)},16),[]);return(0,Ae.useEffect)(()=>{let c=a.current;if(c)return c.addEventListener("scroll",p),()=>{c.removeEventListener("scroll",p)}},[p]),(0,Fo.jsx)("div",{ref:a,className:`virtual-scroll-auto-height ${s}`,style:{height:`${n}px`,overflow:"auto",position:"relative"},children:(0,Fo.jsx)("div",{style:{height:`${v.totalHeight}px`,position:"relative"},children:e.slice(S,L+1).map((c,f)=>{let m=S+f,w=i(c,m),E=v.positions[m]??0;return(0,Fo.jsx)(ip,{index:m,top:E,onHeightChange:y,children:o(c,m)},w)})})})});_o.displayName="AutoHeightVirtualScroll";var ip=Ae.default.memo(({index:e,top:t,children:n,onHeightChange:r})=>{let o=(0,Ae.useRef)(null);return(0,Ae.useEffect)(()=>{if(o.current){let i=o.current.offsetHeight;r(e,i)}},[e,r,n]),(0,Fo.jsx)("div",{ref:o,style:{position:"absolute",top:`${t}px`,left:0,right:0},"data-index":e,children:n})});ip.displayName="ItemMeasurer";var qn=H(Re(),1);function ps(){let[e,t]=(0,qn.useState)(null),[n,r]=(0,qn.useState)({width:0,height:0}),o=(0,qn.useCallback)(i=>{t(i)},[]);return(0,qn.useEffect)(()=>{if(!e)return;let i=new ResizeObserver(s=>{if(!s||s.length===0)return;let l=s[0];if(!l)return;let{width:a,height:u}=l.contentRect;r({width:a,height:u})});return i.observe(e),()=>{i.disconnect()}},[e]),{ref:o,width:n.width,height:n.height}}var Mn=H(Ce(),1);function lp({playerRef:e,showList:t=!0,showControls:n=!0,plugin:r,recordingSession:o}){let i=b(C=>C.subtitles),s=b(C=>C.activeIndex),l=b(C=>C.activeWordIndex),a=b(Po),u=i.length>100||rp(),d=b(C=>C.subtitleConfig.showEnglish),g=b(C=>C.subtitleConfig.showChinese),h=b(C=>C.subtitleConfig.showIndexAndTime),y=b(C=>C.subtitleConfig.wordByWordHighlight),v=b(C=>C.segmentLoopEnabled),S=b(C=>C.segmentLoopCurrent),L=b(C=>C.segmentLoopTotal),p=b(C=>C.loopStart),c=b(C=>C.loopEnd),f=b(C=>C.playbackRate),m=b(C=>C.setPlaybackRate),w=b(C=>C.playing),E=b(C=>C.setPlaying),T=(0,ce.useRef)(null),N=(0,ce.useRef)(null),O=(0,ce.useRef)(null),{ref:R,height:W}=ps(),[U,te]=(0,ce.useState)(null),[Z,Q]=(0,ce.useState)(!1),[_,P]=(0,ce.useState)(!1),re=(0,ce.useRef)(0),I=b(C=>C.currentTime);(0,ce.useEffect)(()=>{let C=Math.abs(I-re.current);C>2&&Z&&(console.log("[SubtitleOverlay] \u{1F3AF} Large time jump detected:",C,"s - Unlocking"),Q(!1)),re.current=I},[I,Z]),(0,ce.useEffect)(()=>{!Z&&a&&te(a)},[a,Z]),(0,ce.useEffect)(()=>{if(v){let C=b.getState(),F=.01,ne=i.find(oe=>Math.abs(oe.start-C.loopStart)<F&&Math.abs(oe.end-C.loopEnd)<F);if(ne&&ne.index!==s)return}if(!(_&&!v)){if(u){if(O.current&&s>=0){let C=r?.settings.subtitleLayout==="right",F=0;C?F=W*.6:F=80,O.current.scrollToIndex(s,{behavior:"smooth",offset:F})}}else if(N.current&&T.current){let C=T.current,F=N.current,ne=C.clientHeight,oe=0;if(r?.settings.subtitleLayout==="right")oe=F.offsetTop-ne*.6;else{let mt=F.previousElementSibling;mt?oe=mt.offsetTop:oe=0}oe<0&&(oe=0),C.scrollTo({top:oe,behavior:"smooth"})}}},[s,v,_,u]);let X=(0,ce.useCallback)(C=>{console.log("[SubtitleOverlay] Click - Select:",C.start),U?.id===C.id?b.getState().playing&&e.current?(e.current.pauseVideo(),b.getState().setPlaying(!1),console.log("[SubtitleOverlay] Toggled to pause")):e.current&&(e.current.playVideo(),b.getState().setPlaying(!0),console.log("[SubtitleOverlay] Toggled to play")):(te(C),Q(!0),console.log("[SubtitleOverlay] Locked to:",C.start),b.getState().playing&&e.current?(e.current.pauseVideo(),b.getState().setPlaying(!1),e.current.seekTo(C.start),console.log("[SubtitleOverlay] Paused and seeked to:",C.start)):e.current&&(e.current.seekTo(C.start),console.log("[SubtitleOverlay] Seeked to (paused):",C.start)))},[U?.id,e]),J=(0,ce.useCallback)((C,F)=>{F.preventDefault();let{Menu:ne}=require("obsidian"),oe=new ne;oe.addItem(le=>{le.setTitle("\u{1F4DD} \u63D2\u5165\u5230\u7B14\u8BB0").setIcon("pencil").onClick(()=>{r&&r.insertSubtitleToNote(C)})}),oe.addSeparator(),oe.addItem(le=>{le.setTitle("\u25B6\uFE0F \u8DF3\u8F6C\u64AD\u653E").setIcon("play").onClick(()=>{e.current&&(e.current.seekTo(C.start),e.current.playVideo(),b.getState().setPlaying(!0))})}),oe.showAtMouseEvent(F.nativeEvent)},[r,e]),xe=(0,ce.useCallback)(C=>{console.log("[SubtitleOverlay] Double Click - Jump and play:",C.start),te(C),Q(!1);let F=b.getState();if(F.segmentLoopEnabled){console.log("[SubtitleOverlay] Updating loop to new subtitle:",C.text);let oe=F.segmentLoopTotal||3;F.startSegmentLoop(C.start,C.end,oe,C.index)}else e.current?(e.current.seekTo(C.start),e.current.playVideo(),F.setPlaying(!0),console.log("[SubtitleOverlay] Seeked to:",C.start,"and playing")):console.warn("[SubtitleOverlay] Player ref is null")},[e]),Ne=(C,F)=>{F?.stopPropagation(),console.log("[SubtitleOverlay] Play segment:",C.text),e.current&&(e.current.seekTo(C.start),e.current.playVideo?.(),b.getState().playSegment(C.start,C.end))},lt=(C,F)=>{F?.stopPropagation();let ne=r?.settings.loopCount??-1;console.log("[SubtitleOverlay] Start segment loop:",C.text,"Count:",ne,"Index:",C.index),e.current&&(e.current.seekTo(C.start),e.current.playVideo?.(),b.getState().startSegmentLoop(C.start,C.end,ne,C.index))},Je=async(C,F)=>{if(F?.stopPropagation(),!o)return;let{isRecording:ne,targetSubtitle:oe,startRecording:le,stopRecording:mt}=o;if(ne&&oe?.id===C.id)await mt();else{e.current&&e.current.pauseVideo?.();let{segmentLoopEnabled:Lt}=b.getState();Lt&&b.getState().stopSegmentLoop(),await le(C)}},_t=C=>{C?.stopPropagation(),b.getState().stopSegmentLoop()},An=(0,ce.useCallback)(async(C,F)=>{F.stopPropagation();let ne=C.replace(/[.,;:!?'"()[\]{}]/g,"").trim();if(!ne||(console.log("[SubtitleOverlay] Word clicked:",ne),!r||!r.app))return;let oe=r.app;try{r.settings.autoCopyWordOnLookup&&navigator.clipboard&&await navigator.clipboard.writeText(ne);let le=oe.plugins?.plugins?.["obsidian-language-learner"];if(le&&oe.plugins?.enabledPlugins?.has?.("obsidian-language-learner")){let mt=r.settings.openLanguageLearnerPanel,Lt=F.target;typeof le.queryWord=="function"&&(mt?le.queryWord(ne,Lt):le.queryWord(ne),new sp.Notice(`\u67E5\u8BE2: ${ne}`))}}catch(le){console.error("[SubtitleOverlay] Error:",le)}},[r]),Xn=(0,ce.useCallback)((C,F)=>{F.stopPropagation(),r&&r.insertSubtitleToNote(C)},[r]),Ve=(0,ce.useCallback)(()=>{e.current&&(w?(e.current.pauseVideo(),E(!1)):(e.current.playVideo(),E(!0)))},[w,E,e]),D=(0,ce.useCallback)(()=>{let C=U||a;C&&lt(C)},[U,a,lt]),B=(0,ce.useCallback)(()=>{_t()},[_t]),Le=(0,ce.useCallback)(()=>{let C=U||a;C&&o&&Je(C)},[U,a,o,Je]),V=(0,ce.useCallback)(C=>{m(C),e.current&&e.current.setPlaybackRate(C)},[m,e]),fe=(0,ce.useCallback)(()=>{Q(!1)},[]),at=(0,ce.useCallback)((C,F)=>{let ne=v&&p===C.start&&c===C.end,oe=!!(o?.isRecording&&o?.targetSubtitle?.id===C.id),le=U?.id===C.id;return(0,Mn.jsx)(Io,{cue:C,index:F,isActive:F===s,isLooping:ne,isRecording:oe,isSelected:le,showEnglish:d,showChinese:g,showIndexAndTime:h,wordByWordHighlight:y,activeWordIndex:F===s?l:-1,visibleLanguages:b.getState().subtitleConfig.visibleLanguages,onSubtitleClick:X,onSubtitleDblClick:xe,onSubtitleContextMenu:J,onWordClick:An,onExportSubtitle:Xn,activeItemRef:F===s?N:void 0},C.id)},[v,p,c,o?.isRecording,o?.targetSubtitle?.id,U?.id,s,d,g,h,y,l,X,xe,J,An,Xn]);return(0,Mn.jsxs)("div",{className:"linguaflow-subtitle-container",children:[n&&i.length>0&&r&&(0,Mn.jsx)(cs,{currentCue:U||a,plugin:r,playerRef:e,isPlaying:w,isLooping:v,isRecording:o?.isRecording||!1,isManuallyLocked:Z,playbackRate:f,onTogglePlay:Ve,onToggleLoop:D,onExitLoop:B,onRecord:Le,onRateChange:V,onUnlock:fe}),t&&i.length>0&&(0,Mn.jsx)("div",{className:"linguaflow-subtitle-list",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),ref:R,children:u&&W>0?(0,Mn.jsx)(_o,{ref:O,items:i,estimatedItemHeight:80,containerHeight:W,overscan:5,renderItem:at,getItemKey:C=>C.id,className:"linguaflow-subtitle-items"}):(0,Mn.jsx)("div",{className:"linguaflow-subtitle-items",ref:T,children:i.map((C,F)=>at(C,F))})})]})}var Gt=H(Re(),1),up=H(Ka(),1),cp=H(tu(),1);var ap=H(tu(),1),Nr=class{static dmp=new ap.default;static evaluate(t,n){if(!t||typeof t!="string")throw new Error("Invalid original text");if(!n||typeof n!="string")throw new Error("Invalid transcribed text");console.log("[SpeechEvaluator] Evaluating speech:",{originalLength:t.length,transcribedLength:n.length});let r=this.normalizeText(t),o=this.normalizeText(n);console.log("[SpeechEvaluator] Normalized texts:",{original:r,transcribed:o});let i=this.dmp.diff_main(r,o);this.dmp.diff_cleanupSemantic(i),console.log("[SpeechEvaluator] Diffs computed:",i.length,"changes");let s=this.calculateStats(i,r),l=this.calculateScore(s),a=this.generateDiffHtml(i),u={score:l,accuracy:s.correctWords/s.totalWords,totalWords:s.totalWords,correctWords:s.correctWords,insertedWords:s.insertedWords,deletedWords:s.deletedWords,diffHtml:a,details:{original:t,transcribed:n,normalizedOriginal:r,normalizedTranscribed:o}};return console.log("[SpeechEvaluator] Evaluation result:",{score:u.score,accuracy:(u.accuracy*100).toFixed(1)+"%",correct:u.correctWords,total:u.totalWords}),u}static normalizeText(t){return t.toLowerCase().replace(/[.,!?;:'"]/g,"").replace(/\s+/g," ").trim()}static calculateStats(t,n){let o=n.split(/\s+/).filter(a=>a.length>0).length,i=0,s=0,l=0;for(let[a,u]of t){let d=u.split(/\s+/).filter(g=>g.length>0);a===0?i+=d.length:a===1?s+=d.length:a===-1&&(l+=d.length)}return{totalWords:o,correctWords:i,insertedWords:s,deletedWords:l}}static calculateScore(t){if(t.totalWords===0)return 0;let n=t.correctWords/t.totalWords*100;return n-=t.insertedWords*2,n-=t.deletedWords*3,Math.max(0,Math.min(100,Math.round(n)))}static generateDiffHtml(t){let n=[];for(let[r,o]of t){let i=this.escapeHtml(o);r===0?n.push(`<span class="diff-equal">${i}</span>`):r===1?n.push(`<ins class="diff-insert">${i}</ins>`):r===-1&&n.push(`<del class="diff-delete">${i}</del>`)}return n.join("")}static escapeHtml(t){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,r=>n[r]||r)}static getGrade(t){return t>=90?{grade:"A",color:"#28a745",message:"\u592A\u68D2\u4E86\uFF01\u53D1\u97F3\u63A5\u8FD1\u5B8C\u7F8E\u3002"}:t>=80?{grade:"B",color:"#17a2b8",message:"\u975E\u5E38\u597D\uFF01\u53D1\u97F3\u6E05\u6670\u6613\u61C2\u3002"}:t>=70?{grade:"C",color:"#ffc107",message:"\u4E0D\u9519\uFF01\u90E8\u5206\u53D1\u97F3\u4ECD\u9700\u6539\u8FDB\u3002"}:t>=60?{grade:"D",color:"#fd7e14",message:"\u4E00\u822C\u3002\u8BF7\u9488\u5BF9\u95EE\u9898\u5355\u8BCD\u591A\u52A0\u7EC3\u4E60\u3002"}:{grade:"F",color:"#dc3545",message:"\u7EE7\u7EED\u52A0\u6CB9\uFF01\u5C1D\u8BD5\u653E\u6162\u8BED\u901F\uFF0C\u54AC\u5B57\u66F4\u6E05\u6670\u4E9B\u3002"}}static mergeWithAzureAssessment(t,n){console.log("[SpeechEvaluator] Merging Azure assessment...");let r={pronunciationScore:n.pronunciationScore,accuracyScore:n.accuracyScore,fluencyScore:n.fluencyScore,completenessScore:n.completenessScore,wordDetails:n.words.map(i=>({word:i.word,score:i.accuracyScore,errorType:i.errorType}))},o=Math.round(t.score*.4+n.pronunciationScore*.6);return console.log("[SpeechEvaluator] Final score:",{textScore:t.score,azureScore:n.pronunciationScore,finalScore:o}),{...t,azureAssessment:r,finalScore:o}}};we();var x=H(Ce(),1),Kt={BarChart:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("line",{x1:"12",x2:"12",y1:"20",y2:"10"}),(0,x.jsx)("line",{x1:"18",x2:"18",y1:"20",y2:"4"}),(0,x.jsx)("line",{x1:"6",x2:"6",y1:"20",y2:"16"})]}),Music:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("path",{d:"M9 18V5l12-2v13"}),(0,x.jsx)("circle",{cx:"6",cy:"18",r:"3"}),(0,x.jsx)("circle",{cx:"18",cy:"16",r:"3"})]}),FileText:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,x.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,x.jsx)("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),(0,x.jsx)("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),(0,x.jsx)("line",{x1:"10",x2:"8",y1:"9",y2:"9"})]}),TrendingUp:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),(0,x.jsx)("polyline",{points:"17 6 23 6 23 12"})]}),AlertTriangle:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),(0,x.jsx)("line",{x1:"12",x2:"12",y1:"9",y2:"13"}),(0,x.jsx)("line",{x1:"12",x2:"12.01",y1:"17",y2:"17"})]}),Search:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,x.jsx)("path",{d:"m21 21-4.3-4.3"})]}),Radio:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("circle",{cx:"12",cy:"12",r:"2"}),(0,x.jsx)("path",{d:"M4.93 19.07a10 10 0 0 1 0-14.14"}),(0,x.jsx)("path",{d:"M7.76 16.24a6 6 0 0 1 0-8.49"}),(0,x.jsx)("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49"}),(0,x.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),Mic:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),(0,x.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,x.jsx)("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),Play:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,x.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),Pause:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:[(0,x.jsx)("rect",{x:"6",y:"4",width:"4",height:"16"}),(0,x.jsx)("rect",{x:"14",y:"4",width:"4",height:"16"})]}),X:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,x.jsx)("line",{x1:"18",x2:"6",y1:"6",y2:"18"}),(0,x.jsx)("line",{x1:"6",x2:"18",y1:"6",y2:"18"})]})},dp={None:"\u6B63\u786E",Omission:"\u6F0F\u8BFB",Insertion:"\u591A\u8BFB",Mispronunciation:"\u53D1\u97F3\u9519\u8BEF",UnexpectedBreak:"\u505C\u987F\u5F02\u5E38",MissingBreak:"\u7F3A\u5C11\u505C\u987F",Monotone:"\u8BED\u8C03\u5E73\u6DE1"},gm=Gt.memo(({original:e,transcribed:t})=>{let n=e.split(/\n/).filter(a=>!/[\u4e00-\u9fa5]/.test(a)).join(" "),r=a=>a.toLowerCase().replace(/[.,!?;:'"]/g,"").replace(/\s+/g," ").trim(),o=r(n),i=r(t),s=new cp.default,l=s.diff_main(o,i);return s.diff_cleanupSemantic(l),(0,x.jsx)("div",{className:"linguaflow-diff-text-container",children:l.map((a,u)=>{let[d,g]=a,h="linguaflow-diff-word";return d===0?h+=" correct":d===1?h+=" extra":d===-1&&(h+=" missing"),(0,x.jsx)("span",{className:h,children:g},u)})})},(e,t)=>e.original===t.original&&e.transcribed===t.transcribed),hm=Gt.memo(({words:e})=>(0,x.jsx)("div",{className:"linguaflow-diff-text-container",children:e.map((t,n)=>{let r="linguaflow-diff-word";return t.errorType==="None"?r+=" correct":t.errorType==="Mispronunciation"?r+=" warning":t.errorType==="Omission"?r+=" missing":t.errorType==="Insertion"&&(r+=" extra"),(0,x.jsxs)("span",{className:r,title:`${dp[t.errorType]||t.errorType} (${t.score}\u5206)`,children:[t.word," "]},n)})}),(e,t)=>JSON.stringify(e.words)===JSON.stringify(t.words));function fp({evaluation:e,transcription:t,recordingBlobUrl:n,playerRef:r,targetSubtitle:o,onClose:i,onRetry:s,isVisible:l,isTranscribing:a=!1}){let[u,d]=Gt.useState(null),[g,h]=Gt.useState(!1),[y,v]=Gt.useState(0),[S,L]=Gt.useState(0),p=()=>{r.current&&o&&(r.current.seekTo(o.start),r.current.playVideo?.(),b.getState().playSegment(o.start,o.end))};Gt.useEffect(()=>{if(!n)return;let m=new Audio(n),w=()=>{L(m.duration)},E=()=>{v(m.currentTime)},T=()=>{h(!1)},N=()=>{h(!0)},O=()=>{h(!1)};return m.addEventListener("loadedmetadata",w),m.addEventListener("timeupdate",E),m.addEventListener("ended",T),m.addEventListener("play",N),m.addEventListener("pause",O),d(m),()=>{m.removeEventListener("loadedmetadata",w),m.removeEventListener("timeupdate",E),m.removeEventListener("ended",T),m.removeEventListener("play",N),m.removeEventListener("pause",O),m.pause(),m.src=""}},[n]);let c=()=>{u&&(g?u.pause():u.play())};if(!l||!e&&!a)return null;let f=e?Nr.getGrade(e.finalScore||e.score):{grade:"...",color:"#888",message:"\u6B63\u5728\u5206\u6790\u4E2D..."};return(0,up.createPortal)((0,x.jsx)("div",{className:"linguaflow-modal-overlay",onClick:i,children:(0,x.jsxs)("div",{className:"linguaflow-modal-content",onClick:m=>m.stopPropagation(),children:[(0,x.jsxs)("div",{className:"linguaflow-modal-header",children:[(0,x.jsxs)("div",{className:"linguaflow-modal-title",children:[(0,x.jsx)("span",{className:"linguaflow-modal-icon",children:Kt.BarChart}),(0,x.jsx)("h3",{children:"\u5F55\u97F3\u8BC4\u5206"})]}),(0,x.jsx)("button",{className:"linguaflow-modal-close",onClick:i,children:Kt.X})]}),(0,x.jsxs)("div",{className:"linguaflow-modal-body",children:[(0,x.jsxs)("div",{className:"linguaflow-score-stats-container",children:[(0,x.jsxs)("div",{className:"linguaflow-score-circle-large",style:{borderColor:f.color},children:[(0,x.jsx)("div",{className:"linguaflow-score-value-large",style:{color:f.color},children:e?e.finalScore||e.score:"..."}),(0,x.jsx)("div",{className:"linguaflow-score-grade-large",style:{color:f.color},children:f.grade})]}),(0,x.jsx)("div",{className:"linguaflow-stats-grid",children:a?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u6B63\u5728\u5206\u6790..."}),(0,x.jsx)("span",{className:"linguaflow-stat-value",children:"\u23F3"})]}),(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u6B63\u5728\u8BC4\u5206..."}),(0,x.jsx)("span",{className:"linguaflow-stat-value",children:"\u23F3"})]}),(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u8BF7\u7A0D\u5019..."}),(0,x.jsx)("span",{className:"linguaflow-stat-value",children:"\u23F3"})]})]}):e?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u6587\u672C\u51C6\u786E\u5EA6"}),(0,x.jsxs)("span",{className:"linguaflow-stat-value",children:[e.score,"\u5206"]})]}),(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u6B63\u786E\u8BCD\u6570"}),(0,x.jsxs)("span",{className:"linguaflow-stat-value",children:[e.correctWords,"/",e.totalWords]})]}),e.azureAssessment&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u53D1\u97F3\u8D28\u91CF"}),(0,x.jsxs)("span",{className:"linguaflow-stat-value",children:[e.azureAssessment.pronunciationScore.toFixed(1),"\u5206"]})]}),(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u6D41\u5229\u5EA6"}),(0,x.jsxs)("span",{className:"linguaflow-stat-value",children:[e.azureAssessment.fluencyScore.toFixed(1),"\u5206"]})]}),(0,x.jsxs)("div",{className:"linguaflow-stat-item",children:[(0,x.jsx)("span",{className:"linguaflow-stat-label",children:"\u5B8C\u6574\u5EA6"}),(0,x.jsxs)("span",{className:"linguaflow-stat-value",children:[e.azureAssessment.completenessScore.toFixed(1),"\u5206"]})]})]})]}):null})]}),(0,x.jsx)("div",{className:"linguaflow-score-feedback",style:{borderLeftColor:f.color},children:f.message}),(0,x.jsxs)("div",{className:"linguaflow-modal-section",children:[(0,x.jsxs)("h4",{children:[(0,x.jsx)("span",{className:"linguaflow-section-icon",children:Kt.Music}),"\u97F3\u9891\u5BF9\u6BD4"]}),(0,x.jsxs)("div",{className:"linguaflow-audio-comparison",children:[o&&(0,x.jsxs)("div",{className:"linguaflow-audio-item",children:[(0,x.jsxs)("div",{className:"linguaflow-audio-label",children:[(0,x.jsx)("span",{className:"linguaflow-audio-icon",children:Kt.Radio}),"\u539F\u97F3\u9891"]}),(0,x.jsxs)("div",{className:"linguaflow-audio-player-simple",children:[(0,x.jsx)("button",{className:"linguaflow-audio-play-btn",onClick:p,title:"\u64AD\u653E\u539F\u97F3\u9891\u7247\u6BB5",children:Kt.Play}),(0,x.jsxs)("div",{className:"linguaflow-audio-time",children:[gs(o.start)," / ",gs(o.end)]})]})]}),n&&(0,x.jsxs)("div",{className:"linguaflow-audio-item",children:[(0,x.jsxs)("div",{className:"linguaflow-audio-label",children:[(0,x.jsx)("span",{className:"linguaflow-audio-icon",children:Kt.Mic}),"\u4F60\u7684\u5F55\u97F3"]}),(0,x.jsxs)("div",{className:"linguaflow-audio-player-simple",children:[(0,x.jsx)("button",{className:"linguaflow-audio-play-btn",onClick:c,title:g?"\u6682\u505C":"\u64AD\u653E",children:g?Kt.Pause:Kt.Play}),(0,x.jsxs)("div",{className:"linguaflow-audio-time",children:[gs(y)," / ",gs(S)]})]})]})]})]}),(0,x.jsxs)("div",{className:"linguaflow-modal-section",children:[(0,x.jsxs)("h4",{children:[(0,x.jsx)("span",{className:"linguaflow-section-icon",children:Kt.FileText}),"\u53D1\u97F3\u68C0\u89C6"]}),o&&(0,x.jsx)("div",{className:"linguaflow-original-text",children:o.text}),(0,x.jsxs)("div",{className:"linguaflow-diff-view",children:[(0,x.jsx)("div",{className:"linguaflow-diff-label",children:"\u8BC6\u522B\u7ED3\u679C:"}),e?.azureAssessment?(0,x.jsx)(hm,{words:e.azureAssessment.wordDetails}):e?.diffHtml?(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:e.diffHtml}}):t?(0,x.jsx)(gm,{original:o?.text||"",transcribed:t}):(0,x.jsx)("div",{className:"linguaflow-diff-placeholder",children:"\u6682\u65E0\u8BC6\u522B\u7ED3\u679C"})]})]}),e?.azureAssessment&&e.azureAssessment.wordDetails.filter(m=>m.errorType!=="None").length>0&&(0,x.jsxs)("div",{className:"linguaflow-modal-section",children:[(0,x.jsxs)("h4",{children:[(0,x.jsx)("span",{className:"linguaflow-section-icon",children:Kt.AlertTriangle}),"\u53D1\u97F3\u95EE\u9898"]}),(0,x.jsx)("ul",{className:"linguaflow-error-list",children:e.azureAssessment.wordDetails.filter(m=>m.errorType!=="None").map((m,w)=>(0,x.jsxs)("li",{className:"linguaflow-error-item",children:[(0,x.jsx)("span",{className:`linguaflow-error-tag ${m.errorType.toLowerCase()}`,children:dp[m.errorType]||m.errorType}),(0,x.jsx)("span",{className:"linguaflow-error-word",children:m.word}),":",(0,x.jsxs)("span",{className:"linguaflow-error-score",children:["\u53D1\u97F3\u9519\u8BEF(",m.score.toFixed(1),"\u5206)"]})]},w))})]})]}),(0,x.jsx)("div",{className:"linguaflow-modal-footer",children:(0,x.jsxs)("div",{className:"linguaflow-modal-buttons",children:[s&&(0,x.jsx)("button",{className:"linguaflow-modal-btn-secondary",onClick:s,children:"\u91CD\u8BD5"}),(0,x.jsx)("button",{className:"linguaflow-modal-btn-primary",onClick:i,children:"\u77E5\u9053\u4E86"})]})})]})}),document.body)}function gs(e){if(!Number.isFinite(e)||e<0)return"0:00";let t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`}var an=H(Re(),1),gp=H(Ce(),1),pp=({playerRef:e,isPlaying:t})=>{let n=(0,an.useRef)(null),r=(0,an.useRef)(null),o=(0,an.useRef)(null),i=(0,an.useRef)(null),s=(0,an.useRef)(null),l=(0,an.useRef)(null);return(0,an.useEffect)(()=>{let a=n.current;if(!a)return;let u=a.getContext("2d");if(!u)return;let d=async()=>{try{console.log("[AudioWaveform] Initializing audio...");let h=e.current;if(!h){console.log("[AudioWaveform] No player element");return}let y=null;if("getInternalPlayer"in h&&typeof h.getInternalPlayer=="function"&&(y=h.getInternalPlayer(),console.log("[AudioWaveform] Got media element from getInternalPlayer:",y)),!y){let p=document.querySelectorAll("video"),c=document.querySelectorAll("audio");p.length>0?(y=p[0],console.log("[AudioWaveform] Found video element in DOM")):c.length>0&&(y=c[0],console.log("[AudioWaveform] Found audio element in DOM"))}if(!y){console.log("[AudioWaveform] No media element found");return}console.log("[AudioWaveform] Media element:",y.tagName),r.current||(r.current=new(window.AudioContext||window.webkitAudioContext),console.log("[AudioWaveform] Created AudioContext"));let v=r.current;o.current||(o.current=v.createAnalyser(),o.current.fftSize=512,o.current.smoothingTimeConstant=.8);let S=o.current,L=S.frequencyBinCount;if(i.current=new Uint8Array(L),console.log("[AudioWaveform] Buffer length:",L),l.current)console.log("[AudioWaveform] Audio source already exists");else try{l.current=v.createMediaElementSource(y),l.current.connect(S),S.connect(v.destination),console.log("[AudioWaveform] Audio source connected successfully")}catch(p){p.name==="InvalidStateError"?console.log("[AudioWaveform] Media element already connected to another source"):console.error("[AudioWaveform] Failed to create media source:",p)}}catch(h){console.error("[AudioWaveform] Failed to initialize audio:",h)}};u.fillStyle="rgba(34, 197, 94, 0.3)",u.fillRect(0,a.height-20,a.width,20),console.log("[AudioWaveform] Drew test pattern"),d();let g=()=>{let h=n.current,y=o.current,v=i.current;if(!u||!h||!y||!v){console.log("[AudioWaveform] Draw skipped - missing:",{ctx:!!u,canvas:!!h,analyser:!!y,dataArray:!!v});return}y.getByteFrequencyData(v),u.clearRect(0,0,h.width,h.height);let S=h.width/v.length,L=getComputedStyle(document.body).getPropertyValue("--interactive-accent").trim(),p=(f,m)=>{if(!f)return`rgba(99, 102, 241, ${m})`;if(f.startsWith("rgb")){let w=f.match(/(\d+),\s*(\d+),\s*(\d+)/);if(w)return`rgba(${w[1]}, ${w[2]}, ${w[3]}, ${m})`}if(f.startsWith("#")){let w=f.replace("#",""),E=parseInt(w.substring(0,2),16),T=parseInt(w.substring(2,4),16),N=parseInt(w.substring(4,6),16);return`rgba(${E}, ${T}, ${N}, ${m})`}return`rgba(99, 102, 241, ${m})`},c=u.createLinearGradient(0,h.height,0,0);c.addColorStop(0,p(L,.4)),c.addColorStop(.5,p(L,.8)),c.addColorStop(1,p(L,1));for(let f=0;f<v.length;f++){let m=v[f];if(m===void 0)continue;let w=m/255*h.height,E=f*S,T=h.height-w;u.fillStyle=c,u.fillRect(E,T,S-1,w)}t&&(s.current=requestAnimationFrame(g))};return t?(console.log("[AudioWaveform] Starting draw loop, isPlaying:",t),r.current?.state==="suspended"&&(console.log("[AudioWaveform] Resuming suspended AudioContext"),r.current.resume()),g()):(console.log("[AudioWaveform] Stopping draw loop, isPlaying:",t),s.current!==null&&cancelAnimationFrame(s.current),u.clearRect(0,0,a.width,a.height)),()=>{s.current!==null&&cancelAnimationFrame(s.current)}},[e,t]),(0,gp.jsx)("canvas",{ref:n,className:"linguaflow-audio-waveform",width:1200,height:60})};var Qt="linguaflow-view";function nu(e,t){let n=t.adapter.getResourcePath(e.path);return console.log("[fileUtils] Original path:",e.path),console.log("[fileUtils] Resource URL:",n),n}function hp(e){return["mp4","mkv","webm","ogv","avi","mov","flv","wmv","m4v","3gp","mp3","wav","ogg","m4a","flac","aac","wma","opus"].includes(e.extension.toLowerCase())}function ru(e){let t=typeof e=="string"?e.split(".").pop()?.toLowerCase():e.extension.toLowerCase();return t?["mp3","wav","ogg","m4a","flac","aac","wma","opus"].includes(t):!1}function mp(e){if(!e)return 0;if(/^\d+$/.test(e))return parseInt(e,10);let t=e.split(":").map(Number);if(t.length===2){let[n=0,r=0]=t;return n*60+r}else if(t.length===3){let[n=0,r=0,o=0]=t;return n*3600+r*60+o}return 0}function vp(e){if(isNaN(e)||e===0)return"00:00";let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60);return t>0?`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}var Ge=class e{static INLINE_TIMESTAMP_REGEX=/<\d{2}:\d{2}:\d{2}\.\d{3}>/g;static STYLE_TAG_REGEX=/<\/?[cibu]>/g;static CLASS_STYLE_REGEX=/<c\.[^>]+>/g;static VOICE_TAG_REGEX=/<v\s+[^>]+>/g;static VOICE_CLOSE_REGEX=/<\/v>/g;static ANY_TAG_REGEX=/<[^>]+>/g;static WHITESPACE_REGEX=/\s+/g;static detectFormat(t){let n=t.trim();if(n.startsWith("WEBVTT"))return"vtt";let r=n.split(`
`)[0];return r&&/^\d+\s*$/m.test(r)?"srt":n.includes("[Script Info]")?"ass":"unknown"}static parse(t,n){if(!t||t.trim().length===0)return[];switch(n||this.detectFormat(t)){case"srt":return this.parseSRT(t);case"vtt":return this.parseVTT(t);case"ass":return console.warn("[SubtitleParser] ASS format not fully supported yet"),[];default:return console.error("[SubtitleParser] Unknown subtitle format"),[]}}static parseSRT(t){let n=[],r=t.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++){let i=r[o];if(!i)continue;let s=i.split(`
`).map(f=>f.trim());if(s.length<3)continue;let l=s[0];if(!l)continue;let a=parseInt(l,10);if(isNaN(a))continue;let u=s[1];if(!u)continue;let d=u.match(/(\d{2}:\d{2}:\d{2},\d{3})\s*-->\s*(\d{2}:\d{2}:\d{2},\d{3})/);if(!d||!d[1]||!d[2])continue;let g=this.parseTimestamp(d[1]),h=this.parseTimestamp(d[2]),y=s.slice(2).join(`
`),v=Za(y),S=Object.keys(v),L=S[0]||Mo(y),p=v.en,c=v.zh;n.push({id:`srt-${a}`,index:o,start:g,end:h,text:y,textEn:p,textZh:c,languages:v,detectedLanguages:S,primaryLanguage:L})}return n}static parseVTT(t){let n=[];t=t.replace(/^WEBVTT.*?\n/,""),t=t.replace(/NOTE.*?\n\n/g,"");let r=t.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++){let i=r[o];if(!i)continue;let s=i.split(`
`).map(m=>m.trim());if(s.length===0)continue;let l=-1;for(let m=0;m<s.length;m++){let w=s[m];if(w&&w.includes("-->")){l=m;break}}if(l===-1)continue;let a=s[l];if(!a)continue;let u=a.match(/(\d{2}:\d{2}:\d{2}\.\d{3})\s*-->\s*(\d{2}:\d{2}:\d{2}\.\d{3})/);if(!u||!u[1]||!u[2])continue;let d=this.parseTimestamp(u[1]),g=this.parseTimestamp(u[2]),y=s.slice(l+1).join(`
`);y=this.cleanVTTText(y);let v=Za(y),S=Object.keys(v),L=S[0]||Mo(y),p=v.en,c=v.zh,f=l>0?s[l-1]||`vtt-${o}`:`vtt-${o}`;n.push({id:f,index:o,start:d,end:g,text:y,textEn:p,textZh:c,languages:v,detectedLanguages:S,primaryLanguage:L})}return n}static cleanVTTText(t){return t.replace(e.INLINE_TIMESTAMP_REGEX,"").replace(e.STYLE_TAG_REGEX,"").replace(e.CLASS_STYLE_REGEX,"").replace(e.VOICE_TAG_REGEX,"").replace(e.VOICE_CLOSE_REGEX,"").replace(e.ANY_TAG_REGEX,"").replace(e.WHITESPACE_REGEX," ").trim()}static parseTimestamp(t){t=t.replace(",",".");let n=t.match(/(\d{2}):(\d{2}):(\d{2})\.(\d{3})/);if(!n||!n[1]||!n[2]||!n[3]||!n[4])return 0;let r=parseInt(n[1],10),o=parseInt(n[2],10),i=parseInt(n[3],10),s=parseInt(n[4],10);return r*3600+o*60+i+s/1e3}static formatTimestamp(t,n="srt"){let r=Math.floor(t/3600),o=Math.floor(t%3600/60),i=Math.floor(t%60),s=Math.floor(t%1*1e3),l=n==="srt"?",":".";return`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}${l}${s.toString().padStart(3,"0")}`}static validate(t){if(!t||t.length===0)return!1;for(let n of t)if(!n.id||n.start<0||n.end<=n.start||!n.text)return!1;return!0}static findIndexAtTime(t,n,r=-1){if(!t||t.length===0)return-1;if(r>=0&&r<t.length){let l=t[r];if(l&&n>=l.start&&n<l.end)return r;let a=r+1;if(a<t.length){let u=t[a];if(u&&n>=u.start&&n<u.end)return a;if(l&&u&&n>=l.end&&n<u.start)return-1}}let o=0,i=t.length-1,s=-1;for(;o<=i;){let l=Math.floor((o+i)/2),a=t[l];if(!a)break;if(n>=a.start&&n<a.end)return l;n<a.start?i=l-1:(o=l+1,n>=a.start&&(s=l))}return s}static mergeBilingual(t,n){let r=[];for(let o of t){let i=n.find(s=>Math.abs(s.start-o.start)<.5);r.push({...o,textEn:o.text,textZh:i?.text,text:o.text})}return r}};we();var it=H(Re(),1);we();function yp(e,t=!0,n,r=!1){let o=(0,it.useRef)(null),i=(0,it.useRef)(-1),s=(0,it.useRef)(0),l=(0,it.useRef)(null),a=(0,it.useRef)([]),u=(0,it.useRef)(!1),d=(0,it.useRef)(-1),g=(0,it.useRef)(null),h=(0,it.useRef)(!1),y=b(R=>R.setCurrentTime),v=b(R=>R.setActiveIndex),S=b(R=>R.setActiveWordIndex),L=b(R=>R.subtitles),p=b(R=>R.loopEnabled),c=b(R=>R.loopStart),f=b(R=>R.loopEnd),m=b(R=>R.abRepeatEnabled),w=b(R=>R.pointA),E=b(R=>R.pointB),T=()=>{o.current===null&&(o.current=requestAnimationFrame(O))},N=()=>{o.current!==null&&(cancelAnimationFrame(o.current),o.current=null)},O=()=>{let R=e.current;if(R){try{let W=R.getCurrentTime();if(Math.abs(W-i.current)<.01){o.current=requestAnimationFrame(O);return}i.current=W;let U=b.getState(),te=Date.now();if(te-s.current>100&&(y(W),s.current=te),L.length>0){let Ve=U.activeIndex,D=Ge.findIndexAtTime(L,W,Ve);if(D!==Ve&&v(D),U.subtitleConfig.wordByWordHighlight&&D>=0&&D<L.length){let B=L[D];if(B){let Le=W-B.start,V=B.end-B.start;if(l.current!==B.id){let C=(B.textEn||B.text||"").split(/(\s+|[.,;:!?'"()[\]{}])/);a.current=C.filter(F=>F.trim()&&!/^\s+$/.test(F)&&!/^[.,;:!?'"()[\]{}]$/.test(F)),l.current=B.id}let fe=a.current;if(fe.length>0&&V>0){let at=V/fe.length,C=Math.floor(Le/at),F=Math.min(Math.max(0,C),fe.length-1);F!==U.activeWordIndex&&S(F)}else U.activeWordIndex!==-1&&S(-1)}}else U.activeWordIndex!==-1&&S(-1)}else U.activeWordIndex!==-1&&S(-1);let{shadowingEnabled:Z,shadowingPauseFactor:Q,activeIndex:_}=U;if(!r&&Z&&_>=0&&_<L.length){let Ve=L[_];if(Ve&&!u.current&&d.current!==_&&W>=Ve.end-.1){console.log(`[useMediaSync] \u{1F5E3}\uFE0F Shadowing: End of sentence detected (${_})`),R.pauseVideo(),b.getState().setPlaying(!1),u.current=!0,d.current=_;let D=Ve.end-Ve.start,B=0;Math.abs(Q-1.1)<.01?B=D*1e3*1.1+1e3:Q<=1?B=Math.max(1e3,D*1e3*Q):B=Math.max(1500,D*1e3*Q),console.log(`[useMediaSync] \u{1F5E3}\uFE0F Shadowing: Waiting ${B.toFixed(0)}ms`),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>{console.log("[useMediaSync] \u{1F5E3}\uFE0F Shadowing: Playing next");let Le=_+1;if(Le<L.length){let V=L[Le];V&&e.current&&(e.current.seekTo(V.start,"seconds"),e.current.playVideo(),b.getState().setPlaying(!0))}else console.log("[useMediaSync] \u{1F5E3}\uFE0F Shadowing: End of all subtitles");u.current=!1,g.current=null},B)}}else!Z&&u.current&&(u.current=!1,g.current&&(window.clearTimeout(g.current),g.current=null));let{segmentLoopEnabled:P,segmentLoopTotal:re,segmentLoopCurrent:I,loopStart:X,loopEnd:J,loopEnabled:xe,loopStart:Ne,abRepeatEnabled:lt,pointA:Je,pointB:_t}=U;lt&&Je!==null&&_t!==null?W>=_t?(console.log("[useMediaSync] AB Repeat: jumping to A",Je),R.seekTo(Je,"seconds")):W<Je&&R.seekTo(Je,"seconds"):P&&W>=J?I<re-1?(console.log(`[useMediaSync] \u{1F501} Segment Loop: jumping to start (${I+1}/${re})`),R.seekTo(X,"seconds"),b.getState().incrementLoopCount()):n?.settings.autoPlayNext??!1?(console.log("[useMediaSync] \u2705 Segment Loop finished: auto-playing next segment"),b.getState().playNextSegment()):(console.log("[useMediaSync] \u2705 Segment Loop finished: pausing"),R.pauseVideo(),b.getState().stopSegmentLoop()):xe&&W>=f&&(console.log("[useMediaSync] \u267E\uFE0F Infinite Loop: jumping to start",Ne),R.seekTo(Ne,"seconds"));let{segmentPlayEnabled:An,segmentPlayEnd:Xn}=b.getState();An&&W>=Xn&&(console.log("[useMediaSync] Segment end: pausing"),R.pauseVideo(),b.setState({segmentPlayEnabled:!1}))}catch(W){console.error("[useMediaSync] Error in sync loop:",W)}o.current=requestAnimationFrame(O)}};(0,it.useEffect)(()=>{r&&(g.current&&(console.log("[useMediaSync] \u{1F6AB} Blocked: Clearing shadowing timeout"),window.clearTimeout(g.current),g.current=null),u.current=!1)},[r]),(0,it.useEffect)(()=>{if(!t||!e.current){N();return}let R=b.subscribe(U=>{U.playing&&!h.current?(h.current=!0,console.log("[useMediaSync] \u25B6\uFE0F Resuming sync loop"),T()):!U.playing&&h.current&&(h.current=!1,console.log("[useMediaSync] \u23F8\uFE0F Pausing sync loop to save CPU"),N(),i.current=-1)});return b.getState().playing&&!h.current&&(h.current=!0,T()),()=>{R(),N()}},[t,e]),(0,it.useEffect)(()=>{if(!t||!e.current)return;let R=null,W=()=>{let U=e.current,te=b.getState();if(!te.playing&&U&&L.length>0)try{let Z=U.getCurrentTime(),Q=te.activeIndex,_=Ge.findIndexAtTime(L,Z,Q);_!==Q&&v(_),y(Z)}catch{}};return R=window.setInterval(W,100),()=>{R!==null&&clearInterval(R)}},[t,e,L])}var ht=H(Re(),1);var ze=H(Re(),1);function wp(){let[e,t]=(0,ze.useState)("idle"),[n,r]=(0,ze.useState)(null),[o,i]=(0,ze.useState)(0),s=(0,ze.useRef)(null),l=(0,ze.useRef)([]),a=(0,ze.useRef)(null),u=(0,ze.useRef)(0),d=(0,ze.useRef)(null),g=(0,ze.useCallback)(()=>{d.current&&(clearInterval(d.current),d.current=null),a.current&&(a.current.getTracks().forEach(L=>L.stop()),a.current=null),l.current=[],s.current=null,i(0)},[]),h=(0,ze.useCallback)(async()=>{(s.current||a.current)&&(console.warn("[useAudioRecorder] \u26A0\uFE0F Found active recorder/stream before start, forcing cleanup"),g());try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return r({type:"not_supported",message:"Your browser does not support audio recording"}),t("error"),!1;console.log("[useAudioRecorder] Checking available devices...");try{let E=(await navigator.mediaDevices.enumerateDevices()).filter(T=>T.kind==="audioinput");if(console.log("[useAudioRecorder] Available audio inputs:",E.length),E.length===0)return r({type:"unknown",message:"No microphone device found. Please connect a microphone and try again."}),t("error"),!1;E.forEach((T,N)=>{console.log(`  [${N}] ${T.label||"Unnamed device"} (${T.deviceId})`)})}catch(w){console.warn("[useAudioRecorder] Could not enumerate devices:",w)}console.log("[useAudioRecorder] Requesting microphone permission...");let L;try{L=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})}catch{console.warn("[useAudioRecorder] Failed with constraints, trying basic audio...");try{L=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(E){throw E}}console.log("[useAudioRecorder] Permission granted"),a.current=L;let p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);console.log("[useAudioRecorder] Browser detection:",{isSafari:p,userAgent:navigator.userAgent});let c="";p?MediaRecorder.isTypeSupported("audio/mp4")?c="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?c="audio/aac":MediaRecorder.isTypeSupported("audio/webm")?c="audio/webm":(console.warn("[useAudioRecorder] No supported MIME type found for Safari, trying default"),c=""):MediaRecorder.isTypeSupported("audio/webm")?c="audio/webm":MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?c="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/mp4")&&(c="audio/mp4"),console.log("[useAudioRecorder] Selected MIME type:",c||"default");let f={audioBitsPerSecond:128e3};c&&(f.mimeType=c);let m=new MediaRecorder(L,f);return s.current=m,l.current=[],m.ondataavailable=w=>{w.data.size>0&&(l.current.push(w.data),console.log("[useAudioRecorder] Chunk received:",w.data.size,"bytes"))},m.onerror=w=>{console.error("[useAudioRecorder] MediaRecorder error:",w),r({type:"unknown",message:"Recording error occurred"}),t("error")},m.start(100),u.current=Date.now(),t("recording"),r(null),d.current=window.setInterval(()=>{let w=(Date.now()-u.current)/1e3;i(w)},100),console.log("[useAudioRecorder] Recording started"),!0}catch(L){if(console.error("[useAudioRecorder] Failed to start recording:",L),L instanceof DOMException)switch(L.name){case"NotAllowedError":r({type:"permission_denied",message:"Microphone permission denied. Please allow microphone access in your browser settings."});break;case"NotFoundError":r({type:"unknown",message:`No microphone found. Please:
1. Connect a microphone
2. Check Windows Sound settings
3. Ensure microphone is not disabled`});break;case"NotReadableError":r({type:"unknown",message:"Microphone is being used by another application. Please close other apps using the microphone."});break;case"OverconstrainedError":r({type:"unknown",message:"Microphone does not meet requirements. Trying with different settings..."});break;default:r({type:"unknown",message:`Microphone error: ${L.message||L.name}`})}else r({type:"unknown",message:L instanceof Error?L.message:"Failed to start recording"});return t("error"),g(),!1}},[g]),y=(0,ze.useCallback)(async()=>new Promise(L=>{let p=s.current;if(console.log("[useAudioRecorder] \u23F9\uFE0F Stop requested, recorder:",{exists:!!p,state:p?.state,chunks:l.current.length}),!p||p.state==="inactive"){console.warn("[useAudioRecorder] No active recording"),g(),t("idle"),L(null);return}let c=!1,f=!0,m=()=>{if(c)return;if(c=!0,console.log("[useAudioRecorder] \u2705 Finalizing recording..."),a.current&&a.current.getTracks().forEach(T=>T.stop()),l.current.length===0){console.warn("[useAudioRecorder] No audio data recorded"),g(),t("idle"),L(null);return}let w=p.mimeType,E=new Blob(l.current,{type:w});console.log("[useAudioRecorder] \u{1F4E6} Recording complete:",{size:E.size,type:E.type,duration:o.toFixed(2)+"s",chunks:l.current.length}),g(),t("idle"),L(E)};p.onstop=()=>{console.log("[useAudioRecorder] \u{1F514} MediaRecorder onstop fired"),m()},p.ondataavailable=w=>{!f&&w.data.size>0?(l.current.push(w.data),console.log("[useAudioRecorder] Chunk received:",w.data.size,"bytes")):f&&console.log("[useAudioRecorder] \u26A0\uFE0F Ignoring chunk after stop:",w.data.size,"bytes")};try{if(console.log("[useAudioRecorder] \u{1F6D1} Stopping recorder state:",p.state),(p.state==="recording"||p.state==="paused")&&p.stop(),a.current)console.log("[useAudioRecorder] \u{1F3A4} Stopping media tracks..."),a.current.getTracks().forEach(w=>w.stop());else{let w=p.stream;w&&typeof w.getTracks=="function"&&(console.log("[useAudioRecorder] \u{1F3A4} Stopping tracks from recorder.stream..."),w.getTracks().forEach(E=>E.stop()))}setTimeout(()=>{c||(console.warn("[useAudioRecorder] \u23F0 Stop timeout triggered, forcing finalize"),m())},1e3)}catch(w){console.error("[useAudioRecorder] \u274C Error stopping recorder:",w),m()}}),[g,o]),v=(0,ze.useCallback)(()=>{let L=s.current;L&&L.state==="recording"&&(L.pause(),t("paused"),d.current&&(clearInterval(d.current),d.current=null),console.log("[useAudioRecorder] Recording paused"))},[]),S=(0,ze.useCallback)(()=>{let L=s.current;if(L&&L.state==="paused"){L.resume(),t("recording");let p=o;u.current=Date.now()-p*1e3,d.current=window.setInterval(()=>{let c=(Date.now()-u.current)/1e3;i(c)},100),console.log("[useAudioRecorder] Recording resumed")}},[o]);return(0,ze.useEffect)(()=>()=>{console.log("[useAudioRecorder] Component unmounting, cleaning up..."),g()},[g]),{state:e,error:n,duration:o,start:h,stop:y,pause:v,resume:S,isRecording:e==="recording",isPaused:e==="paused"}}var Et=class extends Error{constructor(n,r,o){super(n);this.code=r;this.status=o;this.name="OpenAIError"}},hs=class{static API_BASE="https://api.openai.com/v1";static WHISPER_ENDPOINT="/audio/transcriptions";static async transcribe(t,n,r){if(console.log("[OpenAIService] Starting transcription...",{blobSize:t.size,blobType:t.type,options:r}),!n||!n.trim())throw new Et("API key is required","MISSING_API_KEY");if(t.size===0)throw new Et("Audio blob is empty","EMPTY_AUDIO");let o=25*1024*1024;if(t.size>o)throw new Et(`Audio file too large: ${(t.size/1024/1024).toFixed(2)}MB (max 25MB)`,"FILE_TOO_LARGE");try{let i=new FormData,s=`recording.${this.getFileExtension(t.type)}`;i.append("file",t,s),i.append("model",r?.model||"whisper-1"),r?.language&&i.append("language",r.language),r?.prompt&&i.append("prompt",r.prompt),r?.temperature!==void 0&&i.append("temperature",r.temperature.toString()),i.append("response_format","json"),console.log("[OpenAIService] Sending request to Whisper API...");let l=await fetch(this.API_BASE+this.WHISPER_ENDPOINT,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:i});if(console.log("[OpenAIService] Response status:",l.status),!l.ok){let d=await l.json().catch(()=>({})),g=d.error?.message||`HTTP ${l.status}: ${l.statusText}`;throw l.status===401?new Et("Invalid API key. Please check your OpenAI API key.","INVALID_API_KEY",401):l.status===429?new Et("Rate limit exceeded. Please try again later.","RATE_LIMIT",429):l.status===413?new Et("Audio file too large for the API.","PAYLOAD_TOO_LARGE",413):new Et(g,d.error?.code,l.status)}let a=await l.json(),u={text:a.text||"",language:a.language,duration:a.duration};return console.log("[OpenAIService] Transcription successful:",{textLength:u.text.length,language:u.language}),u}catch(i){if(console.error("[OpenAIService] Transcription failed:",i),i instanceof Et)throw i;if(i instanceof TypeError&&i.message.includes("fetch"))throw new Et("Network error. Please check your internet connection.","NETWORK_ERROR");let s=i instanceof Error?i.message:"Unknown error";throw new Et(`Transcription failed: ${s}`,"UNKNOWN_ERROR")}}static getFileExtension(t){return{"audio/webm":"webm","audio/mp4":"mp4","audio/mpeg":"mp3","audio/wav":"wav","audio/ogg":"ogg","audio/flac":"flac"}[t]||"webm"}static isValidApiKey(t){return/^sk-[a-zA-Z0-9]{32,}$/.test(t.trim())}static estimateCost(t){return t/60*.006}};var vs=require("obsidian"),ms=class{static async convertToWav(t){try{console.log("[AzurePronunciation] Converting audio to WAV PCM...");let n=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),r=await t.arrayBuffer(),o=await n.decodeAudioData(r),i=16e3,s=o.sampleRate||48e3;console.log(`[AzurePronunciation] Source sample rate: ${s}Hz`);let l;s!==i?(console.log(`[AzurePronunciation] Resampling from ${s}Hz to ${i}Hz`),l=this.resampleAudio(o.getChannelData(0),s,i)):l=o.getChannelData(0);let a=new Int16Array(l.length);for(let g=0;g<l.length;g++){let h=l[g]??0,y=Math.max(-1,Math.min(1,h));a[g]=y<0?y*32768:y*32767}let u=this.createWavHeader(a.length*2,i,1,16),d=new Blob([u,a],{type:"audio/wav"});return console.log("[AzurePronunciation] Converted to WAV:",d.size,"bytes"),await n.close(),d}catch(n){throw console.error("[AzurePronunciation] Audio conversion failed:",n),new Error("Failed to convert audio format. Please try recording again.")}}static resampleAudio(t,n,r){if(n===r)return t;let o=n/r,i=Math.round(t.length/o),s=new Float32Array(i);for(let l=0;l<i;l++){let a=l*o,u=Math.floor(a),d=a-u;if(u+1<t.length){let g=t[u]??0,h=t[u+1]??0;s[l]=g*(1-d)+h*d}else s[l]=t[u]??0}return s}static createWavHeader(t,n,r,o){let i=new ArrayBuffer(44),s=new DataView(i);return this.writeString(s,0,"RIFF"),s.setUint32(4,36+t,!0),this.writeString(s,8,"WAVE"),this.writeString(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*r*o/8,!0),s.setUint16(32,r*o/8,!0),s.setUint16(34,o,!0),this.writeString(s,36,"data"),s.setUint32(40,t,!0),i}static writeString(t,n,r){for(let o=0;o<r.length;o++)t.setUint8(n+o,r.charCodeAt(o))}static async assessPronunciation(t,n,r,o){if(!n||!n.trim())throw new Error("Azure Subscription Key is required");if(!r||!r.trim())throw new Error("Azure region is required");if(!o.referenceText||!o.referenceText.trim())throw new Error("Reference text is required");if(console.log("[AzurePronunciation] Starting assessment..."),console.log("[AzurePronunciation] Reference text:",o.referenceText),console.log("[AzurePronunciation] Audio size:",t.size,"bytes"),console.log("[AzurePronunciation] Audio type:",t.type),t.size<1e3)throw new Error(`\u5F55\u97F3\u6587\u4EF6\u592A\u5C0F\uFF08< 1KB\uFF09\uFF0C\u53EF\u80FD\u5F55\u97F3\u65F6\u95F4\u592A\u77ED\u6216\u6CA1\u6709\u5F55\u5230\u58F0\u97F3\u3002\u8BF7\u786E\u4FDD\uFF1A
1. \u5F55\u97F3\u65F6\u95F4 > 2\u79D2
2. \u9EA6\u514B\u98CE\u6743\u9650\u5DF2\u5F00\u542F
3. \u8BF4\u8BDD\u97F3\u91CF\u8DB3\u591F\u5927`);if(t.size>10*1024*1024)throw new Error("\u5F55\u97F3\u6587\u4EF6\u592A\u5927\uFF08> 10MB\uFF09\uFF0C\u53EF\u80FD\u5F55\u97F3\u65F6\u95F4\u8FC7\u957F\u3002\u5EFA\u8BAE\u5355\u53E5\u5F55\u97F3\u65F6\u957F\u63A7\u5236\u5728 10 \u79D2\u4EE5\u5185\u3002");try{let i=await this.convertToWav(t),s=`https://${r}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1`,l=new URLSearchParams({language:o.language||"en-US",format:"detailed"}),a={ReferenceText:o.referenceText,GradingSystem:"HundredMark",Granularity:"Phoneme",Dimension:"Comprehensive"},u=JSON.stringify(a),d=new TextEncoder().encode(u),g=(0,vs.arrayBufferToBase64)(d.buffer),h="audio/wav; codecs=audio/pcm; samplerate=16000";console.log("[AzurePronunciation] Content-Type:",h),console.log("[AzurePronunciation] Pronunciation Config (JSON):",u),console.log("[AzurePronunciation] Pronunciation Config (Base64):",g),console.log("[AzurePronunciation] Request URL:",`${s}?${l.toString()}`),console.log("[AzurePronunciation] WAV Blob size:",i.size,"type:",i.type);let y=await i.arrayBuffer();console.log("[AzurePronunciation] WAV ArrayBuffer size:",y.byteLength);let v=await(0,vs.requestUrl)({url:`${s}?${l.toString()}`,method:"POST",headers:{"Ocp-Apim-Subscription-Key":n,"Content-Type":h,"Pronunciation-Assessment":g},body:y});if(console.log("[AzurePronunciation] Response status:",v.status),v.status!==200){let L=v.text||JSON.stringify(v.json);throw console.error("[AzurePronunciation] API Error:",v.status,L),v.status===401?new Error("Azure authentication failed. Please check your Subscription Key."):v.status===400?new Error("Invalid request. Please check audio format and reference text."):v.status===403?new Error("Access denied. Please check your Azure subscription status."):new Error(`Azure API error: ${v.status}`)}let S=v.json;return console.log("[AzurePronunciation] Raw result:",S),this.parseResult(S)}catch(i){throw console.error("[AzurePronunciation] Assessment failed:",i),i instanceof Error?i:new Error("Pronunciation assessment failed. Please check your network connection and API credentials.")}}static parseResult(t){if(!t||typeof t!="object")throw new Error("Invalid response structure from Azure API");let n=t.NBest?.[0];if(!n){console.error("[AzurePronunciation] Invalid response:",t),console.error("[AzurePronunciation] Full response structure:",JSON.stringify(t,null,2));let s=[];throw s.push("Azure \u65E0\u6CD5\u8BC6\u522B\u60A8\u7684\u5F55\u97F3"),t.RecognitionStatus==="NoMatch"&&s.push("- \u53EF\u80FD\u539F\u56E0\uFF1A\u5F55\u97F3\u5185\u5BB9\u4E0E\u53C2\u8003\u6587\u672C\u4E0D\u5339\u914D"),t.RecognitionStatus==="InitialSilenceTimeout"&&s.push("- \u53EF\u80FD\u539F\u56E0\uFF1A\u5F55\u97F3\u65F6\u95F4\u592A\u77ED\u6216\u5F00\u59CB\u65F6\u592A\u5B89\u9759"),t.RecognitionStatus==="BabbleTimeout"&&s.push("- \u53EF\u80FD\u539F\u56E0\uFF1A\u80CC\u666F\u566A\u97F3\u592A\u5927"),t.RecognitionStatus==="Error"&&s.push("- \u53EF\u80FD\u539F\u56E0\uFF1A\u97F3\u9891\u683C\u5F0F\u6216\u8D28\u91CF\u95EE\u9898"),s.push(`
\u8BF7\u68C0\u67E5\uFF1A`),s.push("1. \u5F55\u97F3\u65F6\u95F4\u662F\u5426\u8DB3\u591F\uFF08\u5EFA\u8BAE > 2\u79D2\uFF09"),s.push("2. \u97F3\u91CF\u662F\u5426\u8DB3\u591F\u5927\u4E14\u6E05\u6670"),s.push("3. \u662F\u5426\u6309\u7167\u53C2\u8003\u6587\u672C\u6717\u8BFB"),s.push("4. \u5468\u56F4\u73AF\u5883\u662F\u5426\u5B89\u9759"),new Error(s.join(`
`))}let r=n.PronunciationAssessment||n;!r.PronScore&&!r.AccuracyScore&&(console.warn("[AzurePronunciation] Warning: Could not find scores in response."),console.warn("[AzurePronunciation] Response structure:",JSON.stringify(n)));let o=r||{},i=[];if(n.Words&&Array.isArray(n.Words))for(let s of n.Words){let l=s.PronunciationAssessment||s;i.push({word:s.Word||"",accuracyScore:l.AccuracyScore||0,errorType:l.ErrorType||"None",offset:s.Offset,duration:s.Duration})}return{pronunciationScore:o.PronScore||0,accuracyScore:o.AccuracyScore||0,fluencyScore:o.FluencyScore||0,completenessScore:o.CompletenessScore||0,text:n.Display||n.Lexical||"",words:i,raw:t}}static getGrade(t){return t>=90?{grade:"A",color:"#28a745",message:"Excellent! Nearly native-like pronunciation!"}:t>=80?{grade:"B",color:"#007bff",message:"Very good! Clear and understandable pronunciation."}:t>=70?{grade:"C",color:"#ffc107",message:"Good! Some pronunciation improvements needed."}:t>=60?{grade:"D",color:"#fd7e14",message:"Fair. Consider practicing more on problem areas."}:{grade:"F",color:"#dc3545",message:"Keep practicing! Focus on accuracy and clarity."}}static formatScoreDetails(t){let n=[];n.push(`Overall: ${t.pronunciationScore.toFixed(1)}/100`),n.push(`Accuracy: ${t.accuracyScore.toFixed(1)}/100`),n.push(`Fluency: ${t.fluencyScore.toFixed(1)}/100`),n.push(`Completeness: ${t.completenessScore.toFixed(1)}/100`);let r=t.words.filter(o=>o.errorType!=="None");return r.length>0&&(n.push(`
Errors found in ${r.length} word(s):`),r.forEach(o=>{n.push(`  - ${o.word}: ${o.errorType}`)})),n.join(`
`)}};we();function ys(e){let{start:t,stop:n,pause:r,resume:o,isRecording:i,isPaused:s,duration:l,error:a}=wp(),[u,d]=(0,ht.useState)(!1),[g,h]=(0,ht.useState)(null),[y,v]=(0,ht.useState)(null),[S,L]=(0,ht.useState)(null),[p,c]=(0,ht.useState)(null),[f,m]=(0,ht.useState)(null);(0,ht.useEffect)(()=>()=>{p&&(console.debug("[useRecordingSession] Revoking Blob URL"),URL.revokeObjectURL(p))},[p]);let w=b(R=>R.activeIndex),E=b(R=>R.subtitles),T=(0,ht.useCallback)(async R=>{L(null),h(null),v(null);let W=R;if(W||w>=0&&w<E.length&&(W=E[w]),m(W||null),!W){L("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5B57\u5E55\u9879");return}p&&(URL.revokeObjectURL(p),c(null)),await t()||L("Failed to start recording")},[t,p,w,E]),N=(0,ht.useCallback)(async(R,W)=>{console.log("[RecordingSession] transcribeAndEvaluate started"),d(!0),L(null);let U=e.settings.sttApiKey||e.settings.openaiApiKey;try{if(!R||R.size===0)throw new Error("Invalid audio data");if(!W||!W.text)throw new Error("Reference subtitle is missing or invalid");if(console.log("[RecordingSession] Audio blob size:",R.size),console.log("[RecordingSession] Reference text:",W.text),e.settings.speechProvider==="azure"){let te=e.settings.sttApiKey||e.settings.azureSubscriptionKey,Z=e.settings.sttBaseUrl||e.settings.azureRegion;if(!te||!Z)throw new Error("\u8BF7\u5728\u63D2\u4EF6\u8BBE\u7F6E\u4E2D\u914D\u7F6E Azure Subscription Key \u548C Region");console.log("[RecordingSession] Using Azure Speech Services...");let Q=await ms.assessPronunciation(R,te,Z,{referenceText:W.text,language:"en-US",granularity:"Word",dimension:"Comprehensive"});console.log("[RecordingSession] Azure result:",Q),h(Q.text);let _={score:Q.pronunciationScore,accuracy:Q.accuracyScore/100,totalWords:Q.words.length,correctWords:Q.words.filter(P=>P.errorType==="None").length,insertedWords:Q.words.filter(P=>P.errorType==="Insertion").length,deletedWords:Q.words.filter(P=>P.errorType==="Omission").length,diffHtml:"",details:{original:W.text,transcribed:Q.text,normalizedOriginal:W.text.toLowerCase(),normalizedTranscribed:Q.text.toLowerCase()},azureAssessment:{pronunciationScore:Q.pronunciationScore,accuracyScore:Q.accuracyScore,fluencyScore:Q.fluencyScore,completenessScore:Q.completenessScore,wordDetails:Q.words.map(P=>({word:P.word,score:P.accuracyScore,errorType:P.errorType}))},finalScore:Q.pronunciationScore};console.log("[RecordingSession] Setting evaluation result (Azure):",_),v(_),console.log("[RecordingSession] \u2705 Evaluation state updated (Azure)")}else{if(!U||!U.trim())throw new Error("\u8BF7\u5728\u63D2\u4EF6\u8BBE\u7F6E\u4E2D\u914D\u7F6E OpenAI API Key");console.log("[RecordingSession] Using OpenAI Whisper...");let te=await hs.transcribe(R,U,{language:"en",prompt:W.text});console.log("[RecordingSession] Transcription result:",te.text),h(te.text),console.log("[RecordingSession] Evaluating speech...");let Z=Nr.evaluate(W.text,te.text);console.log("[RecordingSession] Evaluation score:",Z.score),console.log("[RecordingSession] Setting evaluation result (OpenAI):",Z),v(Z),console.log("[RecordingSession] \u2705 Evaluation state updated (OpenAI)")}}catch(te){console.error("[RecordingSession] \u274C Error in transcribeAndEvaluate:",te),L(te.message||"Processing failed")}finally{console.log("[RecordingSession] Setting isTranscribing to false"),d(!1),console.log("[RecordingSession] \u2705 transcribeAndEvaluate completed")}},[e.settings]),O=(0,ht.useCallback)(async()=>{console.log("[RecordingSession] Stopping recording...");try{let R=await n();if(!R){console.error("[RecordingSession] No audio blob received"),L("No audio recorded");return}console.log("[RecordingSession] Audio blob size:",R.size,"bytes");let W=URL.createObjectURL(R),U=e.settings.speechProvider==="openai"||e.settings.speechProvider==="custom"||e.settings.speechProvider==="azure";console.log("[RecordingSession] Speech provider:",e.settings.speechProvider),console.log("[RecordingSession] Can transcribe:",U),console.log("[RecordingSession] Target subtitle:",f?f.text:"None"),U&&f&&(console.log("[RecordingSession] Setting isTranscribing = true BEFORE setting blobUrl"),d(!0)),console.log("[RecordingSession] Setting recordingBlobUrl:",W.substring(0,50)+"..."),c(W),U&&f?(console.log("[RecordingSession] Starting transcription and evaluation..."),await N(R,f),console.log("[RecordingSession] Transcription and evaluation completed")):f?(console.error("[RecordingSession] Cannot transcribe with current provider"),L(`Speech provider "${e.settings.speechProvider}" not supported for transcription`)):(console.error("[RecordingSession] No reference subtitle for evaluation"),L("No reference subtitle selected for evaluation"))}catch(R){console.error("[RecordingSession] Error in stopRecording:",R),L(R instanceof Error?R.message:"Failed to stop recording")}},[n,e.settings,f,N]);return{isRecording:i,isPaused:s,duration:l,recorderError:a,isTranscribing:u,transcriptionResult:g,evaluation:y,sessionError:S,recordingBlobUrl:p,targetSubtitle:f,startRecording:T,stopRecording:O,pauseRecording:r,resumeRecording:o}}var K=H(Ce(),1),Ss=class extends qt.ItemView{constructor(n,r){super(n);this.plugin=r;this.playerRef=q.createRef()}root=null;currentSource=null;playerRef;getViewType(){return Qt}getDisplayText(){return"LangPlayer"}getIcon(){return"play-circle"}getState(){let n=super.getState();if(this.currentSource){let r=this.getCurrentTime();r>0&&(this.currentSource.timestamp=r);let o={...this.currentSource};this.currentSource.type==="local"&&this.currentSource.file&&(o.filePath=this.currentSource.file.path,delete o.file),n.source=o}return n}async setState(n,r){if(await super.setState(n,r),n.source){let o=n.source;if(o.type==="local"&&o.filePath){let i=this.app.vault.getAbstractFileByPath(o.filePath);if(i instanceof qt.TFile)o.file=i,o.url=nu(i,this.app.vault),console.log("[LinguaFlowView] Refreshed URL for local file:",o.url);else{console.warn("[LinguaFlowView] \u65E0\u6CD5\u6062\u590D\u6587\u4EF6\uFF0C\u8DEF\u5F84\u4E0D\u5B58\u5728:",o.filePath);return}}await this.loadMedia(o)}}async onOpen(){console.log("[LinguaFlowView] Opening view");let n=this.containerEl.children[1];n&&(n.empty(),n.addClass("linguaflow-view")),this.mountReact()}async onClose(){console.log("[LinguaFlowView] Closing view"),this.root&&(this.root.unmount(),this.root=null)}mountReact(){let n=this.containerEl.children[1];this.root=bp.createRoot(n),this.renderApp()}renderApp(){this.root&&this.root.render((0,K.jsx)(q.StrictMode,{children:(0,K.jsx)(su,{children:(0,K.jsx)(mm,{source:this.currentSource,playerRef:this.playerRef,plugin:this.plugin})})}))}refresh(){console.log("[LinguaFlowView] Refreshing view"),this.renderApp()}async loadMedia(n){if(this.currentSource){let r=n.type==="local"&&this.currentSource.type==="local"&&n.file?.path===this.currentSource.file?.path,o=n.type==="url"&&this.currentSource.type==="url"&&n.url===this.currentSource.url;if(r||o){if(console.log("[LinguaFlowView] Same media source, skipping reload and just seeking"),n.timestamp!==void 0&&n.timestamp>=0&&(this.currentSource.timestamp=n.timestamp,this.playerRef.current)){this.playerRef.current.seekTo(n.timestamp),this.playerRef.current.playVideo();let{useMediaStore:i}=(we(),De(Ze));i.getState().setPlaying(!0)}return}}console.log("[LinguaFlowView] Loading media:",n),b.getState().reset(),this.currentSource=n,this.renderApp(),n.timestamp&&n.timestamp>0&&setTimeout(()=>{this.seekTo(n.timestamp)},1e3)}async loadFile(n,r){if(!hp(n))throw new Error(`Unsupported file type: ${n.extension}`);let o=nu(n,this.app.vault);await this.loadMedia({type:"local",url:o,displayName:n.name,timestamp:r,file:n})}seekTo(n){this.playerRef.current&&this.playerRef.current.seekTo(n)}getCurrentTime(){return this.playerRef.current?.getCurrentTime()||0}};function mm({source:e,playerRef:t,plugin:n}){let[r,o]=q.useState(null),[i,s]=q.useState(!1),[l,a]=q.useState(!1),[u,d]=q.useState(Qn()),[g,h]=q.useState(Mr()),[y,v]=q.useState(window.innerWidth),[S,L]=q.useState(()=>{let D=n.settings.playerHeight??400;return eu(D)}),[p,c]=q.useState(()=>n.settings.subtitleWidth??400),[f,m]=q.useState(!1),[w,E]=q.useState(!1);q.useEffect(()=>np(()=>{d(Qn()),h(Mr()),v(window.innerWidth);let B=n.settings.playerHeight??400;L(eu(B))}),[n.settings]),q.useEffect(()=>{y<768&&n.settings.subtitleLayout!=="bottom"&&tp()!==n.settings.subtitleLayout&&console.log("[LinguaFlowApp] Narrow screen detected, recommending bottom layout")},[y,n.settings.subtitleLayout]);let T=b(D=>D.subtitles),N=b(D=>D.activeIndex),O=T[N]||null,R=b(D=>D.segmentLoopEnabled),W=b(D=>D.playbackRate),U=b(D=>D.setPlaybackRate),te=b(D=>D.playing),Z=b(D=>D.setPlaying),Q=b(D=>D.videoFit),_=q.useMemo(()=>e?e.type==="local"&&e.file?ru(e.file):ru(e.url):!1,[e]),P=ys(n);q.useEffect(()=>{e?.timestamp!==void 0&&e.timestamp>=0&&t.current&&i&&(console.log("[LinguaFlowApp] Source changed with timestamp, seeking to:",e.timestamp),setTimeout(()=>{t.current&&(t.current.seekTo(e.timestamp),t.current.playVideo(),Z(!0))},100))},[e,i]),q.useEffect(()=>{t.current&&(b.getState().setPlayerRef(t.current),console.log("[LinguaFlowApp] Synced playerRef to Store"),n.playerRef&&(n.playerRef.current=t.current))},[t.current,n]);let re=P.isRecording||l;yp(t,i,n,re);let I=q.useCallback(()=>{t.current&&(te?(t.current.pauseVideo(),Z(!1)):(t.current.playVideo(),Z(!0)))},[te,Z]),X=q.useCallback(()=>{if(O){let D=n.settings.loopCount??3,B=b.getState().activeIndex;b.getState().startSegmentLoop(O.start,O.end,D,B)}},[O,n]),J=q.useCallback(()=>{b.getState().stopSegmentLoop()},[]),xe=q.useCallback(()=>{O&&P&&(P.isRecording?P.stopRecording():(t.current&&te&&(console.log("[LinguaFlowView] Pausing video for recording"),t.current.pauseVideo(),Z(!1)),P.startRecording(O)))},[O,P,te,Z]),Ne=q.useCallback(D=>{U(D),t.current&&t.current.setPlaybackRate(D)},[U]),lt=q.useCallback(()=>E(!1),[]),Je=()=>{y>=768&&n.settings.subtitleLayout==="right"?(c(400),n.settings.subtitleWidth=400):(L(400),n.settings.playerHeight=400),n.saveSettings()},_t=D=>{if("button"in D&&D.button!==0||"touches"in D&&D.touches.length>1||"detail"in D&&D.detail===2)return;D.type==="touchstart"&&D.cancelable,m(!0);let B=y>=768&&n.settings.subtitleLayout==="right",Le=p,V=S,fe=!1,at=F=>{let ne,oe;if("touches"in F){let le=F;if(le.touches&&le.touches.length>0)ne=le.touches[0].clientX,oe=le.touches[0].clientY;else return}else ne=F.clientX,oe=F.clientY;fe||(window.requestAnimationFrame(()=>{let le=document.querySelector(".linguaflow-container");if(!le)return;let mt=le.getBoundingClientRect();if(B){let zt=Math.max(50,mt.right-ne);Le=zt,c(zt);let Dt=document.querySelector(".linguaflow-subtitle-section");Dt&&(Dt.style.width=`${zt}px`,Dt.style.minWidth=`${zt}px`,Dt.style.maxWidth=`${zt}px`)}else{let Lt=document.querySelector(".linguaflow-header"),zt=Lt?Lt.getBoundingClientRect().height:0,Dt=mt.height-zt,au=50,Lp=Math.max(au,Dt-50),uu=Math.max(au,Math.min(Lp,oe-mt.top-zt));V=uu,L(uu)}fe=!1}),fe=!0)},C=()=>{m(!1),document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",at),document.removeEventListener("touchend",C),B?n.settings.subtitleWidth=Le:n.settings.playerHeight=V,n.saveSettings()};document.addEventListener("mousemove",at),document.addEventListener("mouseup",C),document.addEventListener("touchmove",at,{passive:!1}),document.addEventListener("touchend",C)};if(q.useEffect(()=>{o(null),s(!1),b.getState().reset(),e?.type==="local"&&e.file&&(async()=>{let B=e.file;try{let Le=B.basename,V=B.parent;if(!V)return;let fe=V.path==="/"?"":V.path,at=["srt","vtt"],C=["",".zh",".en",".chs",".cht",".eng",".jp",".ja",".ko",".kr",".zh-CN",".zh-TW"],F=n.app.vault;for(let ne of at)for(let oe of C){let le=`${Le}${oe}.${ne}`,mt=fe?`${fe}/${le}`:le,Lt=F.getAbstractFileByPath(mt);if(Lt instanceof qt.TFile){console.log("[LinguaFlowApp] Found subtitle:",Lt.path);let zt=await F.read(Lt),Dt=Ge.parse(zt);if(Dt.length>0){b.getState().setSubtitles(Dt),console.log("[LinguaFlowApp] Loaded",Dt.length,"subtitles");return}}}console.log("[LinguaFlowApp] No subtitle file found for",B.name)}catch(Le){console.error("[LinguaFlowApp] Failed to load subtitles:",Le)}})()},[e,n]),q.useEffect(()=>{console.log("[LinguaFlowView] State update:",{isRecording:P.isRecording,hasBlob:!!P.recordingBlobUrl,error:P.sessionError,isTranscribing:P.isTranscribing,showModal:l}),!P.isRecording&&P.recordingBlobUrl&&!P.sessionError?l||(console.log("[LinguaFlowView] Triggering Modal Open"),a(!0)):P.sessionError&&(console.log("[LinguaFlowView] Session Error:",P.sessionError),a(!1),new qt.Notice(`\u5F55\u97F3\u5931\u8D25: ${P.sessionError}`))},[P.isRecording,P.recordingBlobUrl,P.sessionError,P.isTranscribing]),q.useEffect(()=>{P.sessionError&&console.error("[LinguaFlowView] Session error:",P.sessionError)},[P.sessionError]),q.useEffect(()=>{let D=B=>{let Le=B.target;if(Le.tagName==="INPUT"||Le.tagName==="TEXTAREA"||Le.isContentEditable||Le.classList.contains("cm-content")||Le.closest(".cm-editor")||Le.closest(".markdown-preview-view")||B.defaultPrevented)return;let V=b.getState(),fe=t.current;if(!fe)return;let C={...{prevSubtitle:"ArrowLeft",nextSubtitle:"ArrowRight",rewind:"Shift+ArrowLeft",fastForward:"Shift+ArrowRight",playPause:" ",record:"r"},...n.settings.hotkeys};if(Ir(B,C.playPause))B.preventDefault(),V.playing?(fe.pauseVideo(),Z(!1)):(fe.playVideo(),Z(!0));else if(Ir(B,C.rewind)){B.preventDefault();let F=fe.getCurrentTime();fe.seekTo(Math.max(0,F-5))}else if(Ir(B,C.prevSubtitle)){if(B.preventDefault(),V.activeIndex>0){let F=V.subtitles[V.activeIndex-1];F&&(fe.seekTo(F.start),V.setActiveIndex(V.activeIndex-1))}}else if(Ir(B,C.fastForward)){B.preventDefault();let F=fe.getCurrentTime();fe.seekTo(F+5)}else if(Ir(B,C.nextSubtitle)){if(B.preventDefault(),V.activeIndex<V.subtitles.length-1){let F=V.subtitles[V.activeIndex+1];F&&(fe.seekTo(F.start),V.setActiveIndex(V.activeIndex+1))}}else if(Ir(B,C.record)){if(B.preventDefault(),P.isRecording)P.stopRecording();else if(V.activeIndex>=0){let F=V.subtitles[V.activeIndex];F&&(V.playing&&(fe.pauseVideo(),Z(!1)),P.startRecording(F))}}else if(B.key.toLowerCase()==="a"){B.preventDefault();let F=V.currentTime;V.setPointA(F),new qt.Notice(`\u{1F170}\uFE0F A\u70B9\u5DF2\u8BBE\u7F6E: ${F.toFixed(2)}s`)}else if(B.key.toLowerCase()==="b"){B.preventDefault();let F=V.currentTime,ne=V.pointA;ne===null||F<=ne?new qt.Notice("\u26A0\uFE0F B\u70B9\u5FC5\u987B\u5728A\u70B9\u4E4B\u540E"):(V.setPointB(F),V.enableABRepeat(),new qt.Notice(`\u{1F171}\uFE0F B\u70B9\u5DF2\u8BBE\u7F6E: ${F.toFixed(2)}s - AB\u5FAA\u73AF\u5DF2\u542F\u52A8`))}else if(B.key==="["){if(V.activeIndex>0){let F=V.subtitles[V.activeIndex-1];F&&(fe.seekTo(F.start),V.setActiveIndex(V.activeIndex-1))}}else if(B.key==="]"&&V.activeIndex<V.subtitles.length-1){let F=V.subtitles[V.activeIndex+1];F&&(fe.seekTo(F.start),V.setActiveIndex(V.activeIndex+1))}};return window.addEventListener("keydown",D,!0),()=>{window.removeEventListener("keydown",D,!0)}},[t,P,Z]),q.useEffect(()=>{P.sessionError&&console.error("[LinguaFlowView] Session error:",P.sessionError)},[P.sessionError]),!e)return(0,K.jsx)("div",{className:"linguaflow-container"});if(r)return(0,K.jsxs)("div",{className:"linguaflow-error",children:[(0,K.jsx)("div",{className:"linguaflow-error-icon",children:"\u26A0\uFE0F"}),(0,K.jsx)("h2",{children:"Error loading media"}),(0,K.jsx)("p",{children:r}),(0,K.jsx)("button",{onClick:()=>o(null),className:"linguaflow-retry-btn",children:"Retry"})]});let An=y<768?"bottom":n.settings.subtitleLayout,Xn=An==="right"?"linguaflow-layout-right":"linguaflow-layout-bottom",Ve=An==="right";return(0,K.jsxs)("div",{className:`linguaflow-container ${Xn} ${f?"resizing":""}`,children:[(0,K.jsx)("div",{className:"linguaflow-header",children:(0,K.jsx)("h2",{children:e.displayName||"Media Player"})}),(0,K.jsxs)("div",{className:"linguaflow-main-content",children:[(0,K.jsxs)("div",{className:"linguaflow-player-wrapper-section",children:[(0,K.jsxs)("div",{className:`linguaflow-player-section ${_?"linguaflow-audio-mode":""}`,style:Ve?{}:{height:_?"auto":`${S}px`,minHeight:_?"140px":"200px",flex:_?"0 0 auto":void 0},children:[(0,K.jsx)(Ya,{ref:t,url:e.url,autoPlay:!1,startTime:e.timestamp||0,videoFit:Q,onReady:()=>{console.log("[LinguaFlowApp] Player ready"),s(!0)},onError:D=>{console.error("[LinguaFlowApp] Player error:",D),o(D.message||"Failed to load media")},onProgress:D=>{D&&typeof D.playing=="boolean"&&b.getState().setPlaying(D.playing)}}),_&&i&&(0,K.jsxs)("div",{className:"linguaflow-audio-visualizer",children:[(0,K.jsxs)("div",{className:"linguaflow-audio-info",children:[(0,K.jsx)("div",{className:"linguaflow-audio-icon",children:"\u{1F3B5}"}),(0,K.jsx)("div",{className:"linguaflow-audio-title",children:e.displayName})]}),(0,K.jsx)(pp,{playerRef:t,isPlaying:te})]})]}),i&&n&&(0,K.jsx)(cs,{currentCue:O,plugin:n,playerRef:t,isPlaying:te,isLooping:R,isRecording:P?.isRecording||!1,isManuallyLocked:w,playbackRate:W,onTogglePlay:I,onToggleLoop:X,onExitLoop:J,onRecord:xe,onRateChange:Ne,onUnlock:lt})]}),i&&!_&&(0,K.jsx)("div",{className:`linguaflow-resizer ${f?"resizing":""}`,onMouseDown:_t,onTouchStart:_t,onDoubleClick:Je,title:"\u62D6\u62FD\u8C03\u6574\u5927\u5C0F | \u53CC\u51FB\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u9AD8\u5EA6","aria-label":"Resize handle",children:(0,K.jsx)("div",{className:"linguaflow-resizer-line"})}),i&&(0,K.jsx)("div",{className:"linguaflow-subtitle-section",style:{width:Ve?`${p}px`:"auto",minWidth:Ve?`${p}px`:"0",maxWidth:Ve?`${p}px`:"none"},children:(0,K.jsx)(lp,{playerRef:t,showList:Ve?!0:n.settings.showInlineSubtitles,showControls:!1,plugin:n,recordingSession:P})})]}),!i&&(0,K.jsxs)("div",{className:"linguaflow-loading",children:[(0,K.jsx)("div",{className:"linguaflow-spinner"}),(0,K.jsx)("p",{children:"Loading media..."})]}),l&&P&&(0,K.jsx)(fp,{evaluation:P.evaluation,transcription:P.transcriptionResult,recordingBlobUrl:P.recordingBlobUrl,playerRef:t,targetSubtitle:P.targetSubtitle,isVisible:l,isTranscribing:P.isTranscribing,onClose:()=>a(!1),onRetry:()=>{let D=P.targetSubtitle;D&&(a(!1),t.current&&te&&(t.current.pauseVideo(),Z(!1)),setTimeout(()=>{P.startRecording(D)},100))}})]})}var su=class extends q.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){let{logger:r}=(ws(),De(iu));r.error("ErrorBoundary","Component error caught:",{error:t.message,stack:t.stack,componentStack:n.componentStack})}render(){return this.state.hasError?(0,K.jsxs)("div",{className:"linguaflow-error-boundary",children:[(0,K.jsx)("div",{className:"linguaflow-error-icon",children:"\u26A0\uFE0F"}),(0,K.jsx)("h2",{children:"\u7EC4\u4EF6\u52A0\u8F7D\u5931\u8D25"}),(0,K.jsx)("p",{children:"\u5F88\u62B1\u6B49\uFF0C\u64AD\u653E\u5668\u9047\u5230\u4E86\u95EE\u9898\u3002\u60A8\u53EF\u4EE5\u5C1D\u8BD5\u91CD\u65B0\u52A0\u8F7D\u3002"}),this.state.error&&(0,K.jsxs)("details",{style:{marginTop:"16px",cursor:"pointer"},children:[(0,K.jsx)("summary",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"\u67E5\u770B\u9519\u8BEF\u8BE6\u60C5"}),(0,K.jsxs)("pre",{style:{marginTop:"8px",padding:"12px",background:"var(--background-secondary)",borderRadius:"4px",fontSize:"11px",overflow:"auto",maxHeight:"200px",color:"var(--text-error)"},children:[this.state.error.message,`

`,this.state.error.stack]})]}),(0,K.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"linguaflow-retry-btn",style:{marginTop:"16px"},children:"\u91CD\u8BD5"})]}):this.props.children}};function Ir(e,t){if(!t)return!1;let n=t.split("+"),r=n[n.length-1],o=n.slice(0,n.length-1),i=o.includes("Shift"),s=o.includes("Ctrl")||o.includes("Control"),l=o.includes("Alt"),a=o.includes("Meta")||o.includes("Cmd")||o.includes("Command");return e.shiftKey!==i||e.ctrlKey!==s||e.altKey!==l||e.metaKey!==a?!1:r.length===1?e.key.toLowerCase()===r.toLowerCase():r==="Space"?e.key===" ":r.startsWith("Arrow")?e.code===r:e.key===r}var Yn=require("obsidian"),ke=H(Re(),1),kp=H(Qa(),1);we();var Yt=H(Ce(),1),Do="linguaflow-subtitle-panel",bs=class extends Yn.ItemView{plugin;root=null;constructor(t,n){super(t),this.plugin=n}getViewType(){return Do}getDisplayText(){return"\u5B57\u5E55\u5217\u8868"}getIcon(){return"subtitles"}async onOpen(){let t=this.containerEl.children[1];if(!t)return;t.empty();let n=t.createDiv({cls:"linguaflow-subtitle-panel-root"});this.root=kp.createRoot(n),this.renderSubtitlePanel()}async onClose(){this.root&&(this.root.unmount(),this.root=null)}renderSubtitlePanel(){this.root&&this.root.render(ke.createElement(vm,{plugin:this.plugin}))}refresh(){this.renderSubtitlePanel()}},vm=({plugin:e})=>{let t=ys(e),n=b(I=>I.subtitles),r=b(I=>I.activeIndex),o=b(I=>I.activeWordIndex),i=b(Po),s=b(I=>I.subtitleConfig.showEnglish),l=b(I=>I.subtitleConfig.showChinese),a=b(I=>I.subtitleConfig.showIndexAndTime),u=b(I=>I.subtitleConfig.wordByWordHighlight),d=b(I=>I.segmentLoopEnabled),g=b(I=>I.segmentLoopCurrent),h=b(I=>I.segmentLoopTotal),y=b(I=>I.loopStart),v=b(I=>I.loopEnd),S=b(I=>I.setActiveIndex),L=ke.useRef(null),p=ke.useRef(null),{ref:c,height:f}=ps(),[m,w]=ke.useState(null),[E,T]=ke.useState(!1),[N,O]=ke.useState(!1),R=ke.useRef(0),W=b(I=>I.currentTime);ke.useEffect(()=>{Math.abs(W-R.current)>2&&E&&T(!1),R.current=W},[W,E]),ke.useEffect(()=>{if(!(N&&!d)&&L.current&&r>=0){let I=f*.3;L.current.scrollToIndex(r,{behavior:"smooth",offset:I})}},[r,N,d,f]),ke.useEffect(()=>{!E&&i&&w(i)},[i,E]);let U=ke.useCallback(I=>{m?.id===I.id?b.getState().playing&&e.playerRef?.current?(e.playerRef.current.pauseVideo(),b.getState().setPlaying(!1)):e.playerRef?.current&&(e.playerRef.current.playVideo(),b.getState().setPlaying(!0)):(w(I),T(!0),b.getState().playing&&e.playerRef?.current?(e.playerRef.current.pauseVideo(),b.getState().setPlaying(!1),e.playerRef.current.seekTo(I.start)):e.playerRef?.current&&e.playerRef.current.seekTo(I.start))},[m,e]),te=ke.useCallback(I=>{w(I),T(!1),e.playerRef?.current&&(e.playerRef.current.seekTo(I.start),e.playerRef.current.playVideo(),b.getState().setPlaying(!0));let X=n.findIndex(J=>J.id===I.id);X>=0&&S(X)},[e,n,S]),Z=ke.useCallback(async(I,X)=>{if(X?.stopPropagation(),!t)return;let{isRecording:J,targetSubtitle:xe,startRecording:Ne,stopRecording:lt}=t;if(J&&xe?.id===I.id)await lt();else{e.playerRef?.current&&e.playerRef.current.pauseVideo?.();let{segmentLoopEnabled:Je}=b.getState();Je&&b.getState().stopSegmentLoop(),await Ne(I)}},[t,e]),Q=ke.useCallback(async(I,X)=>{X.stopPropagation();let J=I.replace(/[.,;:!?'"()[\]{}]/g,"").trim();if(!J)return;let xe=e.app;if(xe)try{e.settings.autoCopyWordOnLookup&&navigator.clipboard&&await navigator.clipboard.writeText(J);let lt=xe.plugins?.plugins?.["obsidian-language-learner"];if(!lt){new Yn.Notice("\u672A\u627E\u5230 Language Learner \u63D2\u4EF6");return}if(!xe.plugins?.enabledPlugins?.has?.("obsidian-language-learner")){new Yn.Notice("Language Learner \u63D2\u4EF6\u672A\u542F\u7528");return}let Je=e.settings.openLanguageLearnerPanel,_t=X.target;typeof lt.queryWord=="function"&&(Je?lt.queryWord(J,_t):lt.queryWord(J),new Yn.Notice(`\u{1F50D} \u67E5\u8BE2: ${J}`))}catch(Ne){console.error("[SubtitlePanel] Error calling Language Learner:",Ne),new Yn.Notice("\u8C03\u7528 Language Learner \u5931\u8D25")}},[e]),_=ke.useCallback((I,X)=>{X.stopPropagation(),e&&e.insertSubtitleToNote(I)},[e]),P=ke.useCallback((I,X)=>{X.preventDefault();let{Menu:J}=require("obsidian"),xe=new J;xe.addItem(Ne=>{Ne.setTitle("\u{1F4DD} \u63D2\u5165\u5230\u7B14\u8BB0").setIcon("pencil").onClick(()=>{e&&e.insertSubtitleToNote(I)})}),xe.addSeparator(),xe.addItem(Ne=>{Ne.setTitle("\u25B6\uFE0F \u8DF3\u8F6C\u64AD\u653E").setIcon("play").onClick(()=>{e.playerRef?.current&&(e.playerRef.current.seekTo(I.start),e.playerRef.current.playVideo(),b.getState().setPlaying(!0))})}),xe.showAtMouseEvent(X.nativeEvent)},[e]),re=ke.useCallback((I,X)=>{let J=d&&b.getState().loopStart===I.start&&b.getState().loopEnd===I.end,xe=t?.isRecording&&t?.targetSubtitle?.id===I.id,Ne=m?.id===I.id;return(0,Yt.jsx)(Io,{cue:I,index:X,isActive:X===r,isLooping:!!J,isRecording:!!xe,isSelected:Ne,showEnglish:s,showChinese:l,showIndexAndTime:a,wordByWordHighlight:u,activeWordIndex:X===r?o:-1,visibleLanguages:b.getState().subtitleConfig.visibleLanguages,onSubtitleClick:U,onSubtitleDblClick:te,onSubtitleContextMenu:P,onWordClick:Q,onExportSubtitle:_,activeItemRef:X===r?p:void 0},I.id)},[r,o,d,t?.isRecording,t?.targetSubtitle?.id,m?.id,s,l,a,u,U,te,P,Q,_]);return n.length===0?(0,Yt.jsxs)("div",{className:"linguaflow-subtitle-panel-empty",children:[(0,Yt.jsx)("div",{className:"linguaflow-empty-icon",children:"\u{1F4DD}"}),(0,Yt.jsx)("p",{children:"\u6682\u65E0\u5B57\u5E55"}),(0,Yt.jsx)("p",{className:"linguaflow-empty-hint",children:"\u64AD\u653E\u5E26\u6709\u5B57\u5E55\u7684\u89C6\u9891\u540E\uFF0C\u5B57\u5E55\u4F1A\u663E\u793A\u5728\u8FD9\u91CC"})]}):(0,Yt.jsx)("div",{className:"linguaflow-subtitle-panel-content",children:(0,Yt.jsx)("div",{className:"linguaflow-subtitle-list-scrollable",ref:c,style:{overflow:"hidden"},onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),children:f>0&&(0,Yt.jsx)(_o,{ref:L,items:n,estimatedItemHeight:80,containerHeight:f,overscan:3,renderItem:re,getItemKey:I=>I.id,className:"linguaflow-subtitle-items"})})})};we();var $=require("obsidian"),xp=`---
type: video-study
status: learning
tags: [langplayer, video-note]
created: {{date}}
source: {{url}}
---

# \u{1F4FA} {{title}}

> [!INFO|clean] Metadata
> **Link**: {{link}}
> **Date**: {{date}}

## \u{1F9E0} \u5B66\u4E60\u533A (Study Area)

> [!QUESTION] \u6838\u5FC3\u95EE\u9898 / \u7EBF\u7D22
> - [ ] 00:00 \u8FD9\u91CC\u7684\u8FDE\u8BFB\u662F\u600E\u4E48\u53D1\u7684\uFF1F
> - [ ] \u5355\u8BCD: **example**

> [!NOTE] \u7B14\u8BB0\u4E0E\u56DE\u7B54
> \u5728\u8FD9\u91CC\u8BB0\u5F55\u4F60\u7684\u7406\u89E3...

---

## \u{1F4DD} \u8BCD\u6C47\u79EF\u7D2F (Vocabulary)

| Word | Definition | Context |
| :--- | :--- | :--- |
|      |      |      |

---

## \u{1F5E3}\uFE0F \u53E3\u8BED\u8BAD\u7EC3 (Speaking)
> [!quote] \u5F71\u5B50\u8DDF\u8BFB (Shadowing)
> \u590D\u5236\u4F60\u60F3\u6A21\u4EFF\u7684\u91D1\u53E5\u5230\u8FD9\u91CC...

---

## \u{1F4A1} \u603B\u7ED3 (Summary)
> [!abstract]
> \u7528\u81EA\u5DF1\u7684\u8BDD\u603B\u7ED3\u8FD9\u4E2A\u89C6\u9891\u8BB2\u4E86\u4EC0\u4E48...
`,Ep={enableVoice2Text:!0,speechProvider:"openai",sttApiKey:"",sttLanguage:"",sttModel:"whisper-1",sttBaseUrl:"",saveAudio:!1,audioFolder:"Recordings",audioFormat:"webm",recordOnlyMode:!1,loopCount:3,autoPlayNext:!1,playerHeight:400,subtitleWidth:400,videoFit:"cover",showInlineSubtitles:!0,subtitleFontSize:15,subtitleFontWeight:"500",subtitleLineHeight:1.6,subtitleColor:"",subtitleTranslationColor:"",subtitleBackgroundColor:"",subtitleHighlightColor:"",showIndexAndTime:!1,wordByWordHighlight:!1,visibleLanguages:["en","zh"],subtitlePanelLocation:"tab",subtitleLayout:"bottom",openLanguageLearnerPanel:!0,autoCopyWordOnLookup:!0,notePath:"",noteTemplate:xp,openaiApiKey:"",azureSubscriptionKey:"",azureRegion:"eastus",hotkeys:{prevSubtitle:"ArrowLeft",nextSubtitle:"ArrowRight",rewind:"Shift+ArrowLeft",fastForward:"Shift+ArrowRight",playPause:" ",record:"r"},debugMode:!1},ym=[{id:"modern_glass",name:"\u2728 \u73B0\u4EE3\u73BB\u7483",desc:"\u7EAF\u51C0\u767D\u5B57\uFF0C\u84DD\u8272\u9AD8\u4EAE",config:{subtitleColor:"#FFFFFF",subtitleBackgroundColor:"",subtitleTranslationColor:"#CCCCCC",subtitleHighlightColor:"#4A9EFF",subtitleFontSize:16,subtitleFontWeight:"500"},previewBg:"linear-gradient(135deg, #222 0%, #444 100%)"},{id:"netflix_focus",name:"\u{1F3AC} \u5948\u98DE\u7ECF\u5178",desc:"\u660E\u9EC4\u5B57\uFF0C\u6C89\u6D78\u89C2\u5F71",config:{subtitleColor:"#FFD700",subtitleBackgroundColor:"",subtitleTranslationColor:"#AAAAAA",subtitleHighlightColor:"#FFFFFF",subtitleFontSize:18,subtitleFontWeight:"600"},previewBg:"#000000"},{id:"soft_study",name:"\u{1F33F} \u62A4\u773C\u5B66\u4E60",desc:"\u6DF1\u7070\u5B57\uFF0C\u58A8\u7EFF\u9AD8\u4EAE",config:{subtitleColor:"#333333",subtitleBackgroundColor:"",subtitleTranslationColor:"#666666",subtitleHighlightColor:"#2E8B57",subtitleFontSize:16,subtitleFontWeight:"500"},previewBg:"#F5F5DC"},{id:"cyber_neon",name:"\u26A1 \u8D5B\u535A\u9713\u8679",desc:"\u9752\u8272\u5B57\uFF0C\u7C89\u7EA2\u9AD8\u4EAE",config:{subtitleColor:"#00FFFF",subtitleBackgroundColor:"",subtitleTranslationColor:"#008888",subtitleHighlightColor:"#FF00FF",subtitleFontSize:15,subtitleFontWeight:"500"},previewBg:"#111"}],ks=class extends $.PluginSettingTab{plugin;activeTab="audio";constructor(t,n){super(t,n),this.plugin=n}display(){let{containerEl:t}=this;t.empty();let n=new Date().toLocaleTimeString();t.createEl("h2",{text:"LangPlayer Settings"});let r=t.createDiv({cls:"linguaflow-tabs"});[{id:"audio",name:"\u97F3\u9891"},{id:"player",name:"\u64AD\u653E\u5668"},{id:"subtitle",name:"\u5B57\u5E55"},{id:"integration",name:"\u96C6\u6210"}].forEach(s=>{let l=r.createDiv({cls:`linguaflow-tab ${this.activeTab===s.id?"active":""}`});l.setText(s.name),l.onclick=()=>{this.activeTab=s.id,this.display()}});let i=t.createDiv({cls:"linguaflow-tab-content"});this.activeTab==="audio"?this.displayAudioTab(i):this.activeTab==="player"?this.displayPlayerTab(i):this.activeTab==="subtitle"?this.displaySubtitleTab(i):this.activeTab==="integration"?this.displayIntegrationTab(i):this.activeTab==="developer"&&this.displayDeveloperTab(i)}displayAudioTab(t){if(new $.Setting(t).setName("\u542F\u7528\u8BED\u97F3\u8F6C\u6587\u5B57").setDesc("").setTooltip("\u5F55\u97F3\u5E76\u8F6C\u5199\u4E3A\u7B14\u8BB0(\u9700\u914D\u7F6E API)").addToggle(o=>o.setValue(this.plugin.settings.enableVoice2Text).onChange(async i=>{this.plugin.settings.enableVoice2Text=i,await this.plugin.saveSettings(),this.display()})),!this.plugin.settings.enableVoice2Text)return;t.createEl("h3",{text:"\u8BED\u97F3\u670D\u52A1\u5546"}),new $.Setting(t).setName("\u670D\u52A1\u63D0\u4F9B\u5546").setDesc("").setTooltip("\u9009\u62E9\u8F6C\u5F55\u670D\u52A1\u3002OpenAI: \u9AD8\u7CBE\u5EA6 (Whisper)\u3002Azure: \u4F01\u4E1A\u7EA7\u3002").addDropdown(o=>o.addOption("openai","OpenAI (Whisper)").addOption("azure","Azure Speech Services").addOption("assemblyai","AssemblyAI").addOption("custom","Custom (OpenAI-compatible)").setValue(this.plugin.settings.speechProvider).onChange(async i=>{this.plugin.settings.speechProvider=i,await this.plugin.saveSettings(),this.display()}));let n=this.plugin.settings.speechProvider,r;new $.Setting(t).setName("API Key").setDesc("").setTooltip("\u4EC5\u672C\u5730\u5B58\u50A8,\u76F4\u8FDE\u670D\u52A1\u5546").addText(o=>{r=o,o.setPlaceholder(n==="openai"?"sk-...":"Enter API Key").setValue(this.plugin.settings.sttApiKey||this.plugin.settings.openaiApiKey).onChange(async i=>{this.plugin.settings.sttApiKey=i,n==="openai"&&(this.plugin.settings.openaiApiKey=i),n==="azure"&&(this.plugin.settings.azureSubscriptionKey=i),await this.plugin.saveSettings()}),o.inputEl.type="password"}).addExtraButton(o=>{o.setIcon("eye-off").setTooltip("\u663E\u793A API Key").onClick(()=>{r.inputEl.type==="password"?(r.inputEl.type="text",o.setIcon("eye"),o.setTooltip("\u9690\u85CF API Key")):(r.inputEl.type="password",o.setIcon("eye-off"),o.setTooltip("\u663E\u793A API Key"))})}).addButton(o=>o.setButtonText("Test Connection").setTooltip("\u6D4B\u8BD5 API \u8FDE\u63A5").onClick(async()=>{o.setDisabled(!0),o.setButtonText("Testing...");try{await this.testConnection(),o.setButtonText("\u2713 Success"),setTimeout(()=>o.setButtonText("Test Connection"),2e3)}catch{o.setButtonText("\u2717 Failed"),setTimeout(()=>o.setButtonText("Test Connection"),2e3)}finally{o.setDisabled(!1)}})),n==="azure"?new $.Setting(t).setName("Azure Region").setDesc("").setTooltip("\u9009\u62E9 Azure \u670D\u52A1\u533A\u57DF").addDropdown(o=>o.addOption("eastus","East US").addOption("eastus2","East US 2").addOption("westus","West US").addOption("westus2","West US 2").addOption("centralus","Central US").addOption("northcentralus","North Central US").addOption("southcentralus","South Central US").addOption("westcentralus","West Central US").addOption("canadacentral","Canada Central").addOption("brazilsouth","Brazil South").addOption("northeurope","North Europe").addOption("westeurope","West Europe").addOption("uksouth","UK South").addOption("francecentral","France Central").addOption("germanywestcentral","Germany West Central").addOption("switzerlandnorth","Switzerland North").addOption("norwayeast","Norway East").addOption("eastasia","East Asia").addOption("southeastasia","Southeast Asia").addOption("australiaeast","Australia East").addOption("japaneast","Japan East").addOption("japanwest","Japan West").addOption("koreacentral","Korea Central").addOption("centralindia","Central India").addOption("southafricanorth","South Africa North").addOption("uaenorth","UAE North").setValue(this.plugin.settings.sttBaseUrl||this.plugin.settings.azureRegion||"eastus").onChange(async i=>{this.plugin.settings.sttBaseUrl=i,this.plugin.settings.azureRegion=i,await this.plugin.saveSettings()})):n==="custom"&&new $.Setting(t).setName("API Base URL").setDesc("").setTooltip("\u81EA\u5B9A\u4E49 API \u7AEF\u70B9\uFF08OpenAI \u517C\u5BB9\u63A5\u53E3\uFF09").addText(o=>o.setPlaceholder("https://your-api.com/v1/audio/transcriptions").setValue(this.plugin.settings.sttBaseUrl).onChange(async i=>{this.plugin.settings.sttBaseUrl=i,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u8BED\u8A00").setDesc("").setTooltip("\u76EE\u6807\u8BED\u8A00\u4EE3\u7801,\u5982 en, zh\u3002\u7559\u7A7A\u81EA\u52A8\u68C0\u6D4B\u3002").addText(o=>o.setPlaceholder("\u81EA\u52A8\u68C0\u6D4B").setValue(this.plugin.settings.sttLanguage).onChange(async i=>{this.plugin.settings.sttLanguage=i,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u6A21\u578B").setDesc("").setTooltip("AI \u6A21\u578B\u540D\u79F0,\u9ED8\u8BA4\u4E3A whisper-1").addText(o=>o.setPlaceholder("whisper-1").setValue(this.plugin.settings.sttModel).onChange(async i=>{this.plugin.settings.sttModel=i,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u5F55\u97F3\u6587\u4EF6\u683C\u5F0F").setDesc("").setTooltip("\u5F55\u97F3\u683C\u5F0F\u3002WebM: \u4F53\u79EF\u5C0F (\u63A8\u8350)\u3002WAV: \u65E0\u635F\u3002").addDropdown(o=>o.addOption("wav","WAV").addOption("webm","WebM").addOption("mp3","MP3").setValue(this.plugin.settings.audioFormat).onChange(async i=>{this.plugin.settings.audioFormat=i,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u4FDD\u5B58\u5F55\u97F3\u6587\u4EF6").setDesc("").setTooltip("\u5F00\u542F\u5219\u4FDD\u7559\u6587\u4EF6\u3002\u5173\u95ED\u5219\u4EC5\u4E34\u65F6\u8F6C\u5199\u3002").addToggle(o=>o.setValue(this.plugin.settings.saveAudio).onChange(async i=>{this.plugin.settings.saveAudio=i,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.saveAudio&&new $.Setting(t).setName("\u4FDD\u5B58\u6587\u4EF6\u5939").setDesc("").setTooltip("\u5F55\u97F3\u6587\u4EF6\u4FDD\u5B58\u7684\u6587\u4EF6\u5939\u8DEF\u5F84").addText(o=>o.setPlaceholder("Recordings").setValue(this.plugin.settings.audioFolder).onChange(async i=>{this.plugin.settings.audioFolder=i,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u53EA\u5F55\u97F3\u4E0D\u8F6C\u5F55").setDesc("").setTooltip("\u4EC5\u4F5C\u4E3A\u5F55\u97F3\u673A,\u4E0D\u6D88\u8017 API").addToggle(o=>o.setValue(this.plugin.settings.recordOnlyMode).onChange(async i=>{this.plugin.settings.recordOnlyMode=i,await this.plugin.saveSettings()}))}displayPlayerTab(t){new $.Setting(t).setName("\u5355\u53E5\u5FAA\u73AF\u6B21\u6570").setDesc("").setTooltip("\u6BCF\u53E5\u5B57\u5E55\u91CD\u590D\u64AD\u653E\u7684\u904D\u6570").addDropdown(n=>n.addOption("1","1 \u6B21").addOption("2","2 \u6B21").addOption("3","3 \u6B21").addOption("5","5 \u6B21").addOption("10","10 \u6B21").addOption("20","20 \u6B21").addOption("50","50 \u6B21").addOption("100","100 \u6B21").setValue(String(this.plugin.settings.loopCount)).onChange(async r=>{this.plugin.settings.loopCount=parseInt(r),await this.plugin.saveSettings()})),new $.Setting(t).setName("\u81EA\u52A8\u64AD\u653E\u4E0B\u4E00\u53E5").setDesc("").setTooltip("\u5F00\u542F\u5219\u8FDE\u7EED\u64AD\u653E\uFF0C\u5173\u95ED\u5219\u6682\u505C\u7B49\u5F85").addToggle(n=>n.setValue(this.plugin.settings.autoPlayNext).onChange(async r=>{this.plugin.settings.autoPlayNext=r,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u89C6\u9891\u586B\u5145\u6A21\u5F0F").setDesc("").setTooltip("\u89C6\u9891\u753B\u9762\u586B\u5145\u3002Cover: \u586B\u6EE1\u3002Contain: \u5B8C\u6574\u3002").addDropdown(n=>n.addOption("contain","Contain").addOption("cover","Cover").addOption("fill","Fill").setValue(this.plugin.settings.videoFit).onChange(async r=>{this.plugin.settings.videoFit=r,await this.plugin.saveSettings();let{useMediaStore:o}=(we(),De(Ze));o.getState().setVideoFit(r)})),new $.Setting(t).setName("\u663E\u793A\u5185\u5D4C\u5B57\u5E55\u5217\u8868").setDesc("").setTooltip("\u5728\u64AD\u653E\u5668\u4E0B\u65B9\u663E\u793A\u3002\u5EFA\u8BAE\u5173\u95ED\uFF0C\u4F7F\u7528\u4FA7\u8FB9\u680F\u3002").addToggle(n=>n.setValue(this.plugin.settings.showInlineSubtitles).onChange(async r=>{this.plugin.settings.showInlineSubtitles=r,await this.plugin.saveSettings();let{useMediaStore:o}=(we(),De(Ze));o.getState().setShowInlineSubtitles(r),new $.Notice(r?"\u5185\u5D4C\u5B57\u5E55\u5217\u8868\u5DF2\u5F00\u542F":"\u5185\u5D4C\u5B57\u5E55\u5217\u8868\u5DF2\u5173\u95ED")}))}displaySubtitleTab(t){t.createEl("h3",{text:"\u{1F3A8} \u4E3B\u9898\u9884\u8BBE (\u4E00\u952E\u5E94\u7528)"}),t.createEl("p",{text:"\u70B9\u51FB\u4E0B\u65B9\u4E3B\u9898\u53EF\u5FEB\u901F\u5E94\u7528\u914D\u8272\u65B9\u6848\uFF0C\u4E4B\u540E\u53EF\u7EE7\u7EED\u624B\u52A8\u5FAE\u8C03\u3002",cls:"setting-item-description"});let n=t.createDiv();n.style.display="flex",n.style.gap="10px",n.style.marginBottom="18px",ym.forEach(r=>{let o=this.plugin.settings.subtitleColor===r.config.subtitleColor&&this.plugin.settings.subtitleBackgroundColor===r.config.subtitleBackgroundColor&&this.plugin.settings.subtitleTranslationColor===r.config.subtitleTranslationColor&&this.plugin.settings.subtitleHighlightColor===r.config.subtitleHighlightColor,i=n.createDiv();i.style.cssText=`
				flex: 1;
				min-width: 70px;
				border: 1px solid ${o?"var(--interactive-accent)":"var(--background-modifier-border)"};
				border-radius: 6px;
				overflow: hidden;
				cursor: pointer;
				transition: all 0.2s ease;
				background: var(--background-primary);
				display: flex;
				flex-direction: column;
				${o?"box-shadow: 0 0 0 1px var(--interactive-accent);":""}
			`,i.title=`${r.name}
${r.desc}`;let s=i.createDiv();s.style.cssText=`
				height: 36px;
				width: 100%;
				background: ${r.previewBg};
				display: flex;
				align-items: center;
				justify-content: center;
			`;let l=s.createDiv();l.innerText="Aa",l.style.fontSize="14px",l.style.fontWeight="bold",l.style.color=r.config.subtitleColor;let a=i.createDiv();a.style.padding="6px 4px",a.style.borderTop="1px solid var(--background-modifier-border)",a.style.textAlign="center",o&&(a.style.backgroundColor="rgba(var(--interactive-accent-rgb), 0.1)");let u=a.createDiv();u.innerText=r.name,u.style.fontSize="12px",u.style.color=o?"var(--interactive-accent)":"var(--text-normal)",u.style.fontWeight=o?"bold":"normal",u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",i.onmouseenter=()=>{o||(i.style.borderColor="var(--interactive-accent)",i.style.transform="translateY(-1px)")},i.onmouseleave=()=>{o||(i.style.borderColor="var(--background-modifier-border)",i.style.transform="none")},i.onclick=async()=>{this.plugin.settings.subtitleColor=r.config.subtitleColor,this.plugin.settings.subtitleBackgroundColor=r.config.subtitleBackgroundColor,this.plugin.settings.subtitleTranslationColor=r.config.subtitleTranslationColor,this.plugin.settings.subtitleHighlightColor=r.config.subtitleHighlightColor,this.plugin.settings.subtitleFontSize=r.config.subtitleFontSize,this.plugin.settings.subtitleFontWeight=r.config.subtitleFontWeight,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:d}=(we(),De(Ze));d.getState().updateSubtitleConfig({fontColor:r.config.subtitleColor,backgroundColor:r.config.subtitleBackgroundColor,translationColor:r.config.subtitleTranslationColor,highlightColor:r.config.subtitleHighlightColor}),new $.Notice(`\u5DF2\u5E94\u7528\u4E3B\u9898: ${r.name}`),this.display()}}),t.createEl("hr"),new $.Setting(t).setName("\u5B57\u4F53\u5927\u5C0F").setDesc("").setTooltip("\u5B57\u5E55\u5927\u5C0F (px)").addSlider(r=>r.setLimits(12,24,1).setValue(this.plugin.settings.subtitleFontSize).setDynamicTooltip().onChange(async o=>{this.plugin.settings.subtitleFontSize=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles()})),new $.Setting(t).setName("\u5B57\u91CD").setDesc("").setTooltip("\u5B57\u4F53\u7C97\u7EC6\u3002400 (\u5E38\u89C4) | 700 (\u7C97\u4F53)").addDropdown(r=>r.addOption("400","400").addOption("500","500").addOption("600","600").addOption("700","700").setValue(this.plugin.settings.subtitleFontWeight).onChange(async o=>{this.plugin.settings.subtitleFontWeight=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles()})),new $.Setting(t).setName("\u884C\u9AD8").setDesc("").setTooltip("\u884C\u95F4\u8DDD\u3002\u6570\u503C\u8D8A\u5927\u8D8A\u5BBD\u3002").addSlider(r=>r.setLimits(1,2.5,.1).setValue(this.plugin.settings.subtitleLineHeight).setDynamicTooltip().onChange(async o=>{this.plugin.settings.subtitleLineHeight=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles()})),new $.Setting(t).setName("\u5B57\u4F53\u989C\u8272").setDesc("").setTooltip("\u8BBE\u7F6E\u5B57\u5E55\u6587\u5B57\u989C\u8272").addColorPicker(r=>r.setValue(this.plugin.settings.subtitleColor||"#000000").onChange(async o=>{this.plugin.settings.subtitleColor=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({fontColor:o})})).addExtraButton(r=>r.setIcon("rotate-ccw").setTooltip("\u91CD\u7F6E\u4E3A\u4E3B\u9898\u9ED8\u8BA4").onClick(async()=>{this.plugin.settings.subtitleColor="",await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:o}=(we(),De(Ze));o.getState().updateSubtitleConfig({fontColor:""}),this.display()})),new $.Setting(t).setName("\u7FFB\u8BD1\u5B57\u5E55\u989C\u8272").setDesc("").setTooltip("\u8BBE\u7F6E\u7FFB\u8BD1\u5B57\u5E55(\u5982\u4E2D\u6587)\u7684\u989C\u8272").addColorPicker(r=>r.setValue(this.plugin.settings.subtitleTranslationColor||"#888888").onChange(async o=>{this.plugin.settings.subtitleTranslationColor=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({translationColor:o})})).addExtraButton(r=>r.setIcon("rotate-ccw").setTooltip("\u91CD\u7F6E\u4E3A\u9ED8\u8BA4").onClick(async()=>{this.plugin.settings.subtitleTranslationColor="",await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:o}=(we(),De(Ze));o.getState().updateSubtitleConfig({translationColor:""}),this.display()})),new $.Setting(t).setName("\u9AD8\u4EAE\u989C\u8272").setDesc("").setTooltip("\u8BBE\u7F6E\u6B63\u5728\u64AD\u653E\u7684\u5B57\u5E55\u9AD8\u4EAE\u989C\u8272").addColorPicker(r=>r.setValue(this.plugin.settings.subtitleHighlightColor||"#ff0000").onChange(async o=>{this.plugin.settings.subtitleHighlightColor=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({highlightColor:o})})).addExtraButton(r=>r.setIcon("rotate-ccw").setTooltip("\u91CD\u7F6E\u4E3A\u9ED8\u8BA4 (\u4E3B\u9898\u8272)").onClick(async()=>{this.plugin.settings.subtitleHighlightColor="",await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:o}=(we(),De(Ze));o.getState().updateSubtitleConfig({highlightColor:""}),this.display()})),new $.Setting(t).setName("\u80CC\u666F\u989C\u8272").setDesc("").setTooltip("\u8BBE\u7F6E\u5B57\u5E55\u80CC\u666F\u989C\u8272").addColorPicker(r=>r.setValue(this.plugin.settings.subtitleBackgroundColor||"#000000").onChange(async o=>{this.plugin.settings.subtitleBackgroundColor=o,await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({backgroundColor:o})})).addExtraButton(r=>r.setIcon("rotate-ccw").setTooltip("\u91CD\u7F6E\u4E3A\u9ED8\u8BA4 (\u65E0\u80CC\u666F)").onClick(async()=>{this.plugin.settings.subtitleBackgroundColor="",await this.plugin.saveSettings(),this.plugin.updateSubtitleStyles();let{useMediaStore:o}=(we(),De(Ze));o.getState().updateSubtitleConfig({backgroundColor:""}),this.display()})),new $.Setting(t).setName("\u663E\u793A\u7F16\u53F7\u548C\u65F6\u95F4").setDesc("").setTooltip("\u663E\u793A\u5E8F\u53F7\u548C\u65F6\u95F4\u3002\u4F8B\uFF1A[01] 00:05").addToggle(r=>r.setValue(this.plugin.settings.showIndexAndTime).onChange(async o=>{this.plugin.settings.showIndexAndTime=o,await this.plugin.saveSettings();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({showIndexAndTime:o})})),new $.Setting(t).setName("\u9010\u5B57\u9AD8\u4EAE").setDesc("").setTooltip("\u5361\u62C9OK\u6548\u679C (\u9700\u8BE6\u7EC6\u65F6\u95F4\u6233)").addToggle(r=>r.setValue(this.plugin.settings.wordByWordHighlight??!0).onChange(async o=>{this.plugin.settings.wordByWordHighlight=o,await this.plugin.saveSettings();let{useMediaStore:i}=(we(),De(Ze));i.getState().updateSubtitleConfig({wordByWordHighlight:o}),new $.Notice(o?"\u2705 \u9010\u5B57\u9AD8\u4EAE\u5DF2\u542F\u7528":"\u23F9\uFE0F \u6574\u884C\u9AD8\u4EAE\u5DF2\u542F\u7528")}))}displayIntegrationTab(t){console.log("[LangPlayer] displayIntegrationTab called"),new $.Setting(t).setName("\u81EA\u52A8\u6253\u5F00\u5F55\u5165\u9762\u677F").setDesc("").setTooltip("\u67E5\u8BCD\u65F6\u5C55\u5F00\u4FA7\u8FB9\u680F\uFF0C\u65B9\u4FBF\u5236\u5361").addToggle(r=>r.setValue(this.plugin.settings.openLanguageLearnerPanel).onChange(async o=>{this.plugin.settings.openLanguageLearnerPanel=o,await this.plugin.saveSettings()})),new $.Setting(t).setName("\u67E5\u8BCD\u81EA\u52A8\u590D\u5236\u5230\u526A\u5207\u677F").setDesc("").setTooltip("\u67E5\u8BCD\u65F6\u590D\u5236\u5355\u8BCD\u5230\u526A\u8D34\u677F").addToggle(r=>r.setValue(this.plugin.settings.autoCopyWordOnLookup).onChange(async o=>{this.plugin.settings.autoCopyWordOnLookup=o,await this.plugin.saveSettings()})),t.createEl("h3",{text:"\u5B66\u4E60\u7B14\u8BB0\u8BBE\u7F6E"}),new $.Setting(t).setName("\u9ED8\u8BA4\u7B14\u8BB0\u8DEF\u5F84").setDesc("").setTooltip('\u8BBE\u7F6E\u5B66\u4E60\u7B14\u8BB0\u7684\u9ED8\u8BA4\u4FDD\u5B58\u6587\u4EF6\u5939 (\u4F8B\u5982: "English/Notes")').addText(r=>{r.setPlaceholder("\u9ED8\u8BA4\u6839\u76EE\u5F55").setValue(this.plugin.settings.notePath||"").onChange(async o=>{this.plugin.settings.notePath=o,await this.plugin.saveSettings()}),new lu(this.app,r.inputEl)});let n=new $.Setting(t).setName("\u7B14\u8BB0\u6A21\u677F").setDesc("").setTooltip("\u81EA\u5B9A\u4E49\u7B14\u8BB0\u6A21\u677F").addTextArea(r=>{r.setValue(this.plugin.settings.noteTemplate||xp).onChange(async o=>{this.plugin.settings.noteTemplate=o,await this.plugin.saveSettings()}),r.inputEl.rows=8,r.inputEl.style.width="100%",r.inputEl.style.fontFamily="monospace"});console.log("[LangPlayer] Template setting created",n)}displayDeveloperTab(t){t.createEl("h3",{text:"\u8C03\u8BD5\u9009\u9879"}),t.createEl("p",{text:"\u26A0\uFE0F \u8FD9\u4E9B\u9009\u9879\u4EC5\u7528\u4E8E\u5F00\u53D1\u548C\u8C03\u8BD5\u3002\u542F\u7528\u540E\u53EF\u80FD\u5F71\u54CD\u6027\u80FD\u3002",cls:"setting-item-description"}),new $.Setting(t).setName("\u8C03\u8BD5\u6A21\u5F0F").setDesc("\u542F\u7528\u540E\u5C06\u663E\u793A\u8BE6\u7EC6\u7684\u8C03\u8BD5\u65E5\u5FD7\u3002\u91CD\u65B0\u52A0\u8F7D\u63D2\u4EF6\u540E\u751F\u6548\u3002").addToggle(n=>n.setValue(this.plugin.settings.debugMode).onChange(async r=>{this.plugin.settings.debugMode=r,await this.plugin.saveSettings();let{logger:o,LogLevel:i}=(ws(),De(iu));r?(o.enableDebug(),new $.Notice("\u2705 \u8C03\u8BD5\u6A21\u5F0F\u5DF2\u542F\u7528\uFF0C\u8BF7\u91CD\u65B0\u52A0\u8F7D\u63D2\u4EF6\u4EE5\u5E94\u7528\u66F4\u6539")):(o.disableAll(),new $.Notice("\u2705 \u8C03\u8BD5\u6A21\u5F0F\u5DF2\u5173\u95ED\uFF0C\u8BF7\u91CD\u65B0\u52A0\u8F7D\u63D2\u4EF6\u4EE5\u5E94\u7528\u66F4\u6539"))})),t.createEl("h3",{text:"\u6027\u80FD\u76D1\u63A7"}),t.createEl("p",{text:"\u{1F6A7} \u529F\u80FD\u5F00\u53D1\u4E2D...",cls:"setting-item-description"})}async testConnection(){let t=this.plugin.settings.speechProvider,n=this.plugin.settings.sttApiKey||this.plugin.settings.openaiApiKey;if(!n||!n.trim())throw new $.Notice("\u274C Please enter API Key first"),new Error("No API Key");try{t==="openai"||t==="custom"?await this.testOpenAI():t==="azure"?await this.testAzure():t==="assemblyai"&&await this.testAssemblyAI(),new $.Notice("\u2705 Connection successful!")}catch(r){throw console.error("[LinguaFlow] Test connection failed:",r),new $.Notice(`\u274C Connection failed: ${r.message||"Unknown error"}`),r}}async testOpenAI(){let t=this.plugin.settings.sttApiKey||this.plugin.settings.openaiApiKey,n=this.plugin.settings.sttBaseUrl||"https://api.openai.com/v1",r=`${n}${n.endsWith("/")?"":"/"}models`,o=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!o.ok){let s=await o.text();throw new Error(`HTTP ${o.status}: ${s}`)}let i=await o.json();console.log("[LinguaFlow] OpenAI test successful:",i)}async testAzure(){let t=this.plugin.settings.sttApiKey||this.plugin.settings.azureSubscriptionKey,n=this.plugin.settings.sttBaseUrl||this.plugin.settings.azureRegion;if(!n||!n.trim())throw new Error("Please enter Azure Region");let r=`https://${n}.api.cognitive.microsoft.com/sts/v1.0/issueToken`,o=await fetch(r,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":t}});if(!o.ok){let i=await o.text();throw new Error(`HTTP ${o.status}: ${i}`)}console.log("[LinguaFlow] Azure test successful")}async testAssemblyAI(){let t=this.plugin.settings.sttApiKey,n=await fetch("https://api.assemblyai.com/v2/transcript",{method:"GET",headers:{Authorization:t}});if(!n.ok){let r=await n.text();throw new Error(`HTTP ${n.status}: ${r}`)}console.log("[LinguaFlow] AssemblyAI test successful")}},lu=class extends $.AbstractInputSuggest{inputEl;constructor(t,n){super(t,n),this.inputEl=n,this.inputEl.addEventListener("focus",()=>{this.inputEl.select()})}getSuggestions(t){let n=this.app.vault.getAllLoadedFiles(),r=[],o=t.toLowerCase();return n.forEach(i=>{i instanceof $.TFolder&&i.path.toLowerCase().contains(o)&&r.push(i)}),r.sort((i,s)=>{let l=i.path.split("/").length,a=s.path.split("/").length;return l!==a?l-a:i.path.localeCompare(s.path)}),r.slice(0,100)}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var st=require("obsidian"),xs=class extends st.Modal{plugin;inputValue="";constructor(t,n){super(t),this.plugin=n}onOpen(){let{contentEl:t}=this;t.empty(),t.addClass("linguaflow-media-input-modal"),t.createEl("h2",{text:"\u6253\u5F00\u5A92\u4F53\u6587\u4EF6"}),new st.Setting(t).setName("\u5A92\u4F53\u6E90").setDesc("\u8F93\u5165\u672C\u5730\u6587\u4EF6\u8DEF\u5F84\u6216\u8FDC\u7A0B\u5A92\u4F53URL").addText(l=>{l.setPlaceholder("videos/lesson.mp4 \u6216 https://example.com/video.mp4").setValue(this.inputValue).onChange(a=>{this.inputValue=a.trim()}),l.inputEl.focus(),l.inputEl.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),this.handleOpen())}),l.inputEl.style.width="100%"});let r=t.createDiv("linguaflow-modal-buttons");r.createEl("button",{text:"\u6253\u5F00",cls:"mod-cta"}).addEventListener("click",()=>this.handleOpen()),r.createEl("button",{text:"\u9009\u62E9\u672C\u5730\u6587\u4EF6"}).addEventListener("click",()=>this.handleLocalFile()),r.createEl("button",{text:"\u53D6\u6D88"}).addEventListener("click",()=>this.close()),t.createEl("div",{text:"\u{1F4A1} \u652F\u6301\u672C\u5730\u89C6\u9891\u8DEF\u5F84\u548C\u8FDC\u7A0B\u5A92\u4F53URL",cls:"linguaflow-modal-hint"})}async handleOpen(){if(!this.inputValue){new st.Notice("\u8BF7\u8F93\u5165\u5A92\u4F53\u94FE\u63A5\u6216\u8DEF\u5F84");return}try{if(this.inputValue.startsWith("http://")||this.inputValue.startsWith("https://"))await this.plugin.openUrl(this.inputValue),new st.Notice("\u6B63\u5728\u52A0\u8F7D\u5A92\u4F53...");else{let t=this.app.vault.getAbstractFileByPath(this.inputValue);if(t instanceof st.TFile)await this.plugin.openFile(t),new st.Notice("\u6B63\u5728\u52A0\u8F7D\u5A92\u4F53...");else{new st.Notice("\u627E\u4E0D\u5230\u6587\u4EF6: "+this.inputValue);return}}this.close()}catch(t){console.error("[MediaInputModal] Error:",t);let n=t instanceof Error?t.message:String(t);new st.Notice("\u6253\u5F00\u5931\u8D25: "+n)}}async handleLocalFile(){let t=document.createElement("input");t.type="file",t.accept="video/*,audio/*,.mp4,.mkv,.webm,.avi,.mov,.mp3,.wav,.ogg",t.addEventListener("change",async n=>{let r=n.target.files;if(r&&r.length>0){let o=r[0];if(o)try{let i=URL.createObjectURL(o);await this.plugin.openUrl(i,void 0,o.name),new st.Notice(`\u6B63\u5728\u52A0\u8F7D: ${o.name}`),this.close()}catch(i){console.error("[MediaInputModal] Error loading file:",i);let s=i instanceof Error?i.message:String(i);new st.Notice("\u52A0\u8F7D\u5931\u8D25: "+s)}}}),t.click()}onClose(){let{contentEl:t}=this;t.empty()}};var Ct=require("obsidian");var Es=class e{static instance=null;worker=null;pendingRequests=new Map;requestIdCounter=0;isSupported=!1;constructor(){this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[SubtitleWorker] Web Worker not supported in this environment")}static getInstance(){return e.instance||(e.instance=new e),e.instance}initWorker(){try{let t=this.getWorkerCode(),n=new Blob([t],{type:"application/javascript"}),r=URL.createObjectURL(n);this.worker=new Worker(r),this.worker.addEventListener("message",this.handleMessage.bind(this)),this.worker.addEventListener("error",this.handleError.bind(this)),console.log("[SubtitleWorker] Worker initialized")}catch(t){console.error("[SubtitleWorker] Failed to initialize worker:",t),this.isSupported=!1}}handleMessage(t){let{type:n,id:r,data:o,error:i,progress:s}=t.data,l=this.pendingRequests.get(r);if(!l){console.warn("[SubtitleWorker] Received response for unknown request:",r);return}switch(n){case"result":o&&(l.resolve(o),this.pendingRequests.delete(r));break;case"error":l.reject(new Error(i||"Unknown worker error")),this.pendingRequests.delete(r);break;case"progress":l.onProgress&&s!==void 0&&l.onProgress(s);break}}handleError(t){console.error("[SubtitleWorker] Worker error:",t.message),this.pendingRequests.forEach(n=>{n.reject(new Error("Worker error: "+t.message))}),this.pendingRequests.clear()}async parse(t,n,r){if(!this.isSupported||!this.worker)return console.warn("[SubtitleWorker] Falling back to synchronous parsing"),this.parseFallback(t,n);let o=`request-${this.requestIdCounter++}`;return new Promise((i,s)=>{this.pendingRequests.set(o,{resolve:i,reject:s,onProgress:r});let l={type:"parse",text:t,format:n,id:o};this.worker.postMessage(l),setTimeout(()=>{this.pendingRequests.has(o)&&(this.pendingRequests.delete(o),s(new Error("Worker timeout after 30s")))},3e4)})}isWorkerSupported(){return this.isSupported&&this.worker!==null}terminate(){this.worker&&(this.worker.terminate(),this.worker=null,console.log("[SubtitleWorker] Worker terminated")),this.pendingRequests.clear()}parseFallback(t,n){return console.error("[SubtitleWorker] Fallback not implemented, please use SubtitleParser directly"),[]}getWorkerCode(){return`
			// \u68C0\u6D4B\u5B57\u5E55\u683C\u5F0F
			function detectFormat(text) {
				const trimmed = text.trim();
				if (trimmed.startsWith('WEBVTT')) return 'vtt';
				const firstLine = trimmed.split('\\n')[0];
				if (firstLine && /^\\d+\\s*$/m.test(firstLine)) return 'srt';
				if (trimmed.includes('[Script Info]')) return 'ass';
				return 'unknown';
			}
			
			// \u89E3\u6790\u65F6\u95F4\u6233
			function parseTimestamp(timestamp) {
				const normalized = timestamp.replace(',', '.');
				const parts = normalized.split(':');
				if (parts.length === 3) {
					const hours = parseInt(parts[0] || '0', 10);
					const minutes = parseInt(parts[1] || '0', 10);
					const secondsParts = (parts[2] || '0').split('.');
					const seconds = parseInt(secondsParts[0] || '0', 10);
					const milliseconds = parseInt((secondsParts[1] || '0').padEnd(3, '0'), 10);
					return hours * 3600 + minutes * 60 + seconds + milliseconds / 1000;
				}
				return 0;
			}
			
			// \u7B80\u5355\u8BED\u8A00\u5206\u79BB
			function separateLanguages(text) {
				const lines = text.split('\\n');
				let textEn, textZh;
				for (const line of lines) {
					const trimmed = line.trim();
					if (!trimmed) continue;
					if (/[\\u4e00-\\u9fa5]/.test(trimmed)) {
						textZh = textZh ? textZh + '\\n' + trimmed : trimmed;
					} else {
						textEn = textEn ? textEn + '\\n' + trimmed : trimmed;
					}
				}
				return { textEn, textZh };
			}
			
			// \u89E3\u6790 SRT
			function parseSRT(text) {
				const cues = [];
				const blocks = text.split(/\\n\\s*\\n/).filter(b => b.trim());
				const totalBlocks = blocks.length;
				
				for (let i = 0; i < blocks.length; i++) {
					const block = blocks[i];
					if (!block) continue;
					
					if (i % 50 === 0) {
						self.postMessage({
							type: 'progress',
							progress: Math.floor((i / totalBlocks) * 100)
						});
					}
					
					const lines = block.split('\\n').map(l => l.trim());
					if (lines.length < 3) continue;
					
					const index = parseInt(lines[0], 10);
					if (isNaN(index)) continue;
					
					const timeMatch = lines[1].match(/(\\d{2}:\\d{2}:\\d{2},\\d{3})\\s*-->\\s*(\\d{2}:\\d{2}:\\d{2},\\d{3})/);
					if (!timeMatch) continue;
					
					const start = parseTimestamp(timeMatch[1]);
					const end = parseTimestamp(timeMatch[2]);
					const text = lines.slice(2).join('\\n');
					const { textEn, textZh } = separateLanguages(text);
					
					cues.push({
						id: 'srt-' + index,
						index: i,
						start,
						end,
						text,
						textEn,
						textZh,
						languages: {},
						detectedLanguages: [],
						primaryLanguage: 'en'
					});
				}
				
				return cues;
			}
			
			// \u89E3\u6790 VTT
			function parseVTT(text) {
				text = text.replace(/^WEBVTT.*?\\n/, '');
				text = text.replace(/NOTE.*?\\n\\n/g, '');
				
				const cues = [];
				const blocks = text.split(/\\n\\s*\\n/).filter(b => b.trim());
				const totalBlocks = blocks.length;
				
				for (let i = 0; i < blocks.length; i++) {
					const block = blocks[i];
					if (!block) continue;
					
					if (i % 50 === 0) {
						self.postMessage({
							type: 'progress',
							progress: Math.floor((i / totalBlocks) * 100)
						});
					}
					
					const lines = block.split('\\n').map(l => l.trim());
					if (lines.length === 0) continue;
					
					let timeLineIndex = 0;
					for (let j = 0; j < lines.length; j++) {
						if (lines[j] && lines[j].includes('-->')) {
							timeLineIndex = j;
							break;
						}
					}
					
					const timeLine = lines[timeLineIndex];
					if (!timeLine) continue;
					
					const timeMatch = timeLine.match(/(\\d{2}:\\d{2}:\\d{2}\\.\\d{3})\\s*-->\\s*(\\d{2}:\\d{2}:\\d{2}\\.\\d{3})/);
					if (!timeMatch) continue;
					
					const start = parseTimestamp(timeMatch[1]);
					const end = parseTimestamp(timeMatch[2]);
					const text = lines.slice(timeLineIndex + 1).join('\\n');
					if (!text) continue;
					
					const { textEn, textZh } = separateLanguages(text);
					
					cues.push({
						id: 'vtt-' + i,
						index: i,
						start,
						end,
						text,
						textEn,
						textZh,
						languages: {},
						detectedLanguages: [],
						primaryLanguage: 'en'
					});
				}
				
				return cues;
			}
			
			// \u4E3B\u89E3\u6790\u51FD\u6570
			function parse(text, format) {
				if (!text || !text.trim()) return [];
				const detectedFormat = format || detectFormat(text);
				switch (detectedFormat) {
					case 'srt': return parseSRT(text);
					case 'vtt': return parseVTT(text);
					default: throw new Error('Unknown format');
				}
			}
			
			// \u76D1\u542C\u6D88\u606F
			self.addEventListener('message', (event) => {
				const { type, text, format, id } = event.data;
				if (type === 'parse') {
					try {
						const startTime = performance.now();
						const cues = parse(text, format);
						const duration = performance.now() - startTime;
						console.log('[Worker] Parsed ' + cues.length + ' cues in ' + duration.toFixed(2) + 'ms');
						self.postMessage({ type: 'result', id, data: cues });
					} catch (error) {
						self.postMessage({ type: 'error', id, error: error.message });
					}
				}
			});
		`}};var Cs=class{constructor(t){this.plugin=t;this.workerManager=Es.getInstance()}cache=new Map;cacheMaxAge=300*1e3;maxCacheSize=50;workerManager;WORKER_THRESHOLD=100*1024;async loadFromVaultFile(t){let n=`vault:${t.path}`,r=this.getFromCache(n);if(r)return console.log("[SubtitleLoader] Using cached subtitle:",t.path),r;try{console.log("[SubtitleLoader] Loading subtitle from vault:",t.path);let o=await this.plugin.app.vault.cachedRead(t);if(!o||o.trim().length===0)return new Ct.Notice("\u5B57\u5E55\u6587\u4EF6\u4E3A\u7A7A"),null;let i=await this.parseContent(o,t.path);if(i.length===0)return new Ct.Notice("\u65E0\u6CD5\u89E3\u6790\u5B57\u5E55\u6587\u4EF6"),null;let s={cues:i,source:t.path,format:Ge.detectFormat(o),loadedAt:Date.now()};return this.setCache(n,s),console.log(`[SubtitleLoader] Loaded ${i.length} subtitles from vault`),s}catch(o){return console.error("[SubtitleLoader] Error loading vault file:",o),new Ct.Notice("\u52A0\u8F7D\u5B57\u5E55\u6587\u4EF6\u5931\u8D25"),null}}async loadFromLocalPath(t){let n=`local:${t}`,r=this.getFromCache(n);if(r)return console.log("[SubtitleLoader] Using cached subtitle:",t),r;try{console.log("[SubtitleLoader] Loading subtitle from local path:",t);let i=await require("fs").promises.readFile(t,"utf-8");if(!i||i.trim().length===0)return new Ct.Notice("\u5B57\u5E55\u6587\u4EF6\u4E3A\u7A7A"),null;let s=await this.parseContent(i,t);if(s.length===0)return new Ct.Notice("\u65E0\u6CD5\u89E3\u6790\u5B57\u5E55\u6587\u4EF6"),null;let l={cues:s,source:t,format:Ge.detectFormat(i),loadedAt:Date.now()};return this.setCache(n,l),console.log(`[SubtitleLoader] Loaded ${s.length} subtitles from local file`),l}catch(o){return console.error("[SubtitleLoader] Error loading local file:",o),new Ct.Notice("\u52A0\u8F7D\u672C\u5730\u5B57\u5E55\u6587\u4EF6\u5931\u8D25"),null}}async loadFromURL(t){let n=`url:${t}`,r=this.getFromCache(n);if(r)return console.log("[SubtitleLoader] Using cached subtitle:",t),r;try{console.log("[SubtitleLoader] Loading subtitle from URL:",t);let i=(await(0,Ct.requestUrl)({url:t,method:"GET"})).text;if(!i||i.trim().length===0)return new Ct.Notice("\u5B57\u5E55\u5185\u5BB9\u4E3A\u7A7A"),null;let s=await this.parseContent(i,t);if(s.length===0)return new Ct.Notice("\u65E0\u6CD5\u89E3\u6790\u5B57\u5E55"),null;let l={cues:s,source:t,format:Ge.detectFormat(i),loadedAt:Date.now()};return this.setCache(n,l),console.log(`[SubtitleLoader] Loaded ${s.length} subtitles from URL`),l}catch(o){console.error("[SubtitleLoader] Error loading from URL:",o);let i=o instanceof Error?o.message:"\u7F51\u7EDC\u9519\u8BEF";return new Ct.Notice(`\u52A0\u8F7D\u5728\u7EBF\u5B57\u5E55\u5931\u8D25: ${i}`),null}}loadFromText(t,n="text"){let r=`text:${this.hashString(t)}`,o=this.getFromCache(r);if(o)return console.log("[SubtitleLoader] Using cached subtitle from text"),o;try{if(!t||t.trim().length===0)return null;let i=Ge.parse(t);if(i.length===0)return null;let s={cues:i,source:n,format:Ge.detectFormat(t),loadedAt:Date.now()};return this.setCache(r,s),console.log(`[SubtitleLoader] Loaded ${i.length} subtitles from text`),s}catch(i){return console.error("[SubtitleLoader] Error loading from text:",i),null}}getFromCache(t){let n=this.cache.get(t);return n?Date.now()-n.timestamp>this.cacheMaxAge?(console.log("[SubtitleLoader] Cache expired:",t),this.cache.delete(t),null):n.data:null}setCache(t,n){if(this.cache.size>=this.maxCacheSize){let r=this.cache.keys().next().value;r&&(this.cache.delete(r),console.log("[SubtitleLoader] Cache full, removed oldest:",r))}this.cache.set(t,{data:n,timestamp:Date.now()}),console.log(`[SubtitleLoader] Cached subtitle (${this.cache.size}/${this.maxCacheSize}):`,t)}clearCache(){let t=this.cache.size;this.cache.clear(),console.log(`[SubtitleLoader] Cache cleared (${t} entries removed)`)}clearCacheForSource(t){let n=[];for(let r of this.cache.keys())r.includes(t)&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(`[SubtitleLoader] Cleared ${n.length} cache entries for:`,t)}getCacheStats(){return{size:this.cache.size,maxSize:this.maxCacheSize,keys:Array.from(this.cache.keys())}}async parseContent(t,n){let r=new Blob([t]).size,o=Ge.detectFormat(t);if(r>this.WORKER_THRESHOLD&&this.workerManager.isWorkerSupported()){console.log(`[SubtitleLoader] Using Worker for large file (${(r/1024).toFixed(1)}KB):`,n);try{let i=performance.now(),s=await this.workerManager.parse(t,o,a=>{a%25===0&&console.log(`[SubtitleLoader] Parsing progress: ${a}%`)}),l=performance.now()-i;return console.log(`[SubtitleLoader] Worker parsed ${s.length} cues in ${l.toFixed(2)}ms`),s}catch(i){return console.warn("[SubtitleLoader] Worker failed, falling back to sync:",i),Ge.parse(t,o)}}else return console.log(`[SubtitleLoader] Using sync parsing (${(r/1024).toFixed(1)}KB):`,n),Ge.parse(t,o)}hashString(t){let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);n=(n<<5)-n+o,n=n&n}return n.toString(36)}destroy(){this.clearCache(),this.workerManager.terminate(),console.log("[SubtitleLoader] Destroyed")}};var Cp=H(Re(),1);ws();var Ls=class extends Y.Plugin{settings;playerRef=Cp.createRef();subtitleLoader;async onload(){console.log("[LangPlayer] Loading plugin"),await this.loadSettings(),this.settings.debugMode?(zo.enableDebug(),zo.info("Main","Debug mode enabled")):zo.disableAll(),this.subtitleLoader=new Cs(this),console.log("[LangPlayer] Subtitle loader initialized"),this.registerView(Qt,t=>new Ss(t,this)),this.registerView(Do,t=>new bs(t,this)),this.addRibbonIcon("play-circle","Open LangPlayer",()=>{new xs(this.app,this).open()}),this.addCommand({id:"open-player",name:"Open Media Player",callback:()=>{this.activateView()}}),this.addCommand({id:"open-current-file",name:"Play current file",checkCallback:t=>{let n=this.app.workspace.getActiveFile();return n&&this.isMediaFile(n)?(t||this.openFile(n),!0):!1}}),this.addCommand({id:"toggle-loop",name:"Toggle sentence loop",callback:()=>{b.getState().toggleLoop();let t=b.getState().loopEnabled;new Y.Notice(t?"\u{1F501} \u5FAA\u73AF\u5DF2\u542F\u7528":"\u23F9\uFE0F \u5FAA\u73AF\u5DF2\u5173\u95ED")}}),this.addCommand({id:"exit-loop",name:"Exit loop",callback:()=>{b.getState().disableLoop(),new Y.Notice("\u23F9\uFE0F \u5DF2\u9000\u51FA\u5FAA\u73AF")}}),this.addCommand({id:"previous-subtitle",name:"Previous subtitle",hotkeys:[{modifiers:[],key:"ArrowLeft"}],callback:()=>{b.getState().playPreviousSegment()}}),this.addCommand({id:"next-subtitle",name:"Next subtitle",hotkeys:[{modifiers:[],key:"ArrowRight"}],callback:()=>{b.getState().playNextSegment()}}),this.addCommand({id:"toggle-sentence-repeat",name:"Toggle sentence repeat",hotkeys:[{modifiers:[],key:"ArrowDown"}],callback:()=>{let t=b.getState();if(t.segmentLoopEnabled)t.stopSegmentLoop(),new Y.Notice("\u23F9\uFE0F \u590D\u8BFB\u5DF2\u5173\u95ED");else{let{activeIndex:n,subtitles:r}=t;if(n>=0&&n<r.length){let o=r[n];o&&(t.startSegmentLoop(o.start,o.end,3,n),new Y.Notice("\u{1F501} \u590D\u8BFB\u5DF2\u542F\u7528"))}else new Y.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u5B57\u5E55")}}}),this.addCommand({id:"insert-subtitle-to-note",name:"Insert current subtitle to note",hotkeys:[{modifiers:["Mod"],key:"i"}],callback:()=>{let t=b.getState(),{activeIndex:n,subtitles:r}=t;if(n>=0&&n<r.length){let o=r[n];o&&this.insertSubtitleToNote(o)}else new Y.Notice("\u26A0\uFE0F \u8BF7\u5148\u64AD\u653E\u89C6\u9891\u5E76\u9009\u62E9\u5B57\u5E55")}}),this.addCommand({id:"set-point-a",name:"Set point A (AB repeat)",callback:()=>{let t=b.getState().currentTime;b.getState().setPointA(t),new Y.Notice(`\u{1F170}\uFE0F A\u70B9\u5DF2\u8BBE\u7F6E: ${t.toFixed(2)}s`)}}),this.addCommand({id:"set-point-b",name:"Set point B (AB repeat)",callback:()=>{let t=b.getState().currentTime,n=b.getState().pointA;if(n===null||t<=n){new Y.Notice("\u26A0\uFE0F B\u70B9\u5FC5\u987B\u5728A\u70B9\u4E4B\u540E");return}let r=b.getState();r.setPointB(t),r.enableABRepeat(),new Y.Notice(`\u{1F171}\uFE0F B\u70B9\u5DF2\u8BBE\u7F6E: ${t.toFixed(2)}s - AB\u5FAA\u73AF\u5DF2\u542F\u52A8`)}}),this.addCommand({id:"toggle-ab-repeat",name:"Toggle AB repeat",callback:()=>{let t=b.getState();t.abRepeatEnabled?(t.disableABRepeat(),new Y.Notice("\u23F9\uFE0F AB\u5FAA\u73AF\u5DF2\u5173\u95ED")):t.pointA!==null&&t.pointB!==null?(t.enableABRepeat(),new Y.Notice("\u{1F501} AB\u5FAA\u73AF\u5DF2\u542F\u7528")):new Y.Notice("\u26A0\uFE0F \u8BF7\u5148\u8BBE\u7F6EA\u70B9\u548CB\u70B9")}}),this.addCommand({id:"open-subtitle-panel",name:"Open Subtitle Panel",callback:()=>{this.activateSubtitlePanel()}}),this.registerObsidianProtocolHandler("linguaflow",this.handleProtocol.bind(this)),this.registerEvent(this.app.workspace.on("file-menu",(t,n)=>{n instanceof Y.TFile&&this.isMediaFile(n)&&t.addItem(r=>{r.setTitle("Play in LangPlayer").onClick(()=>{this.openFile(n)})})})),this.registerEvent(this.app.workspace.on("editor-menu",(t,n,r)=>{let i=n.getSelection().trim();if(!i){let s=n.getCursor(),l=n.getLine(s.line),a=/https?:\/\/[^\s)]+/g,u;for(;(u=a.exec(l))!==null;)if(s.ch>=u.index&&s.ch<=u.index+u[0].length){i=u[0];break}if(!i){let d=/\[([^\]]+)\]\(([^)]+)\)/g;for(;(u=d.exec(l))!==null;)if(s.ch>=u.index&&s.ch<=u.index+u[0].length){i=u[2]||"";break}}}i&&(i.startsWith("http://")||i.startsWith("https://"))&&t.addItem(s=>{s.setTitle("Play in LangPlayer").onClick(()=>{this.openUrl(i)})})})),this.addSettingTab(new ks(this.app,this)),this.updateSubtitleStyles(),console.log("[LangPlayer] Plugin loaded")}onunload(){console.log("[LangPlayer] Unloading plugin"),this.app.workspace.detachLeavesOfType(Qt),Ao.clearCache(),this.subtitleLoader&&this.subtitleLoader.destroy()}async loadSettings(){this.settings=Object.assign({},Ep,await this.loadData());let t=b.getState();t.setVideoFit(this.settings.videoFit),t.setShowInlineSubtitles(this.settings.showInlineSubtitles),t.updateSubtitleConfig({fontSize:this.settings.subtitleFontSize,fontColor:this.settings.subtitleColor,translationColor:this.settings.subtitleTranslationColor,highlightColor:this.settings.subtitleHighlightColor,backgroundColor:this.settings.subtitleBackgroundColor,showIndexAndTime:this.settings.showIndexAndTime,wordByWordHighlight:this.settings.wordByWordHighlight,visibleLanguages:this.settings.visibleLanguages||["en","zh"]})}async saveSettings(){await this.saveData(this.settings)}async activateView(){let{workspace:t}=this.app,n=null,r=t.getLeavesOfType(Qt);if(r.length>0?n=r[0]||null:(n=t.getLeaf("tab"),n&&await n.setViewState({type:Qt,active:!0})),n)return t.revealLeaf(n),n.view;throw new Error("Failed to create view")}async activateSubtitlePanel(){let{workspace:t}=this.app,n=null,r=t.getLeavesOfType(Do);if(r.length>0)n=r[0]||null;else{let o=this.settings.subtitlePanelLocation||"tab";switch(console.log("[LangPlayer] Opening subtitle panel in location:",o),o){case"right":n=t.getRightLeaf(!1);break;case"left":n=t.getLeftLeaf(!1);break;case"tab":n=t.getLeaf("tab");break;case"split":n=t.getLeaf("split","vertical");break;default:n=t.getLeaf("tab")}n&&await n.setViewState({type:Do,active:!0})}if(n)return t.revealLeaf(n),n.view;throw new Error("Failed to create subtitle panel")}async openFile(t,n){try{await(await this.activateView()).loadFile(t,n),new Y.Notice(`Playing: ${t.name}`)}catch(r){console.error("[LinguaFlow] Error opening file:",r);let o=r instanceof Error?r.message:"Unknown error";new Y.Notice(`Failed to open file: ${o}`)}}async openUrl(t,n,r){try{let o=await this.activateView(),i={type:"url",url:t,displayName:r||t,timestamp:n};await o.loadMedia(i),new Y.Notice(`Loading: ${r||"Media"}`)}catch(o){console.error("[LinguaFlow] Error opening URL:",o);let i=o instanceof Error?o.message:"Unknown error";new Y.Notice(`Failed to open URL: ${i}`)}}async handleProtocol(t){if(console.log("[LangPlayer] Protocol called:",t),!t.src){new Y.Notice("LangPlayer: Missing src parameter");return}let n=t.t?mp(t.t):void 0,r=decodeURIComponent(t.src);if(console.log(`[LangPlayer] Protocol Action: src=${r}, t=${n}`),r.startsWith("http://")||r.startsWith("https://"))await this.openUrl(r,n,t.title);else{let o=this.app.vault.getAbstractFileByPath(r);if(o instanceof Y.TFile){if(await this.openFile(o,n),n!==void 0&&n>=0){let s=this.app.workspace.getLeavesOfType(Qt)[0]?.view;s&&setTimeout(()=>{Math.abs(s.getCurrentTime()-n)>1&&(console.log(`[LangPlayer] Seeking to ${n}s (backup)`),s.seekTo(n))},1e3)}}else console.warn(`[LangPlayer] File not found: ${r}`),new Y.Notice(`File not found: ${r}`)}}async openStudyNote(){let t=this.app.workspace.getLeavesOfType(Qt)[0]?.view;if(!t||!t.currentSource){new Y.Notice("\u274C \u8BF7\u5148\u64AD\u653E\u4E00\u4E2A\u89C6\u9891");return}let n=t.currentSource,r=n.displayName||"Untitled Video",o=r;o&&o.lastIndexOf(".")>-1&&(o=o.substring(0,o.lastIndexOf("."))),o=`${o}_Study.md`;let i=o,s=null;if(this.settings.notePath&&this.settings.notePath.trim()){let a=this.settings.notePath.trim();if(a.endsWith("/")&&(a=a.slice(0,-1)),!this.app.vault.getAbstractFileByPath(a))try{await this.app.vault.createFolder(a)}catch(d){console.warn("[LangPlayer] Folder creation failed (might be nested or exist):",d)}i=`${a}/${o}`,n.type==="local"&&n.file&&(s=n.file)}else n.type==="local"&&n.file&&(s=n.file,s.parent&&(i=s.parent.path==="/"?o:`${s.parent.path}/${o}`));console.log(`[LangPlayer] Opening study note: ${i}`);let l=this.app.vault.getAbstractFileByPath(i);if(!l)try{let a=this.settings.noteTemplate||"",u=new Date,d=u.getFullYear()+"-"+String(u.getMonth()+1).padStart(2,"0")+"-"+String(u.getDate()).padStart(2,"0")+" "+String(u.getHours()).padStart(2,"0")+":"+String(u.getMinutes()).padStart(2,"0"),g=`[[${n.type==="local"?s?.name:n.url}]]`,h=n.url,y=a.replace(/{{title}}/g,r).replace(/{{date}}/g,d).replace(/{{link}}/g,g).replace(/{{url}}/g,h);l=await this.app.vault.create(i,y),new Y.Notice("\u2705 \u5DF2\u521B\u5EFA\u5B66\u4E60\u7B14\u8BB0")}catch(a){console.error("Failed to create study note:",a);let u=a instanceof Error?a.message:String(a);new Y.Notice(`\u274C \u521B\u5EFA\u7B14\u8BB0\u5931\u8D25: ${u}`);return}if(l instanceof Y.TFile){let u=this.app.workspace.getLeavesOfType("markdown").find(g=>g.view.file===l);u&&u.detach();let d=this.app.workspace.getLeaf("split","vertical");await d.openFile(l),this.app.workspace.setActiveLeaf(d,{focus:!0})}}async loadExternalSubtitle(){let t=document.createElement("input");t.type="file",t.accept=".srt,.vtt",t.onchange=async n=>{let o=n.target.files?.[0];if(o){let i=new FileReader;i.onload=async s=>{let l=s.target?.result;try{let a=this.subtitleLoader.loadFromText(l,o.name);a&&a.cues.length>0?(b.getState().setSubtitles(a.cues),new Y.Notice(`\u2705 \u5DF2\u52A0\u8F7D ${a.cues.length} \u6761\u5B57\u5E55`)):new Y.Notice("\u274C \u65E0\u6CD5\u89E3\u6790\u5B57\u5E55\u6587\u4EF6")}catch(a){console.error("[LinguaFlow] Error loading subtitle:",a);let u=a instanceof Error?a.message:String(a);new Y.Notice("\u274C \u52A0\u8F7D\u5B57\u5E55\u5931\u8D25: "+u)}},i.readAsText(o)}},t.click()}isMediaFile(t){return["mp4","mkv","webm","ogv","avi","mov","flv","wmv","m4v","3gp","mp3","wav","ogg","m4a","flac","aac","wma","opus"].includes(t.extension.toLowerCase())}async insertSubtitleToNote(t){let n=this.app.workspace.getLeavesOfType(Qt)[0]?.view;if(!n||!n.currentSource){new Y.Notice("\u274C \u8BF7\u5148\u64AD\u653E\u89C6\u9891");return}let r=null,o=this.app.workspace.activeLeaf;if(o?.view.getViewType()==="markdown")r=o.view;else{let s=this.app.workspace.getLeavesOfType("markdown").filter(l=>l.view.containerEl.isShown?.()||l.view.containerEl.offsetParent!==null);s.length>0&&s[0]&&(r=s[0].view)}if(r||(new Y.Notice("\u672A\u627E\u5230\u7B14\u8BB0\uFF0C\u6B63\u5728\u6253\u5F00\u5B66\u4E60\u7B14\u8BB0..."),await this.openStudyNote(),await new Promise(i=>setTimeout(i,500)),o=this.app.workspace.activeLeaf,o?.view.getViewType()==="markdown"&&(r=o.view)),r){r.getMode()==="preview"&&(await r.setState({...r.getState(),mode:"source"},{history:!1}),await new Promise(v=>setTimeout(v,100)));let i=r.editor;if(!i){new Y.Notice("\u274C \u65E0\u6CD5\u83B7\u53D6\u7F16\u8F91\u5668\u5B9E\u4F8B");return}let s=vp(t.start),l=n.currentSource.type==="local"&&n.currentSource.file?n.currentSource.file.path:n.currentSource.url,a=`[${s}](obsidian://linguaflow?src=${encodeURIComponent(l)}&t=${Math.floor(t.start)})`,{visibleLanguages:u}=b.getState().subtitleConfig,d=[];t.languages&&Object.keys(t.languages).length>0?u.forEach(v=>{let S=t.languages?.[v];S&&d.push(S)}):(u.includes("en")&&t.textEn&&d.push(t.textEn),u.includes("zh")&&t.textZh&&d.push(t.textZh),d.length===0&&u.length>0&&t.text&&t.text!==t.textEn&&t.text!==t.textZh&&d.push(t.text));let g=d.join(" "),h=`- ${a}`;g&&(h+=` ${g}`),h+=`
`;let y=i.getCursor();if(y.line===0&&y.ch===0&&!i.somethingSelected()&&i.lineCount()>1){let v=i.lineCount()-1,S=i.getLine(v).length;i.setCursor({line:v,ch:S}),h=`
`+h}i.replaceSelection(h),new Y.Notice("\u2705 \u5B57\u5E55\u5DF2\u63D2\u5165\u7B14\u8BB0")}else new Y.Notice("\u274C \u65E0\u6CD5\u627E\u5230\u6216\u6253\u5F00\u7B14\u8BB0\u89C6\u56FE")}updateSubtitleStyles(){let t=this.settings,n=document.getElementById("linguaflow-custom-subtitle-style");n||(n=document.createElement("style"),n.id="linguaflow-custom-subtitle-style",document.head.appendChild(n)),n.textContent=`
			.linguaflow-subtitle-item-en,
			.linguaflow-subtitle-item-zh,
			.linguaflow-subtitle-item-main,
			.linguaflow-subtitle-language {
				font-size: ${t.subtitleFontSize}px;
				font-weight: ${t.subtitleFontWeight};
				line-height: ${t.subtitleLineHeight};
				${t.subtitleColor?`color: ${t.subtitleColor};`:""}
				${t.subtitleBackgroundColor?`background-color: ${t.subtitleBackgroundColor};`:""}
			}

			.linguaflow-subtitle-item-zh {
				${t.subtitleTranslationColor?`color: ${t.subtitleTranslationColor} !important;`:""}
			}

			.linguaflow-word-highlight,
			.linguaflow-line-highlight,
			.linguaflow-line-highlight .linguaflow-clickable-word {
				${t.subtitleHighlightColor?`color: ${t.subtitleHighlightColor} !important;`:""}
			}
		`}};
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
